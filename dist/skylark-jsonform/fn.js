/**
 * skylark-jsonform - A version of jsonform that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jsonform/
 * @license MIT
 */
define(["skylark-langx","skylark-jquery","./form-tree","./get-form-value"],function(t,e,a,i){e.fn.jsonFormErrors=function(t,a){if(e(".error",this).removeClass("error"),e(".warning",this).removeClass("warning"),e(".jsonform-errortext",this).hide(),t){for(var i=[],n=0;n<t.length;n++){var s=t[n].uri.replace(/.*#\//,"").replace(/\//g,".").replace(/\.([0-9]+)(?=\.|$)/g,"[$1]"),r=".jsonform-error-"+util.escapeSelector(s.replace(/\./g,"---"));i.push(r);var o=t[n].type||"error";e(r,this).addClass(o),e(r+" .jsonform-errortext",this).html(t[n].message).show()}i=i.join(",");var d=e(i).get(0);d&&d.scrollIntoView&&d.scrollIntoView(!0,{behavior:"smooth"})}},e.fn.jsonForm=function(i){i=t.defaults({},i,{submitEvent:"submit"});var n,s,r,o,d=new a;return d.initialize(i),d.render(this.get(0)),i.transloadit&&this.append('<input type="hidden" name="params" value=\''+t.escapeHTML(JSON.stringify(i.transloadit.params))+"'>"),this.data("jsonform-tree",d),i.submitEvent&&(this.unbind(i.submitEvent+".jsonform"),this.bind(i.submitEvent+".jsonform",function(t){d.submit(t)})),n=function(t,e){e.find("> .active").removeClass("active"),t.addClass("active")},s=function(t,e){t.find("input, textarea, select").removeAttr("disabled"),t.parent().children(":not([data-idx="+e+"])").find("input, textarea, select").attr("disabled","disabled")},r=function(t){var a,i=e("option:selected",e(this)),r=e(this),o=i.get(0).getAttribute("data-idx")||i.attr("value");t.preventDefault(),i.hasClass("active")||(a=e(this).parents(".tabbable").eq(0).find("> .tab-content > [data-idx="+o+"]"),n(i,r),n(a,a.parent()),s(a,o))},o=function(t){e("a",e(this));var a=e(this).parents(".tabbable").first().find(".tab-content").first(),i=e(this).index(),r=a.find("> [data-idx="+i+"]");t.preventDefault(),n(e(this),e(this).parent()),n(r,r.parent()),e(this).parent().hasClass("jsonform-alternative")&&s(r,i)},this.each(function(){e(this).delegate("select.nav","change",r),e(this).find("select.nav").each(function(){e(this).val(e(this).find(".active").attr("value"));var t=e(this).find("option:selected").get(0).getAttribute("data-idx")||e(this).find("option:selected").attr("value"),a=e(this).parents(".tabbable").eq(0).find("> .tab-content > [data-idx="+t+"]");s(a,t)}),e(this).delegate("ul.nav li","click",o),e(this).find("ul.nav li.active").click()}),e(".expandable > div, .expandable > fieldset",this).hide(),this.on("click",".expandable > legend",function(){var t=e(this).parent();t.toggleClass("expanded"),t.find("legend").attr("aria-expanded",t.hasClass("expanded")),e("> div",t).slideToggle(100)}),d},e.fn.jsonFormValue=function(){return i(this)}});
//# sourceMappingURL=sourcemaps/fn.js.map
