/**
 * skylark-jsonform - A version of jsonform that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jsonform/
 * @license MIT
 */
!function(factory,globals){var define=globals.define,require=globals.require,isAmd="function"==typeof define&&define.amd,isCmd=!isAmd&&"undefined"!=typeof exports;if(!isAmd&&!define){var map={};define=globals.define=function(e,t,n){"function"==typeof n?(map[e]={factory:n,deps:t.map(function(t){return function(e,t){if("."!==e[0])return e;var n=t.split("/"),r=e.split("/");n.pop();for(var i=0;i<r.length;i++)"."!=r[i]&&(".."==r[i]?n.pop():n.push(r[i]));return n.join("/")}(t,e)}),resolved:!1,exports:null},require(e)):map[e]={factory:null,resolved:!0,exports:n}},require=globals.require=function(e){if(!map.hasOwnProperty(e))throw new Error("Module "+e+" has not been defined");var module=map[e];if(!module.resolved){var t=[];module.deps.forEach(function(e){t.push(require(e))}),module.exports=module.factory.apply(globals,t)||null,module.resolved=!0}return module.exports}}if(!define)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(define,require){define("skylark-langx-ns/_attach",[],function(){return function(e,t,n){"string"==typeof t&&(t=t.split("."));for(var r=t.length,i=e,s=0,a=t[s++];s<r;)i=i[a]=i[a]||{},a=t[s++];if(i[a]){if(n)throw new Error("This namespace already exists:"+t)}else i[a]=n||{};return i[a]}}),define("skylark-langx-ns/ns",["./_attach"],function(e){var t={attach:function(n,r){return e(t,n,r)}};return t}),define("skylark-langx-ns/main",["./ns"],function(e){return e}),define("skylark-langx-ns",["skylark-langx-ns/main"],function(e){return e}),define("skylark-langx/skylark",["skylark-langx-ns"],function(e){return e}),define("skylark-langx-arrays/arrays",["skylark-langx-ns"],function(e){return e.attach("langx.arrays")}),define("skylark-langx-arrays/base-find-index",["./arrays"],function(e){return e.baseFindIndex=function(e,t,n,r){var i=e.length,s=n+(r?1:-1);for(;r?s--:++s<i;)if(t(e[s],s,e))return s;return-1}}),define("skylark-langx-arrays/base-indexof",["./arrays","./base-find-index"],function(e,t){function n(e){return e!=e}return e.baseIndexOf=function(e,r,i){if(r!=r)return t(e,n,i);var s=i-1,a=e.length;for(;++s<a;)if(e[s]===r)return s;return-1}}),define("skylark-langx-arrays/filter",["./arrays"],function(e){var t=Array.prototype.filter;return e.filter=function(e,n){return t.call(e,n)}}),define("skylark-langx-arrays/compact",["./arrays","./filter"],function(e,t){return e.compact=function(e){return t(e,function(e){return null!=e})}}),define("skylark-langx-arrays/in-array",["./arrays"],function(e){return e.inArray=function(e,t){if(!t)return-1;var n;if(t.indexOf)return t.indexOf(e);n=t.length;for(;n--;)if(t[n]===e)return n;return-1}}),define("skylark-langx-arrays/contains",["./arrays","./in-array"],function(e,t){return e.contains=function(e,n){return t(n,e)}}),define("skylark-langx-funcs/funcs",["skylark-langx-ns"],function(e,t,n){return e.attach("langx.funcs",{noop:function(){},returnTrue:function(){return!0},returnFalse:function(){return!1}})}),define("skylark-langx-funcs/rest-arguments",["./funcs"],function(e){return e.restArguments=function(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var s=Array(t+1);for(i=0;i<t;i++)s[i]=arguments[i];return s[t]=r,e.apply(this,s)}}}),define("skylark-langx-funcs/bind-all",["./funcs","./rest-arguments"],function(e,t){return e.bindAll=t(function(e,t){var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=e[r].bind(e)}})}),define("skylark-langx-types/types",["skylark-langx-ns"],function(e){var t,n=Array.isArray,r={}.toString,i=(t={},"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(e){t["[object "+e+"]"]=e.toLowerCase()}),function(e){return null==e?String(e):t[r.call(e)]||"object"}),s=n||function(e){return object&&object.constructor===Array};function a(e){var t;for(t in e)if(null!==e[t])return!1;return!0}function o(e){return"function"==i(e)}function l(e){return e&&e.nodeType}function u(e){return"number"==typeof e}function c(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function f(e){return"string"==typeof e}function h(e){return e&&e==e.window}function d(e){return"symbol"==typeof e}var p=1/0,m=1.7976931348623157e308,y=NaN,g=/^\s+|\s+$/g,v=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,x=/^0o[0-7]+$/i,b=parseInt;function w(e){if(!e)return 0===e?e:0;if((e=_(e))===p||e===-p){var t=e<0?-1:1;return t*m}return e==e?e:0}function _(e){if("number"==typeof e)return e;if(d(e))return y;if(c(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=c(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(g,"");var n=k.test(e);return n||x.test(e)?b(e.slice(2),n?2:8):v.test(e)?y:+e}return e.attach("langx.types",{isArray:s,isArrayLike:function(e){return!f(e)&&!l(e)&&"number"==typeof e.length&&!o(e)},isBoolean:function(e){return!0===e||!1===e||"[object Boolean]"===r.call(e)},isDefined:function(e){return void 0!==e},isDocument:function(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE},isElement:function(e){return!(!e||1!==e.nodeType)},isEmpty:a,isEmptyObject:a,isFunction:o,isHtmlNode:l,isNaN:function(e){return isNaN(e)},isNull:function(e){return null===e},isNumber:u,isNumeric:u,isObject:c,isPlainObject:function(e){return c(e)&&!h(e)&&Object.getPrototypeOf(e)==Object.prototype},isString:f,isSameOrigin:function(e){if(e){var t=location.protocol+"//"+location.hostname;return location.port&&(t+=":"+location.port),e.startsWith(t)}},isSymbol:d,isUndefined:function(e){return void 0===e},isWindow:h,type:i,toFinite:w,toNumber:_,toInteger:function(e){var t=w(e),n=t%1;return t==t?n?t-n:t:0}})}),define("skylark-langx-types/main",["./types"],function(e){return e}),define("skylark-langx-types",["skylark-langx-types/main"],function(e){return e}),define("skylark-langx-funcs/defer",["skylark-langx-types","./funcs"],function(e,t){return t.defer=function(t,n,r,i){var s={cancel:null},a=t;e.isNumber(n)||e.isFunction(n)||(i=r,r=n,n=0);r&&(a=function(){t.apply(i,r)});if(e.isFunction(n)){var o=!1;n(function(){o||a()}),s.cancel=function(){o=!0}}else{var l;0==n&&requestAnimationFrame?(l=requestAnimationFrame(a),s.cancel=function(){return cancelAnimationFrame(l)}):(l=setTimeout(a,n),s.cancel=function(){return clearTimeout(l)})}return s}}),define("skylark-langx-funcs/debounce",["./funcs","./defer"],function(e,t){return e.debounce=function(e,n,r){var i,s,a=function(){var a=this,l=arguments;return o(),i=setTimeout(function(){i=null,r?s=t(e,l,a):e.apply(a,l)},n),{cancel:o}},o=a.cancel=function(){i&&clearTimeout(i),s&&s.cancel(),i=void 0,s=void 0};return a}}),define("skylark-langx-objects/objects",["skylark-langx-ns","skylark-langx-types"],function(e,t){return e.attach("langx.objects",{attach:e.attach})}),define("skylark-langx-objects/all-keys",["skylark-langx-types","./objects"],function(e,t){return t.allKeys=function(t){if(!e.isObject(t))return[];var n=[];for(var r in t)n.push(r);return n}}),define("skylark-langx-objects/assign",["skylark-langx-types","./objects"],function(e,t){return t.assign=Object.assign}),define("skylark-langx-objects/to-key",["skylark-langx-types","./objects"],function(e,t){const n=e.isSymbol,r=e.isString,i=1/0;return t.toKey=function(e){if(r(e)||n(e))return e;const t=`${e}`;return"0"==t&&1/e==-i?"-0":t}}),define("skylark-langx-objects/is-key",["skylark-langx-types","./objects"],function(e,t){const n=e.isSymbol,r=e.isArray,i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;return t.isKey=function(e,t){if(r(e))return!1;const a=typeof e;if("number"===a||"boolean"===a||null==e||n(e))return!0;return s.test(e)||!i.test(e)||null!=t&&e in Object(t)}}),define("skylark-langx-objects/_cast_path",["skylark-langx-types","./objects","./is-key"],function(e,t,n){const r=".".charCodeAt(0),i=/\\(\\)?/g,s=RegExp("[^.[\\]]+|\\[(?:([^\"'][^[]*)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))","g"),a=e=>{const t=[];return e.charCodeAt(0)===r&&t.push(""),e.replace(s,(e,n,r,s)=>{let a=e;r?a=s.replace(i,"$1"):n&&(a=n.trim()),t.push(a)}),t};return function(t,r){if(e.isArray(t))return t;return n(t,r)?[t]:a(t)}}),define("skylark-langx-objects/get",["skylark-langx-types","./objects","./to-key","./_cast_path"],function(e,t,n,r){return t.get=function(e,t,i){const s=null==e?void 0:function(e,t){let i=0;const s=(t=r(t,e)).length;for(;null!=e&&i<s;)e=e[n(t[i++])];return i&&i==s?e:void 0}(e,t);return void 0===s?i:s}}),define("skylark-langx-objects/base-at",["./objects","./get"],function(e,t){return e.baseAt=function(e,n){let r=-1;const i=n.length,s=new Array(i),a=null==e;for(;++r<i;)s[r]=a?void 0:t(e,n[r]);return s}}),define("skylark-langx-objects/clone",["skylark-langx-types","./objects"],function(e,t){var n=e.isPlainObject,r=e.isArray;return t.clone=function e(t,i){var s;if(void 0===t||null===t)s=t;else if(i&&t.clone)s=t.clone();else if(r(t)){s=[];for(var a=0;a<t.length;a++)s.push(e(t[a]))}else if(n(t))for(var o in s={},t)s[o]=e(t[o]);else s=t;return s}}),define("skylark-langx-objects/defaults",["./objects","./all-keys"],function(e,t){return e.defaults=(n=t,r=!0,function(e){var t=arguments.length;if(r&&(e=Object(e)),t<2||null==e)return e;for(var i=1;i<t;i++)for(var s=arguments[i],a=n(s),o=a.length,l=0;l<o;l++){var u=a[l];r&&void 0!==e[u]||(e[u]=s[u])}return e});var n,r}),define("skylark-langx-objects/each",["./objects"],function(e){return e.each=function(e,t,n){var r,i,s,a;if(e)if(void 0===(r=e.length)){for(i in e)if(e.hasOwnProperty(i)&&(a=e[i],!1===(n?t.call(a,a,i):t.call(a,i,a))))break}else for(s=0;s<r&&(a=e[s],!1!==(n?t.call(a,a,s):t.call(a,s,a)));s++);return this}}),define("skylark-langx-objects/_mixin",["skylark-langx-types","./objects"],function(e,t){var n=e.isPlainObject;return function e(t,r,i,s){for(var a in r)s&&void 0!==t[a]||(i&&n(r[a])?(n(t[a])||(t[a]={}),e(t[a],r[a],i,s)):void 0!==r[a]&&(t[a]=r[a]));return t}}),define("skylark-langx-objects/_parse_mixin_args",["skylark-langx-types","./objects"],function(e,t){var n=Array.prototype.slice,r=e.isBoolean;return function(e){var t=n.call(arguments,0),i=t.shift(),s=!1;r(t[t.length-1])&&(s=t.pop());return{target:i,sources:t,deep:s}}}),define("skylark-langx-objects/mixin",["skylark-langx-types","./objects","./_mixin","./_parse_mixin_args"],function(e,t,n,r){return t.mixin=function(){var e=r.apply(this,arguments);return e.sources.forEach(function(t){n(e.target,t,e.deep,!1)}),e.target}}),define("skylark-langx-objects/extend",["./objects","./mixin"],function(e,t){var n=Array.prototype.slice;return e.extend=function(e){var r,i=n.call(arguments,1);"boolean"==typeof e&&(r=e,e=i.shift());0==i.length&&(i=[e],e=this);return i.forEach(function(n){t(e,n,r)}),e}}),define("skylark-langx-objects/for-each",["./objects","./each"],function(e,t){return e.forEach=function(e,n){if(!e)return;e.forEach?e.forEach(n):t(e,n,!0)}}),define("skylark-langx-objects/has",["skylark-langx-types","./objects"],function(e,t){var n=Object.prototype.hasOwnProperty;return t.has=function(t,r){if(!e.isArray(r))return null!=t&&n.call(t,r);for(var i=r.length,s=0;s<i;s++){var a=r[s];if(null==t||!n.call(t,a))return!1;t=t[a]}return!!i}}),define("skylark-langx-objects/includes",["./objects"],function(e){return e.includes=function(e,t,n,r){e=isArrayLike(e)?e:values(e),n=n&&!r?toInteger(n):0;var i=e.length;n<0&&(n=nativeMax(i+n,0));return isString(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&baseIndexOf(e,t,n)>-1}}),define("skylark-langx-objects/is-equal",["skylark-langx-types","./objects"],function(e,t){var n,r,i=e.isFunction,s="undefined"!=typeof Symbol?Symbol.prototype:null;return n=function(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var s=typeof e;return("function"===s||"object"===s||"object"==typeof t)&&r(e,t,n,i)},r=function(e,t,r,a){var o=toString.call(e);if(o!==toString.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return s.valueOf.call(e)===s.valueOf.call(t)}var l="[object Array]"===o;if(!l){if("object"!=typeof e||"object"!=typeof t)return!1;var u=e.constructor,c=t.constructor;if(u!==c&&!(i(u)&&u instanceof u&&i(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}r=r||[],a=a||[];for(var f=r.length;f--;)if(r[f]===e)return a[f]===t;if(r.push(e),a.push(t),l){if((f=e.length)!==t.length)return!1;for(;f--;)if(!n(e[f],t[f],r,a))return!1}else{var h,d=Object.keys(e);if(f=d.length,Object.keys(t).length!==f)return!1;for(;f--;)if(h=d[f],void 0===t[h]||!n(e[h],t[h],r,a))return!1}return r.pop(),a.pop(),!0},t.isEqual=function(e,t){return n(e,t)}}),define("skylark-langx-objects/keys",["skylark-langx-types","./objects","./has"],function(e,t,n){return t.keys=function(t){if(!e.isObject(t))return[];var r=[];for(var i in t)n(t,i)&&r.push(i);return r}}),define("skylark-langx-objects/is-match",["skylark-langx-types","./objects","./keys"],function(e,t,n){return t.isMatch=function(e,t){var n=n(t),r=n.length;if(null==e)return!r;for(var i=Object(e),s=0;s<r;s++){var a=n[s];if(t[a]!==i[a]||!(a in i))return!1}return!0}}),define("skylark-langx-objects/omit",["./objects","./mixin"],function(e,t){return e.omit=function(e,n,r){if(!e)return null;for(var i=t({},e),s=1;s<arguments.length;s++){var a=arguments[s];a in e&&delete i[a]}return i}}),define("skylark-langx-objects/pick",["./objects"],function(e){return e.pick=function(e,t,n){if(!e)return null;for(var r={},i=1;i<arguments.length;i++){var s=arguments[i];s in e&&(r[s]=e[s])}return r}}),define("skylark-langx-objects/remove-items",["skylark-langx-types","./objects"],function(e,t){return t.removeItem=function(t,n){if(e.isArray(t)){var r=t.indexOf(n);-1!=r&&t.splice(r,1)}else if(e.isPlainObject(t))for(var i in t)if(t[i]==n){delete t[i];break}return this}}),define("skylark-langx-objects/result",["skylark-langx-types","./objects","./to-key","./_cast_path"],function(e,t,n,r){e.isArray;var i=e.isFunction;return t.result=function(e,t,s){let a=-1,o=(t=r(t,e)).length;o||(o=1,e=void 0);for(;++a<o;){let r=null==e?void 0:e[n(t[a])];void 0===r&&(a=o,r=s),e=i(r)?r.call(e):r}return e}}),define("skylark-langx-objects/safe-mixin",["./objects","./_mixin","./_parse_mixin_args"],function(e,t,n){return e.safeMixin=function(){var e=n.apply(this,arguments);return e.sources.forEach(function(n){t(e.target,n,e.deep,!0)}),e.target}}),define("skylark-langx-objects/scall",["./objects"],function(e){const t=Array.prototype.slice;return e.scall=function(e,n,r,i){if(e&&e[n]){var s=t.call(arguments,2);return e[n].apply(e,s)}}}),define("skylark-langx-objects/is-index",["skylark-langx-types","./objects"],function(e,t){const n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;return t.isIndex=function(e,t){const i=typeof e;return!!(t=null==t?n:t)&&("number"===i||"symbol"!==i&&r.test(e))&&e>-1&&e%1==0&&e<t}}),define("skylark-langx-objects/set",["skylark-langx-types","./objects","./_cast_path","./is-index","./to-key"],function(e,t,n,r,i){return t.set=function(t,s,a){return null==t?t:function(t,s,a,o){if(!e.isObject(t))return t;const l=(s=n(s,t)).length,u=l-1;let c=-1,f=t;for(;null!=f&&++c<l;){const t=i(s[c]);let n=a;if(c!=u){const i=f[t];void 0===(n=o?o(i,t,f):void 0)&&(n=e.isObject(i)?i:r(s[c+1])?[]:{})}f[t]=n,f=f[t]}return t}(t,s,a)}}),define("skylark-langx-objects/shadow",["./objects"],function(e){return e.shadow=function(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!1}),n}}),define("skylark-langx-objects/unset",["skylark-langx-types","./objects","./set"],function(e,t,n){return t.unset=function(e,t){return null==e||n(e,t,void 0)}}),define("skylark-langx-objects/values",["skylark-langx-types","./objects","./all-keys"],function(e,t,n){return t.values=function(e){for(var t=n(e),r=t.length,i=Array(r),s=0;s<r;s++)i[s]=e[t[s]];return i}}),define("skylark-langx-objects/main",["./objects","./all-keys","./assign","./base-at","./clone","./defaults","./each","./extend","./for-each","./get","./has","./includes","./is-equal","./is-key","./is-match","./keys","./mixin","./omit","./pick","./remove-items","./result","./safe-mixin","./scall","./set","./shadow","./to-key","./unset","./values"],function(e){return e}),define("skylark-langx-objects",["skylark-langx-objects/main"],function(e){return e}),define("skylark-langx-funcs/delegate",["skylark-langx-objects","./funcs"],function(e,t){var n=e.mixin,r=function(){function e(){}return function(t,r){e.prototype=t;var i=new e;return e.prototype=null,r&&n(i,r),i}}();return t.delegate=r}),define("skylark-langx-funcs/loop",["./funcs"],function(e){function t(e){this.callback=e,this.running=!1,this.id=-1}return t.prototype.start=function(){if(!this.running){this.running=!0;var e=this;!function t(){e.callback();e.running&&(e.id=requestAnimationFrame(t))}()}},t.prototype.stop=function(){this.running=!1,cancelAnimationFrame(this.id)},e.loop=function(e){return new t(e)}}),define("skylark-langx-funcs/negate",["./funcs"],function(e){return e.negate=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(...t){return!e.apply(this,t)}}}),define("skylark-langx-funcs/proxy",["skylark-langx-types","./funcs"],function(e,t){var n=Array.prototype.slice,r=e.isFunction,i=e.isString;return t.bind=t.proxy=function e(t,s){var a=2 in arguments&&n.call(arguments,2);if(r(t)){return function(){return t.apply(s,a?a.concat(n.call(arguments)):arguments)}}if(i(s))return a?(a.unshift(t[s],t),e.apply(null,a)):e(t[s],t);throw new TypeError("expected function")}}),define("skylark-langx-funcs/template",["skylark-langx-objects","./funcs","./proxy"],function(e,t,n){Array.prototype.slice;var r={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},i=/(.)^/,s={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},a=/\\|'|\r|\n|\t|\u2028|\u2029/g;function o(t,o,l){var u;l=e.defaults({},l,r);var c=RegExp([(l.escape||i).source,(l.interpolate||i).source,(l.evaluate||i).source].join("|")+"|$","g"),f=0,h="__p+='";t.replace(c,function(e,n,r,i,o){return h+=t.slice(f,o).replace(a,function(e){return"\\"+s[e]}),n&&(h+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(h+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(h+="';\n"+i+"\n__p+='"),f=o+e.length,e}),h+="';\n",l.variable||(h="with(obj||{}){\n"+h+"}\n"),h="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+h+"return __p;\n";try{u=new Function(l.variable||"obj","_",h)}catch(e){throw e.source=h,e}if(o)return u(o,this);var d=n(function(e){return u.call(this,e,this)},this),p=l.variable||"obj";return d.source="function("+p+"){\n"+h+"}",d}return o.templateSettings=t.templateSettings=r,t.template=o}),define("skylark-langx-funcs/throttle",["./funcs"],function(e){return e.throttle=function(e,t){let n=window.performance.now();return function(...r){const i=window.performance.now();i-n>=t&&(e(...r),n=i)}}}),define("skylark-langx-funcs/main",["./funcs","./bind-all","./debounce","./defer","./delegate","./loop","./negate","./proxy","./rest-arguments","./template","./throttle"],function(e){return e}),define("skylark-langx-funcs",["skylark-langx-funcs/main"],function(e){return e}),define("skylark-langx-arrays/flatten",["skylark-langx-types","./arrays"],function(e,t){return t.flatten=function(t){if(e.isArrayLike(t)){for(var n=[],r=0;r<t.length;r++){var i=t[r];if(e.isArrayLike(i))for(var s=0;s<i.length;s++)n.push(i[s]);else n.push(i)}return n}return t}}),define("skylark-langx-arrays/difference",["skylark-langx-funcs","./arrays","./flatten","./filter","./contains"],function(e,t,n,r,i){var s=e.restArguments(function(e,t){return t=n(t,!0,!0),r(e,function(e){return!i(t,e)})});return t.difference=s}),define("skylark-langx-arrays/find",["./arrays"],function(e){var t=Array.prototype.find;return e.find=function(e,n){return t.call(e,n)}}),define("skylark-langx-arrays/first",["./arrays"],function(e){return e.first=function(e,t){return t?e.slice(0,t):e[0]}}),define("skylark-langx-arrays/grep",["skylark-langx-objects","./arrays"],function(e,t){return t.grep=function(t,n){var r=[];return e.each(t,function(e,t){n(t,e)&&r.push(t)}),r}}),define("skylark-langx-arrays/indexof",["./arrays"],function(e){return e.indexOf=function(e,t){return e.indexOf(t)}}),define("skylark-langx-arrays/last",["./arrays"],function(e){return e.last=function(e){return e[e.length-1]}}),define("skylark-langx-arrays/make-array",["skylark-langx-types","./arrays"],function(e,t){return t.makeArray=function(t,n,r){if(e.isArrayLike(t))return(r||[]).concat(Array.prototype.slice.call(t,n||0));return[t]}}),define("skylark-langx-arrays/map",["skylark-langx-types","./arrays","./flatten"],function(e,t,n){return t.map=function(t,r){var i,s,a,o=[];if(e.isArrayLike(t))for(s=0;s<t.length;s++)null!=(i=r.call(t[s],t[s],s))&&o.push(i);else for(a in t)null!=(i=r.call(t[a],t[a],a))&&o.push(i);return n(o)}}),define("skylark-langx-arrays/merge",["./arrays"],function(e){return e.merge=function(e,t){var n=t.length,r=e.length,i=0;if("number"==typeof n)for(;i<n;i++)e[r++]=t[i];else for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e}}),define("skylark-langx-arrays/pull-at",["skylark-langx-types","skylark-langx-objects","./arrays"],function(e,t,n){return n.pullAt=function(e,...n){null==e||e.length;const r=t.baseAt(e,n);n.sort(function(e,t){return e-t});for(let t=n.length-1;t>=0;t--)e.slice(n[t],1);return r}}),define("skylark-langx-arrays/reduce",["./arrays"],function(e){return e.reduce=function(e,t,n){return Array.prototype.reduce.call(e,t,n)}}),define("skylark-langx-arrays/uniq",["./arrays","./filter"],function(e,t){return e.uniq=function(e){return t(e,function(t,n){return e.indexOf(t)==n})}}),define("skylark-langx-arrays/without",["skylark-langx-funcs","./arrays","./difference"],function(e,t,n){var r=e.restArguments(function(e,t){return n(e,t)});return t.without=r}),define("skylark-langx-arrays/main",["./arrays","./base-find-index","./base-indexof","./compact","./contains","./difference","./filter","./find","./first","./flatten","./grep","./in-array","./indexof","./last","./make-array","./map","./merge","./pull-at","./reduce","./uniq","./without"],function(e){return e}),define("skylark-langx-arrays",["skylark-langx-arrays/main"],function(e){return e}),define("skylark-langx/arrays",["skylark-langx-arrays"],function(e){return e}),define("skylark-langx-constructs/constructs",["skylark-langx-ns"],function(e){return e.attach("langx.constructs",{})}),define("skylark-langx-constructs/inherit",["./constructs"],function(e){return e.inherit=function(e,t){if("function"!=typeof t&&t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object.setPrototypeOf(e,t)}}),define("skylark-langx-constructs/klass",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","./constructs","./inherit"],function(e,t,n,r,i,s){var a=r.uniq,o=n.has,l=n.mixin,u=t.isArray,c=t.isDefined,f=function(){function e(){return this._construct?this._construct.apply(this,arguments):this.init?this.init.apply(this,arguments):void 0}return function n(r,i,f,h){u(i)&&(h=f,f=i,i=null),i=i||Object,c(f)&&!u(f)&&(h=f,f=!1);var d=i;f&&(f=function(e,t){var n=[];return t.forEach(function(e){if(o(e,"__mixins__"))throw new Error("nested mixins");for(var t=[];e;)t.unshift(e),e=e.superclass;n=n.concat(t)}),(n=(n=a(n)).filter(function(t){for(var n=e;n;){if(t===n)return!1;if(o(n,"__mixins__"))for(var r=n.__mixins__,i=0;i<r.length;i++)if(r[i]===t)return!1;n=n.superclass}return!0})).length>0&&n}(d,f)),f&&(d=function(e,t){for(var n=e,r=0;r<t.length;r++){var i=new Function;s(i,n),i.superclass=null,l(i.prototype,t[r].prototype),i.prototype.__mixin__=t[r],n=i}return n}(d,f));var p=r.klassName||"",m=new Function("return function "+p+"() {var inst = this, ctor = arguments.callee;if (!(inst instanceof ctor)) {inst = Object.create(ctor.prototype);}return ctor._constructor.apply(inst, arguments) || inst;}")();return s(m,d),m.superclass=i,m._constructor||(m._constructor=e),f&&(m.__mixins__=f),m.partial||(m.partial=function(e,n){return function(e,n,r){var i=e.prototype,s=e.superclass.prototype,a=r&&r.noOverrided;r&&r.overrides;for(var o in n)if("constructor"!==o){var l=n[o];"function"==typeof n[o]?i[o]=l._constructor||a||"function"!=typeof s[o]?l:function(e,t,n){return function(){var e=this.overrided;this.overrided=n;var r=t.apply(this,arguments);return this.overrided=e,r}}(0,l,s[o]):t.isPlainObject(l)&&null!==l&&l.get?Object.defineProperty(i,o,l):i[o]=l}return e}(this,e,n)}),m.inherit||(m.inherit=function(e,t,r){return n(e,this,t,r)}),m.partial(r,h),m}}();return i.klass=f}),define("skylark-langx-constructs/main",["./constructs","./inherit","./klass"],function(e){return e}),define("skylark-langx-constructs",["skylark-langx-constructs/main"],function(e){return e}),define("skylark-langx-klass/klass",["skylark-langx-ns","skylark-langx-constructs"],function(e,t){return e.attach("langx.klass",t.klass)}),define("skylark-langx-klass/main",["./klass"],function(e){return e}),define("skylark-langx-klass",["skylark-langx-klass/main"],function(e){return e}),define("skylark-langx/klass",["skylark-langx-klass"],function(e){return e}),define("skylark-langx/array-store",["./klass"],function(e){var t=function(e){if(!e)return e;var n=!!e.then;function r(r){e[r]=function(){var i=arguments,s=Deferred.when(e,function(e){return t(Array.prototype[r].apply(e,i))});if("forEach"!==r||n)return s}}return n&&(e=Object.delegate(e)),r("forEach"),r("filter"),r("map"),null==e.total&&(e.total=Deferred.when(e,function(e){return e.length})),e},n=e({klassName:"ArrayStore",queryEngine:function(e,t){switch(typeof e){default:throw new Error("Can not query with a "+typeof e);case"object":case"undefined":var n=e;e=function(e){for(var t in n){var r=n[t];if(r&&r.test){if(!r.test(e[t],e))return!1}else if(r!=e[t])return!1}return!0};break;case"string":if(!this[e])throw new Error("No filter function "+e+" was found in store");e=this[e];case"function":}function r(n){var r=function(e,t,n){var r,i=0,s=e&&e.length||0,a=[];s&&"string"==typeof e&&(e=e.split(""));"string"==typeof t&&(t=cache[t]||buildFn(t));if(n)for(;i<s;++i)r=e[i],t.call(n,r,i,e)&&a.push(r);else for(;i<s;++i)r=e[i],t(r,i,e)&&a.push(r);return a}(n,e),i=t&&t.sort;if(i&&r.sort("function"==typeof i?i:function(e,t){for(var n,r=0;n=i[r];r++){var s=e[n.attribute],a=t[n.attribute];if(s=null!=s?s.valueOf():s,a=null!=a?a.valueOf():a,s!=a)return!!n.descending==(null==s||s>a)?-1:1}return 0}),t&&(t.start||t.count)){var s=r.length;(r=r.slice(t.start||0,(t.start||0)+(t.count||1/0))).total=s}return r}return r.matches=e,r},idProperty:"id",get:function(e){return this.data[this.index[e]]},getIdentity:function(e){return e[this.idProperty]},put:function(e,t){var n=this.data,r=this.index,i=this.idProperty,s=e[i]=t&&"id"in t?t.id:i in e?e[i]:Math.random();if(s in r){if(t&&!1===t.overwrite)throw new Error("Object already exists");n[r[s]]=e}else r[s]=n.push(e)-1;return s},add:function(e,t){return(t=t||{}).overwrite=!1,this.put(e,t)},remove:function(e){var t=this.index,n=this.data;if(e in t)return n.splice(t[e],1),this.setData(n),!0},query:function(e,n){return t(this.queryEngine(e,n)(this.data))},setData:function(e){e.items?(this.idProperty=e.identifier||this.idProperty,e=this.data=e.items):this.data=e,this.index={};for(var t=0,n=e.length;t<n;t++)this.index[e[t][this.idProperty]]=t},init:function(e){for(var t in e)this[t]=e[t];this.setData(this.data||[])}});return n}),define("skylark-langx-aspect/aspect",["skylark-langx-ns"],function(e){var t,n=0;function r(e){return function(r,i,s,a){var o,l=r[i];l&&l.target==r||(r[i]=o=function(){for(var e=n,r=arguments,i=o.before;i;)r=i.advice.apply(this,r)||r,i=i.next;if(o.around)var s=o.around.advice(this,r);for(var a=o.after;a&&a.id<e;){if(a.receiveArguments){var l=a.advice.apply(this,r);s=l===t?s:l}else s=a.advice.call(this,s,r);a=a.next}return s},l&&(o.around={advice:function(e,t){return l.apply(e,t)}}),o.target=r);var u=function(e,t,r,i){var s,a=e[t],o="around"==t;if(o){var l=r(function(){return a.advice(this,arguments)});s={remove:function(){l&&(l=e=r=null)},advice:function(e,t){return l?l.apply(e,t):a.advice(e,t)}}}else s={remove:function(){if(s.advice){var n=s.previous,i=s.next;i||n?(n?n.next=i:e[t]=i,i&&(i.previous=n)):delete e[t],e=r=s.advice=null}},id:n++,advice:r,receiveArguments:i};if(a&&!o)if("after"==t){for(;a.next&&(a=a.next););a.next=s,s.previous=a}else"before"==t&&(e[t]=s,s.next=a,a.previous=s);else e[t]=s;return s}(o||l,e,s,a);return s=null,u}}return e.attach("langx.aspect",{after:r("after"),around:r("around"),before:r("before")})}),define("skylark-langx-aspect/main",["./aspect"],function(e){return e}),define("skylark-langx-aspect",["skylark-langx-aspect/main"],function(e){return e}),define("skylark-langx/aspect",["skylark-langx-aspect"],function(e){return e}),define("skylark-langx-async/async",["skylark-langx-ns"],function(e){return e.attach("langx.async")}),define(["skylark-langx-arrays","skylark-langx-funcs","skylark-langx-objects","./async"],function(e,t,n,r){"use strict";var i=Array.prototype.slice,s=t.proxy,a=e.makeArray,o=n.result,l=n.mixin;l(Promise.prototype,{always:function(e){return this.then(e,e),this},done:function(){for(var e=0;e<arguments.length;e++)this.then(arguments[e]);return this},fail:function(e){return define(["skylark-langx-arrays","skylark-langx-funcs","skylark-langx-objects"],function(e,t,n){var r=Array.prototype.slice,i=t.proxy,s=e.makeArray,a=n.result,o=n.mixin;o(Promise.prototype,{always:function(e){return this.then(e,e),this},done:function(){for(var e=0;e<arguments.length;e++)this.then(arguments[e]);return this},fail:function(e){return this.catch(e),this}});var l=function(){var e=this;this.promise=u(new Promise(function(t,n){e._resolve=t,e._reject=n}))};function u(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,i=e.then(function(e){return r=!0,t=!1,e},function(e){throw n=!0,t=!1,e});i.isResolved=function(){return r},i.isPending=function(){return t},i.isRejected=function(){return n},i.state=function(){return r?"resolved":n?"rejected":"pending"};var s=[],a=[];return i.then=function(e,t,n){return n&&this.progress(n),u(Promise.prototype.then.call(this,e&&function(t){return t&&void 0!==t.__ctx__?e.apply(t.__ctx__,t):e(t)},t&&function(e){return e&&void 0!==e.__ctx__?t.apply(e.__ctx__,e):t(e)}))},i.progress=function(e){return s.forEach(function(t){e(t)}),a.push(e),this},i.pipe=i.then,i.notify=function(e){try{return s.push(e),a.forEach(function(t){return t(e)})}catch(e){this.reject(e)}return this},i.notifyWith=function(e,t){try{return s.push(t),a.forEach(function(n){return n.call(e,t)})}catch(e){this.reject(e)}return this},i}return l.prototype.resolve=function(e){var t=r.call(arguments);return this.resolveWith(null,t)},l.prototype.resolveWith=function(e,t){return(t=t?s(t):[]).__ctx__=e,this._resolve(t),this._resolved=!0,this},l.prototype.notify=function(e){var t=a(this,"promise");return t.notify(e),this},l.prototype.reject=function(e){var t=r.call(arguments);return this.rejectWith(null,t)},l.prototype.rejectWith=function(e,t){return(t=t?s(t):[]).__ctx__=e,this._reject(t),this._rejected=!0,this},l.prototype.isResolved=function(){var e=a(this,"promise");return e.isResolved()},l.prototype.isRejected=function(){var e=a(this,"promise");return e.isRejected()},l.prototype.state=function(){var e=a(this,"promise");return e.state()},l.prototype.then=function(e,t,n){var r=a(this,"promise");return r.then(e,t,n)},l.prototype.progress=function(e){var t=a(this,"promise");return t.progress(e)},l.prototype.catch=function(e){var t=a(this,"promise");return t.catch(e)},l.prototype.always=function(){var e=a(this,"promise");return e.always.apply(e,arguments),this},l.prototype.done=function(){var e=a(this,"promise");return e.done.apply(e,arguments),this},l.prototype.fail=function(e){var t=a(this,"promise");return t.fail(e),this},l.all=function(e){var t=new l;return Promise.all(e).then(t.resolve.bind(t),t.reject.bind(t)),a(t,"promise")},l.first=function(e){return u(Promise.race(e))},l.when=function(e,t,n,r){var s=e&&"function"==typeof e.then,a=s&&e instanceof Promise;if(!s)return arguments.length>1?t?t(e):e:(new l).resolve(e);if(!a){var o=new l(e.cancel);e.then(i(o.resolve,o),i(o.reject,o),o.notify),e=o.promise}return t||n||r?e.then(t,n,r):e},l.reject=function(e){var t=new l;return t.reject(e),t.promise},l.immediate=l.resolve=function(e){var t=new l;return t.resolve.apply(t,arguments),t.promise},l.promise=function(e){var t=new l;return e(t.resolve.bind(t),t.reject.bind(t),t.progress.bind(t)),t.promise},l}),this.catch(e),this}});var u=function(){var e=this;this.promise=c(new Promise(function(t,n){e._resolve=t,e._reject=n}))};function c(e){if(e.isResolved)return e;var t=!0,n=!1,r=!1,i=e.then(function(e){return r=!0,t=!1,e},function(e){throw n=!0,t=!1,e});i.isResolved=function(){return r},i.isPending=function(){return t},i.isRejected=function(){return n},i.state=function(){return r?"resolved":n?"rejected":"pending"};var s=[],a=[];return i.then=function(e,t,n){return n&&this.progress(n),c(Promise.prototype.then.call(this,e&&function(t){return t&&void 0!==t.__ctx__?e.apply(t.__ctx__,t):e(t)},t&&function(e){return e&&void 0!==e.__ctx__?t.apply(e.__ctx__,e):t(e)}))},i.progress=function(e){return s.forEach(function(t){e(t)}),a.push(e),this},i.pipe=i.then,i.notify=function(e){try{return s.push(e),a.forEach(function(t){return t(e)})}catch(e){this.reject(e)}return this},i}return u.prototype.resolve=function(e){var t=i.call(arguments);return this.resolveWith(null,t)},u.prototype.resolveWith=function(e,t){return(t=t?a(t):[]).__ctx__=e,this._resolve(t),this._resolved=!0,this},u.prototype.notify=function(e){var t=o(this,"promise");return t.notify(e),this},u.prototype.reject=function(e){var t=i.call(arguments);return this.rejectWith(null,t)},u.prototype.rejectWith=function(e,t){return(t=t?a(t):[]).__ctx__=e,this._reject(t),this._rejected=!0,this},u.prototype.isResolved=function(){var e=o(this,"promise");return e.isResolved()},u.prototype.isRejected=function(){var e=o(this,"promise");return e.isRejected()},u.prototype.state=function(){var e=o(this,"promise");return e.state()},u.prototype.then=function(e,t,n){var r=o(this,"promise");return r.then(e,t,n)},u.prototype.progress=function(e){var t=o(this,"promise");return t.progress(e)},u.prototype.catch=function(e){var t=o(this,"promise");return t.catch(e)},u.prototype.always=function(){var e=o(this,"promise");return e.always.apply(e,arguments),this},u.prototype.done=function(){var e=o(this,"promise");return e.done.apply(e,arguments),this},u.prototype.fail=function(e){var t=o(this,"promise");return t.fail(e),this},u.all=function(e){var t=new u;return Promise.all(e).then(t.resolve.bind(t),t.reject.bind(t)),o(t,"promise")},u.first=function(e){return c(Promise.race(e))},u.when=function(e,t,n,r){var i=e&&"function"==typeof e.then,a=i&&e instanceof Promise;if(!i)return arguments.length>1?t?t(e):e:(new u).resolve(e);if(!a){var o=new u(e.cancel);e.then(s(o.resolve,o),s(o.reject,o),o.notify),e=o.promise}return t||n||r?e.then(t,n,r):e},u.reject=function(e){var t=new u;return t.reject(e),t.promise},u.immediate=u.resolve=function(e){var t=new u;return t.resolve.apply(t,arguments),t.promise},u.promise=function(e){var t=new u;return e(t.resolve.bind(t),t.reject.bind(t),t.progress.bind(t)),t.promise},r.Deferred=u}),define("skylark-langx-async/each",["./async"],function(e){return e.each=function(e,t,n){if(0===e.length)return n(void 0,e);var r=new Array(e.length),i=0,s=!1;e.forEach(function(a,o){t(a,function(t,a){if(!s)return t?(s=!0,n(t)):(r[o]=a,(i+=1)===e.length?n(void 0,r):void 0)})})}}),define("skylark-langx-async/parallel",["skylark-langx-objects","./async","./deferred"],function(e,t,n){return t.parallel=function(t,r,i){var s=[];return i=i||null,r=r||[],e.each(t,function(e,t){s.push(t.apply(i,r))}),n.all(s)}}),define("skylark-langx-async/series",["skylark-langx-objects","./async","./deferred"],function(e,t,n){return t.series=function(t,r,i){var s=[],a=new n,o=a.promise;return i=i||null,r=r||[],a.resolve(),e.each(t,function(e,t){o=o.then(function(){return t.apply(i,r)}),s.push(o)}),n.all(s)}}),define("skylark-langx-async/waterful",["skylark-langx-objects","./async","./deferred"],function(e,t,n){return t.waterful=function(t,r,i){var s=new n,a=s.promise;return i=i||null,r=r||[],s.resolveWith(i,r),e.each(t,function(e,t){a=a.then(t)}),a}}),define("skylark-langx-async/main",["./async","./deferred","./each","./parallel","./series","./waterful"],function(e){return e}),define("skylark-langx-async",["skylark-langx-async/main"],function(e){return e}),define("skylark-langx/async",["skylark-langx-async"],function(e){return e}),define("skylark-langx-binary/binary",["skylark-langx-ns"],function(e){"use strict";return e.attach("langx.binary",{fromBase64:function(e){for(var t,n,r,i,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=e.length/4*3,o=new ArrayBuffer(a),l=new Uint8Array(o),u=0,c=0;u<a;u+=3)t=s.indexOf(e.charAt(c++)),n=s.indexOf(e.charAt(c++)),r=s.indexOf(e.charAt(c++)),i=s.indexOf(e.charAt(c++)),l[u]=t<<2|n>>4,64!==r&&(l[u+1]=(15&n)<<4|r>>2),64!==i&&(l[u+2]=(3&r)<<6|i);return o},fromBinaryString:function(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n},fromBuffer:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e[r];return t},readInt8:function(e,t){return e[t]<<24>>24},readUint16:function(e,t){return e[t]<<8|e[t+1]},readUint32:function(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}})}),define("skylark-langx-binary/base64",[],function(){"use strict";for(var exports={byteLength:function(e){var t=a(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var r,i,s=a(e),o=s[0],l=s[1],u=new n(function(e,t,n){return 3*(t+n)/4-n}(0,o,l)),c=0,f=l>0?o-4:o;for(i=0;i<f;i+=4)r=t[e.charCodeAt(i)]<<18|t[e.charCodeAt(i+1)]<<12|t[e.charCodeAt(i+2)]<<6|t[e.charCodeAt(i+3)],u[c++]=r>>16&255,u[c++]=r>>8&255,u[c++]=255&r;2===l&&(r=t[e.charCodeAt(i)]<<2|t[e.charCodeAt(i+1)]>>4,u[c++]=255&r);1===l&&(r=t[e.charCodeAt(i)]<<10|t[e.charCodeAt(i+1)]<<4|t[e.charCodeAt(i+2)]>>2,u[c++]=r>>8&255,u[c++]=255&r);return u},fromByteArray:function(t){for(var n,r=t.length,i=r%3,s=[],a=0,l=r-i;a<l;a+=16383)s.push(o(t,a,a+16383>l?l:a+16383));1===i?(n=t[r-1],s.push(e[n>>2]+e[n<<4&63]+"==")):2===i&&(n=(t[r-2]<<8)+t[r-1],s.push(e[n>>10]+e[n>>4&63]+e[n<<2&63]+"="));return s.join("")}},e=[],t=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function o(t,n,r){for(var i,s,a=[],o=n;o<r;o+=3)i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),a.push(e[(s=i)>>18&63]+e[s>>12&63]+e[s>>6&63]+e[63&s]);return a.join("")}return t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63,exports}),define("skylark-langx-binary/ieee754",[],function(){"use strict";var exports={read:function(e,t,n,r,i){var s,a,o=8*i-r-1,l=(1<<o)-1,u=l>>1,c=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,s=d&(1<<-c)-1,d>>=-c,c+=o;c>0;s=256*s+e[t+f],f+=h,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===s)s=1-u;else{if(s===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),s-=u}return(d?-1:1)*a*Math.pow(2,s-r)},write:function(e,t,n,r,i,s){var a,o,l,u=8*s-i-1,c=(1<<u)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:s-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+f>=1?h/l:h*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=c?(o=0,a=c):a+f>=1?(o=(t*l-1)*Math.pow(2,i),a+=f):(o=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&o,d+=p,o/=256,i-=8);for(a=a<<i|o,u+=i;u>0;e[n+d]=255&a,d+=p,a/=256,u-=8);e[n+d-p]|=128*m}};return exports}),define("skylark-langx-binary/buffer",["./binary","./base64","./ieee754"],function(e,t,n){"use strict";s.INSPECT_MAX_BYTES=50;var r=2147483647;function i(e){if(e>r)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=s.prototype,t}function s(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return l(e)}return a(e,t,n)}function a(e,t,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return F(e)||e&&F(e.buffer)?function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n);return r.__proto__=s.prototype,r}(e,t,n):"string"==typeof e?function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=i(n),a=r.write(e,t);a!==n&&(r=r.slice(0,a));return r}(e,t):function(e){if(s.isBuffer(e)){var t=0|c(e.length),n=i(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(e){if(ArrayBuffer.isView(e)||"length"in e)return"number"!=typeof e.length||D(e.length)?i(0):u(e);if("Buffer"===e.type&&Array.isArray(e.data))return u(e.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e){return o(e),i(e<0?0:0|c(e))}function u(e){for(var t=e.length<0?0:0|c(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function c(e){if(e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function f(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||F(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return N(e).length;t=(""+t).toLowerCase(),r=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function d(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),D(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:p(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):p(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function p(e,t,n,r,i){var s,a=1,o=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,o/=2,l/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(s=n;s<o;s++)if(u(e,s)===u(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*a}else-1!==c&&(s-=s-c),c=-1}else for(n+l>o&&(n=o-l),s=n;s>=0;s--){for(var f=!0,h=0;h<l;h++)if(u(e,s+h)!==u(t,h)){f=!1;break}if(f)return s}return-1}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var s=t.length;r>s/2&&(r=s/2);for(var a=0;a<r;++a){var o=parseInt(t.substr(2*a,2),16);if(D(o))return a;e[n+a]=o}return a}function y(e,t,n,r){return L(N(t,e.length-n),e,n,r)}function g(e,t,n,r){return L(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function v(e,t,n,r){return g(e,t,n,r)}function k(e,t,n,r){return L(q(t),e,n,r)}function x(e,t,n,r){return L(function(e,t){for(var n,r,i,s=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,s.push(i),s.push(r);return s}(t,e.length-n),e,n,r)}function b(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function w(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var s,a,o,l,u=e[i],c=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=n)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(s=e[i+1]))&&(l=(31&u)<<6|63&s)>127&&(c=l);break;case 3:s=e[i+1],a=e[i+2],128==(192&s)&&128==(192&a)&&(l=(15&u)<<12|(63&s)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:s=e[i+1],a=e[i+2],o=e[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&(l=(15&u)<<18|(63&s)<<12|(63&a)<<6|63&o)>65535&&l<1114112&&(c=l)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=_)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=_));return n}(r)}s.kMaxLength=r,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{get:function(){if(this instanceof s)return this.buffer}}),Object.defineProperty(s.prototype,"offset",{get:function(){if(this instanceof s)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192,s.from=function(e,t,n){return a(e,t,n)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,s.alloc=function(e,t,n){return function(e,t,n){if(o(e),e<=0)return i(e);if(void 0!==t)return"string"==typeof n?i(e).fill(t,n):i(e).fill(t);return i(e)}(e,t,n)},s.allocUnsafe=function(e){return l(e)},s.allocUnsafeSlow=function(e){return l(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(ArrayBuffer.isView(a)&&(a=s.from(a)),!s.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},s.byteLength=f,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?w(this,0,e):function(e,t,n){var r=!1;(void 0===t||t<0)&&(t=0);if(t>this.length)return"";(void 0===n||n>this.length)&&(n=this.length);if(n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";e||(e="utf8");for(;;)switch(e){case"hex":return S(this,t,n);case"utf8":case"utf-8":return w(this,t,n);case"ascii":return E(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return b(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=s.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,i){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,o=n-t,l=Math.min(a,o),u=this.slice(r,i),c=e.slice(t,n),f=0;f<l;++f)if(u[f]!==c[f]){a=u[f],o=c[f];break}return a<o?-1:o<a?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return d(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return d(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":return g(this,e,t,n);case"latin1":case"binary":return v(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _=4096;function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function S(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",s=t;s<n;++s)i+=I(e[s]);return i}function M(e,t,n){for(var r=e.slice(t,n),i="",s=0;s<r.length;s+=2)i+=String.fromCharCode(r[s]+256*r[s+1]);return i}function j(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,n,r,i,a){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function A(e,t,n,r,i,s){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,r,i,s){return t=+t,r>>>=0,s||A(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),n.write(e,t,r,i,23,4),r+4}function P(e,t,r,i,s){return t=+t,r>>>=0,s||A(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),n.write(e,t,r,i,52,8),r+8}s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=s.prototype,r},s.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r},s.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||j(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=this[e],i=1,s=0;++s<t&&(i*=256);)r+=this[e+s]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||j(e,t,this.length);for(var r=t,i=1,s=this[e+--r];r>0&&(i*=256);)s+=this[e+--r]*i;return s>=(i*=128)&&(s-=Math.pow(2,8*t)),s},s.prototype.readInt8=function(e,t){return e>>>=0,t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){e>>>=0,t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||j(e,4,this.length),n.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||j(e,4,this.length),n.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||j(e,8,this.length),n.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||j(e,8,this.length),n.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;T(this,e,t,n,i,0)}var s=1,a=0;for(this[t]=255&e;++a<n&&(s*=256);)this[t+a]=e/s&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){var i=Math.pow(2,8*n)-1;T(this,e,t,n,i,0)}var s=n-1,a=1;for(this[t+s]=255&e;--s>=0&&(a*=256);)this[t+s]=e/a&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);T(this,e,t,n,i-1,-i)}var s=0,a=1,o=0;for(this[t]=255&e;++s<n&&(a*=256);)e<0&&0===o&&0!==this[t+s-1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);T(this,e,t,n,i-1,-i)}var s=n-1,a=1,o=0;for(this[t+s]=255&e;--s>=0&&(a*=256);)e<0&&0===o&&0!==this[t+s+1]&&(o=1),this[t+s]=(e/a>>0)-o&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return P(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return P(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var a=i-1;a>=0;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=s.isBuffer(e)?e:new s(e,r),l=o.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%l]}return this};var O=/[^+/0-9A-Za-z-_]/g;function I(e){return e<16?"0"+e.toString(16):e.toString(16)}function N(e,t){var n;t=t||1/0;for(var r=e.length,i=null,s=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&s.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&s.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;s.push(n)}else if(n<2048){if((t-=2)<0)break;s.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;s.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return s}function q(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function F(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function D(e){return e!=e}return e.Buffer=s}),define("skylark-langx-binary/main",["./binary","./buffer"],function(e){return e}),define("skylark-langx-binary",["skylark-langx-binary/main"],function(e){return e}),define("skylark-langx/binary",["skylark-langx-binary"],function(e){return e}),define("skylark-langx-chars/chars",["skylark-langx-ns","skylark-langx-types"],function(e,t){return e.attach("langx.chars",{isWhiteSpace:function(e){return 32===e||9===e||13===e||10===e}})}),define("skylark-langx-chars/main",["./chars"],function(e){return e}),define("skylark-langx-chars",["skylark-langx-chars/main"],function(e){return e}),define("skylark-langx/chars",["skylark-langx-chars"],function(e){return e}),define("skylark-langx/constructs",["skylark-langx-constructs"],function(e){return e}),define("skylark-langx-datetimes/datetimes",["skylark-langx-ns"],function(e){return e.attach("langx.datetimes",{parseMilliSeconds:function(e){var t=e.split(" "),n=parseInt(t[0]);if(isNaN(n))return 0;switch(t[1].trim().replace(/\./g,"")){case"minutes":case"minute":case"min":case"mm":case"m":return 6e4*n;case"hours":case"hour":case"HH":case"hh":case"h":case"H":return 36e5*n;case"seconds":case"second":case"sec":case"ss":case"s":return 1e3*n;case"days":case"day":case"DD":case"dd":case"d":return 864e5*n;case"months":case"month":case"MM":case"M":return 24192e5*n;case"weeks":case"week":case"W":case"w":return 6048e5*n;case"years":case"year":case"yyyy":case"yy":case"y":return 31536e6*n;default:return 0}}})}),define("skylark-langx-datetimes/to_date",["skylark-langx-types","./datetimes"],function(e,t){let n;return t.toDate=function(t){if(!t||!e.isString(t))return null;n||(n=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const r=n.exec(t);if(!r)return null;const i=parseInt(r[1],10);let s=parseInt(r[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(r[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(r[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(r[5],10);l=l>=0&&l<=59?l:0;let u=parseInt(r[6],10);u=u>=0&&u<=59?u:0;const c=r[7]||"Z";let f=parseInt(r[8],10);f=f>=0&&f<=23?f:0;let h=parseInt(r[9],10)||0;h=h>=0&&h<=59?h:0,"-"===c?(o+=f,l+=h):"+"===c&&(o-=f,l-=h);return new Date(Date.UTC(i,s,a,o,l,u))}}),define("skylark-langx-datetimes/main",["./datetimes","./to_date"],function(e){return e}),define("skylark-langx-datetimes",["skylark-langx-datetimes/main"],function(e){return e}),define("skylark-langx/datetimes",["skylark-langx-datetimes"],function(e){return e}),define("skylark-langx/deferred",["skylark-langx-async"],function(e){return e.Deferred}),define("skylark-langx-events/events",["skylark-langx-ns"],function(e){return e.attach("langx.events",{})}),define("skylark-langx-hoster/hoster",["skylark-langx-ns"],function(e){var t={isBrowser:!0,isNode:null,global:this,browser:null,node:null};"object"==typeof process&&process.versions&&process.versions.node&&process.versions.v8&&(t.isNode=!0,t.isBrowser=!1),t.global=function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}();var n=null;if(Object.defineProperty(t,"document",function(){if(!n){var e="undefined"==typeof window?require("html-element"):window;n=e.document}return n}),void 0===t.global.CustomEvent&&(t.global.CustomEvent=function(e,t){this.type=e,this.props=t}),t.isBrowser){var r=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}(navigator.userAgent),i=t.browser={};r.browser&&(i[r.browser]=!0,i.version=r.version),i.chrome?i.webkit=!0:i.webkit&&(i.safari=!0)}return t.detects={},e.attach("langx.hoster",t)}),define("skylark-langx-hoster/detects/mobile",["../hoster"],function(e){var t=/iPhone/i,n=/iPod/i,r=/iPad/i,i=/\biOS-universal(?:.+)Mac\b/i,s=/\bAndroid(?:.+)Mobile\b/i,a=/Android/i,o=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,l=/Silk/i,u=/Windows Phone/i,c=/\bWindows(?:.+)ARM\b/i,f=/BlackBerry/i,h=/BB10/i,d=/Opera Mini/i,p=/\b(CriOS|Chrome)(?:.+)Mobile/i,m=/Mobile(?:.+)Firefox\b/i,y=function(e){return void 0!==e&&"MacIntel"===e.platform&&"number"==typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"==typeof MSStream};return e.detects.mobile=function(e){var g={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"==typeof navigator?"string"==typeof e?g.userAgent=e:e&&e.userAgent&&(g={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):g={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var v=g.userAgent,k=v.split("[FBAN");void 0!==k[1]&&(v=k[0]);void 0!==(k=v.split("Twitter"))[1]&&(v=k[0]);var x=function(e){return function(t){return t.test(e)}}(v),b={apple:{phone:x(t)&&!x(u),ipod:x(n),tablet:!x(t)&&(x(r)||y(g))&&!x(u),universal:x(i),device:(x(t)||x(n)||x(r)||x(i)||y(g))&&!x(u)},amazon:{phone:x(o),tablet:!x(o)&&x(l),device:x(o)||x(l)},android:{phone:!x(u)&&x(o)||!x(u)&&x(s),tablet:!x(u)&&!x(o)&&!x(s)&&(x(l)||x(a)),device:!x(u)&&(x(o)||x(l)||x(s)||x(a))||x(/\bokhttp\b/i)},windows:{phone:x(u),tablet:x(c),device:x(u)||x(c)},other:{blackberry:x(f),blackberry10:x(h),opera:x(d),firefox:x(m),chrome:x(p),device:x(f)||x(h)||x(d)||x(m)||x(p)},any:!1,phone:!1,tablet:!1};return b.any=b.apple.device||b.android.device||b.windows.device||b.other.device,b.phone=b.apple.phone||b.android.phone||b.windows.phone,b.tablet=b.apple.tablet||b.android.tablet||b.windows.tablet,b}}),define("skylark-langx-hoster/is-mobile",["./hoster","./detects/mobile"],function(e,t){return void 0==e.isMobile&&(e.isMobile=t()),e.isMobile}),define("skylark-langx-hoster/main",["./hoster","./is-mobile"],function(e){return e}),define("skylark-langx-hoster",["skylark-langx-hoster/main"],function(e){return e}),define("skylark-langx-events/event",["skylark-langx-objects","skylark-langx-funcs","skylark-langx-klass","skylark-langx-hoster","./events"],function(e,t,n,r){var i={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function s(n,r){return!r&&n.isDefaultPrevented||(r||(r=n),e.each(i,function(e,i){var s=r[e];n[e]=function(){return this[i]=t.returnTrue,s&&s.apply(r,arguments)},n[i]=t.returnFalse})),n}class a extends CustomEvent{constructor(t,n){super(t,n),e.safeMixin(this,n),s(this)}}return a.compatible=s,r.Event=a}),define("skylark-langx-events/listener",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./event"],function(e,t,n,r,i,s){Array.prototype.slice;var a=n.compact,o=(e.isDefined,e.isUndefined),l=(e.isPlainObject,e.isFunction,e.isBoolean),u=e.isString,c=e.isEmptyObject,f=(t.mixin,t.safeMixin,r({listenTo:function(t,n,r,i,s){if(!t)return this;if(e.isPlainObject(n)){e.isBoolean(r)?(s=r,r=null):e.isBoolean(i)&&(s=i);var a=n;for(var c in a){var f=c.match(/^([\w:-]*)\s*(.*)$/),h=f[1],d=f[2]||r;d?this.listenTo(t,h,d,a[c],s):this.listenTo(t,h,a[c],s)}return this}l(i)?(s=i,i=r,r=null):l(r)?(s=r,i=r=null):o(i)&&(s=!1,i=r,r=null),i||(i="handleEvent"),u(i)&&(i=this[i]);var p=this.ensureListenedEmitter(t);s?r?p.one(n,r,i,this):p.one(n,i,this):r?p.on(n,r,i,this):p.on(n,i,this);for(var m,y=this._listeningTo||(this._listeningTo=[]),g=0;g<y.length;g++)if(y[g].obj==t){m=y[g];break}m||y.push(m={obj:t,events:{}});var v=m.events,k=v[n]=v[n]||[];return-1==k.indexOf(i)&&k.push(i),this},listenToOnce:function(e,t,n,r){return this.listenTo(e,t,n,r,1)},unlistenTo:function(e,t,n){var r=this._listeningTo;if(!r)return this;u(n)&&(n=this[n]);for(var i=0;i<r.length;i++){var s=r[i];if(!e||e==s.obj){var o=s.events;for(var l in o)if(!t||t==l){var f=o[l];if(f){for(var h=0;h<f.length;h++)if(!n||n==f[i]){let e=this.ensureListenedEmitter(s.obj);e.off(l,f[i],this),f[i]=null}f=o[l]=a(f),c(f)&&(o[l]=null)}}c(o)&&(r[i]=null)}}return r=this._listeningTo=a(r),c(r)&&(this._listeningTo=null),this},ensureListenedEmitter:function(e){return e}}));return i.Listener=f}),define("skylark-langx-events/emitter",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./event","./listener"],function(e,t,n,r,i,s,a){var o=Array.prototype.slice,l=n.compact,u=e.isDefined,c=e.isPlainObject,f=e.isFunction,h=e.isString,d=(e.isEmptyObject,t.mixin);t.safeMixin;function p(e){var t=(""+e).split(".");return{name:t[0],ns:t.slice(1).join(" ")}}var m=new Map,y=a.inherit({_prepareArgs:function(e,t){return t=u(t)?[e].concat(t):[e]},on:function(e,t,n,r,i,s){var a=this,o=this._hub||(this._hub={});if(c(e))return i=r,each(e,function(e,r){a.on(e,t,n,r,i,s)}),this;if(h(t)||f(r)||(i=r,r=n,n=t,t=void 0),f(n)&&(i=r,r=n,n=null),!r)throw new Error("No callback function");if(!f(r))throw new Error("The callback  is not afunction");return h(e)&&(e=e.split(/\s/)),e.forEach(function(e){var a=p(e),l=a.name,u=a.ns;(o[l]||(o[l]=[])).push({fn:r,selector:t,data:n,ctx:i,ns:u,one:s})}),this},one:function(e,t,n,r,i){return this.on(e,t,n,r,i,1)},emit:function(e){if(!this._hub)return this;var t=this;h(e)&&(e=new s(e)),Object.defineProperty(e,"target",{value:this});var n=o.call(arguments,1);return n=this._prepareArgs(e,n),[e.type||e.name,"all"].forEach(function(r){var i=p(r),s=i.name,a=i.ns,o=t._hub[s];if(o){for(var u=o.length,f=!1,h=0;h<u;h++){if(e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())return this;var m=o[h];(!a||m.ns&&m.ns.startsWith(a))&&(m.data&&(e.data=d({},m.data,e.data)),2==n.length&&c(n[1])&&(e.data=e.data||{},d(e.data,n[1])),m.fn.apply(m.ctx,n),m.one&&(o[h]=null,f=!0))}f&&(t._hub[r]=l(o))}}),this},queueEmit:function(e){const t=e.type||e;let n=m.get(this);n||(n=new Map,m.set(this,n));const r=n.get(t);n.delete(t),window.clearTimeout(r);const i=window.setTimeout(()=>{0===n.size&&(n=null,m.delete(this)),this.trigger(e)},0);n.set(t,i)},listened:function(e){var t=(this._hub||(this._events={}))[e]||[];return t.length>0},off:function(e,t){if(e){var n=this._hub||(this._hub={});return h(e)&&(e=e.split(/\s/)),e.forEach(function(e){var r=p(e),i=r.name,s=r.ns,a=n[i];if(a){var o=[];if(t||s)for(var l=0,u=a.length;l<u;l++)t&&a[l].fn!==t&&a[l].fn._!==t?o.push(a[l]):!s||a[l].ns&&0==a[l].ns.indexOf(s)||o.push(a[l]);o.length?n[i]=o:delete n[i]}}),this}this._hub=null},trigger:function(){return this.emit.apply(this,arguments)},queueTrigger:function(e){return this.queueEmit.apply(this,arguments)}});return i.Emitter=y}),define("skylark-langx-events/create-event",["./events","./event"],function(e,t){return e.createEvent=function(e,n){return new t(e,n)}}),define("skylark-langx-events/main",["./events","./event","./listener","./emitter","./create-event"],function(e){return e}),define("skylark-langx-events",["skylark-langx-events/main"],function(e){return e}),define("skylark-langx/emitter",["skylark-langx-events"],function(e){return e.Emitter}),define("skylark-langx/evented",["./emitter"],function(e){return e}),define("skylark-langx/events",["skylark-langx-events"],function(e){return e}),define("skylark-langx/funcs",["skylark-langx-funcs"],function(e){return e}),define("skylark-langx-globals/globals",["skylark-langx-ns"],function(e){var t=function(){return"undefined"!=typeof global&&"function"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:this}();return e.attach("langx.globals",t)}),define("skylark-langx-globals/console",["./globals"],function(e){return e.console=console}),define("skylark-langx-globals/document",["./globals"],function(e){var t;"undefined"!=typeof global?global:"undefined"!=typeof window&&window;if("undefined"!=typeof document)t=document;else try{t=require("min-document")}catch(e){console.warn("min-document is not finded!",e)}return e.document=t}),define("skylark-langx-globals/window",["./globals"],function(e){var t="undefined"!=typeof window?window:{};return e.window=t}),define("skylark-langx-globals/main",["./globals","./console","./document","./window"],function(e){return e}),define("skylark-langx-globals",["skylark-langx-globals/main"],function(e){return e}),define("skylark-langx/globals",["skylark-langx-globals"],function(e){return e}),define("skylark-langx/hoster",["skylark-langx-hoster"],function(e){return e}),define("skylark-langx-maths/maths",["skylark-langx-ns","skylark-langx-types"],function(e,t){for(var n=[],r=0;r<256;r++)n[r]=(r<16?"0":"")+r.toString(16);var i={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*i.DEG2RAD},radToDeg:function(e){return e*i.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){var s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),u=s((t+r)/2),c=a((t+r)/2),f=s((t-r)/2),h=a((t-r)/2),d=s((r-t)/2),p=a((r-t)/2);"XYX"===i?e.set(o*c,l*f,l*h,o*u):"YZY"===i?e.set(l*h,o*c,l*f,o*u):"ZXZ"===i?e.set(l*f,l*h,o*c,o*u):"XZX"===i?e.set(o*c,l*p,l*d,o*u):"YXY"===i?e.set(l*d,o*c,l*p,o*u):"ZYZ"===i?e.set(l*p,l*d,o*c,o*u):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};return e.attach("langx.maths",i)}),define("skylark-langx-maths/main",["./maths"],function(e){return e}),define("skylark-langx-maths",["skylark-langx-maths/main"],function(e){return e}),define("skylark-langx/maths",["skylark-langx-maths"],function(e){return e}),define("skylark-langx-numerics/numerics",["skylark-langx-ns","skylark-langx-types"],function(e,t){return e.attach("langx.numerics",{toFinite:t.toFinite,toNumber:t.toNumber,toInteger:t.toInteger})}),define("skylark-langx-numerics/maths",["skylark-langx-ns","skylark-langx-types","./numerics"],function(e,t,n){for(var r=[],i=0;i<256;i++)r[i]=(i<16?"0":"")+i.toString(16);var s={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*s.DEG2RAD},radToDeg:function(e){return e*s.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){var s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),u=s((t+r)/2),c=a((t+r)/2),f=s((t-r)/2),h=a((t-r)/2),d=s((r-t)/2),p=a((r-t)/2);"XYX"===i?e.set(o*c,l*f,l*h,o*u):"YZY"===i?e.set(l*h,o*c,l*f,o*u):"ZXZ"===i?e.set(l*f,l*h,o*c,o*u):"XZX"===i?e.set(o*c,l*p,l*d,o*u):"YXY"===i?e.set(l*d,o*c,l*p,o*u):"ZYZ"===i?e.set(l*p,l*d,o*c,o*u):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};return n.maths=s}),define("skylark-langx-numerics/quaternion",["skylark-langx-klass","./numerics","./maths"],function(e,t,n){var r=e({klassName:"Quaternion",x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}},set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("mathsQuaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,s=e.order,a=Math.cos,o=Math.sin,l=a(n/2),u=a(r/2),c=a(i/2),f=o(n/2),h=o(r/2),d=o(i/2);return"XYZ"===s?(this._x=f*u*c+l*h*d,this._y=l*h*c-f*u*d,this._z=l*u*d+f*h*c,this._w=l*u*c-f*h*d):"YXZ"===s?(this._x=f*u*c+l*h*d,this._y=l*h*c-f*u*d,this._z=l*u*d-f*h*c,this._w=l*u*c+f*h*d):"ZXY"===s?(this._x=f*u*c-l*h*d,this._y=l*h*c+f*u*d,this._z=l*u*d+f*h*c,this._w=l*u*c-f*h*d):"ZYX"===s?(this._x=f*u*c-l*h*d,this._y=l*h*c+f*u*d,this._z=l*u*d-f*h*c,this._w=l*u*c+f*h*d):"YZX"===s?(this._x=f*u*c+l*h*d,this._y=l*h*c+f*u*d,this._z=l*u*d-f*h*c,this._w=l*u*c-f*h*d):"XZY"===s&&(this._x=f*u*c-l*h*d,this._y=l*h*c-f*u*d,this._z=l*u*d+f*h*c,this._w=l*u*c+f*h*d),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],s=n[8],a=n[1],o=n[5],l=n[9],u=n[2],c=n[6],f=n[10],h=r+o+f;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=(c-l)*t,this._y=(s-u)*t,this._z=(a-i)*t):r>o&&r>f?(t=2*Math.sqrt(1+r-o-f),this._w=(c-l)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(s+u)/t):o>f?(t=2*Math.sqrt(1+o-r-f),this._w=(s-u)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(l+c)/t):(t=2*Math.sqrt(1+f-r-o),this._w=(a-i)/t,this._x=(s+u)/t,this._y=(l+c)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var n=e.dot(t)+1;return n<1e-6?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(n.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("mathsQuaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,s=e._w,a=t._x,o=t._y,l=t._z,u=t._w;return this._x=n*u+s*a+r*l-i*o,this._y=r*u+s*o+i*a-n*l,this._z=i*u+s*l+n*o-r*a,this._w=s*u-n*a-r*o-i*l,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,s=this._w,a=s*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;var o=1-a*a;if(o<=Number.EPSILON){var l=1-t;return this._w=l*s+t*this._w,this._x=l*n+t*this._x,this._y=l*r+t*this._y,this._z=l*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var u=Math.sqrt(o),c=Math.atan2(u,a),f=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=s*f+this._w*h,this._x=n*f+this._x*h,this._y=r*f+this._y*h,this._z=i*f+this._z*h,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},fromBufferAttribute:function(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){},_construct:function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}});return Object.assign(r,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,s,a){var o=n[r+0],l=n[r+1],u=n[r+2],c=n[r+3],f=i[s+0],h=i[s+1],d=i[s+2],p=i[s+3];if(c!==p||o!==f||l!==h||u!==d){var m=1-a,y=o*f+l*h+u*d+c*p,g=y>=0?1:-1,v=1-y*y;if(v>Number.EPSILON){var k=Math.sqrt(v),x=Math.atan2(k,y*g);m=Math.sin(m*x)/k,a=Math.sin(a*x)/k}var b=a*g;if(o=o*m+f*b,l=l*m+h*b,u=u*m+d*b,c=c*m+p*b,m===1-a){var w=1/Math.sqrt(o*o+l*l+u*u+c*c);o*=w,l*=w,u*=w,c*=w}}e[t]=o,e[t+1]=l,e[t+2]=u,e[t+3]=c}}),Object.assign(r.prototype,{}),t.Quaternion=r}),define("skylark-langx-numerics/vector3",["skylark-langx-klass","./numerics","./maths","./quaternion"],function(e,t,n,r){var i=new r,s=e({klassName:"Vector3",set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("mathsVector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("mathsVector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("mathsVector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("mathsVector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(i.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(i.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*r-a*n,u=o*n+a*t-i*r,c=o*r+i*n-s*t,f=-i*t-s*n-a*r;return this.x=l*o+f*-i+u*-a-c*-s,this.y=u*o+f*-s+c*-i-l*-a,this.z=c*o+f*-a+l*-s-u*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("mathsVector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,s=t.x,a=t.y,o=t.z;return this.x=r*o-i*a,this.y=i*s-n*o,this.z=n*a-r*s,this},projectOnVector:function(e){var t=e.lengthSq();if(0===t)return this.set(0,0,0);var n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)},projectOnPlane:function(e){return a.copy(this).projectOnVector(e),this.sub(a)},reflect:function(e){return this.sub(a.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;var n=this.dot(e)/t;return Math.acos(MathUtils.clamp(n,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,3*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("mathsVector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this},_construct:function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}}),a=new s;return t.Vector3=s}),define("skylark-langx-numerics/matrix4",["skylark-langx-klass","./numerics","./vector3"],function(e,t,n){var r=new n,i=new n(0,0,0),s=new n(1,1,1),a=new n,o=new n,l=new n,u=e({set:function(e,t,n,r,i,s,a,o,l,u,c,f,h,d,p,m){var y=this.elements;return y[0]=e,y[4]=t,y[8]=n,y[12]=r,y[1]=i,y[5]=s,y[9]=a,y[13]=o,y[2]=l,y[6]=u,y[10]=c,y[14]=f,y[3]=h,y[7]=d,y[11]=p,y[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new u).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,n=e.elements,i=1/r.setFromMatrixColumn(e,0).length(),s=1/r.setFromMatrixColumn(e,1).length(),a=1/r.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("mathsMatrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(r),l=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var f=s*u,h=s*c,d=a*u,p=a*c;t[0]=o*u,t[4]=-o*c,t[8]=l,t[1]=h+d*l,t[5]=f-p*l,t[9]=-a*o,t[2]=p-f*l,t[6]=d+h*l,t[10]=s*o}else if("YXZ"===e.order){var m=o*u,y=o*c,g=l*u,v=l*c;t[0]=m+v*a,t[4]=g*a-y,t[8]=s*l,t[1]=s*c,t[5]=s*u,t[9]=-a,t[2]=y*a-g,t[6]=v+m*a,t[10]=s*o}else if("ZXY"===e.order){var m=o*u,y=o*c,g=l*u,v=l*c;t[0]=m-v*a,t[4]=-s*c,t[8]=g+y*a,t[1]=y+g*a,t[5]=s*u,t[9]=v-m*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){var f=s*u,h=s*c,d=a*u,p=a*c;t[0]=o*u,t[4]=d*l-h,t[8]=f*l+p,t[1]=o*c,t[5]=p*l+f,t[9]=h*l-d,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){var k=s*o,x=s*l,b=a*o,w=a*l;t[0]=o*u,t[4]=w-k*c,t[8]=b*c+x,t[1]=c,t[5]=s*u,t[9]=-a*u,t[2]=-l*u,t[6]=x*c+b,t[10]=k-w*c}else if("XZY"===e.order){var k=s*o,x=s*l,b=a*o,w=a*l;t[0]=o*u,t[4]=-c,t[8]=l*u,t[1]=k*c+w,t[5]=s*u,t[9]=x*c-b,t[2]=b*c-x,t[6]=a*u,t[10]=w*c+k}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(i,e,s)},lookAt:function(e,t,n){var r=this.elements;return l.subVectors(e,t),0===l.lengthSq()&&(l.z=1),l.normalize(),a.crossVectors(n,l),0===a.lengthSq()&&(1===Math.abs(n.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),a.crossVectors(n,l)),a.normalize(),o.crossVectors(l,a),r[0]=a.x,r[4]=o.x,r[8]=l.x,r[1]=a.y,r[5]=o.y,r[9]=l.y,r[2]=a.z,r[6]=o.z,r[10]=l.z,this},multiply:function(e,t){return void 0!==t?(console.warn("mathsMatrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],u=n[1],c=n[5],f=n[9],h=n[13],d=n[2],p=n[6],m=n[10],y=n[14],g=n[3],v=n[7],k=n[11],x=n[15],b=r[0],w=r[4],_=r[8],E=r[12],C=r[1],S=r[5],M=r[9],j=r[13],T=r[2],A=r[6],z=r[10],P=r[14],O=r[3],I=r[7],N=r[11],q=r[15];return i[0]=s*b+a*C+o*T+l*O,i[4]=s*w+a*S+o*A+l*I,i[8]=s*_+a*M+o*z+l*N,i[12]=s*E+a*j+o*P+l*q,i[1]=u*b+c*C+f*T+h*O,i[5]=u*w+c*S+f*A+h*I,i[9]=u*_+c*M+f*z+h*N,i[13]=u*E+c*j+f*P+h*q,i[2]=d*b+p*C+m*T+y*O,i[6]=d*w+p*S+m*A+y*I,i[10]=d*_+p*M+m*z+y*N,i[14]=d*E+p*j+m*P+y*q,i[3]=g*b+v*C+k*T+x*O,i[7]=g*w+v*S+k*A+x*I,i[11]=g*_+v*M+k*z+x*N,i[15]=g*E+v*j+k*P+x*q,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],a=e[5],o=e[9],l=e[13],u=e[2],c=e[6],f=e[10],h=e[14],d=e[3],p=e[7],m=e[11],y=e[15];return d*(+i*o*c-r*l*c-i*a*f+n*l*f+r*a*h-n*o*h)+p*(+t*o*h-t*l*f+i*s*f-r*s*h+r*l*u-i*o*u)+m*(+t*l*c-t*a*h-i*s*c+n*s*h+i*a*u-n*l*u)+y*(-r*a*u-t*o*c+t*a*f+r*s*c-n*s*f+n*o*u)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,n){var r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this},getInverse:function(e,t){void 0!==t&&console.warn("mathsMatrix4: .getInverse() can no longer be configured to throw on degenerate.");var n=this.elements,r=e.elements,i=r[0],s=r[1],a=r[2],o=r[3],l=r[4],u=r[5],c=r[6],f=r[7],h=r[8],d=r[9],p=r[10],m=r[11],y=r[12],g=r[13],v=r[14],k=r[15],x=d*v*f-g*p*f+g*c*m-u*v*m-d*c*k+u*p*k,b=y*p*f-h*v*f-y*c*m+l*v*m+h*c*k-l*p*k,w=h*g*f-y*d*f+y*u*m-l*g*m-h*u*k+l*d*k,_=y*d*c-h*g*c-y*u*p+l*g*p+h*u*v-l*d*v,E=i*x+s*b+a*w+o*_;if(0===E)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var C=1/E;return n[0]=x*C,n[1]=(g*p*o-d*v*o-g*a*m+s*v*m+d*a*k-s*p*k)*C,n[2]=(u*v*o-g*c*o+g*a*f-s*v*f-u*a*k+s*c*k)*C,n[3]=(d*c*o-u*p*o-d*a*f+s*p*f+u*a*m-s*c*m)*C,n[4]=b*C,n[5]=(h*v*o-y*p*o+y*a*m-i*v*m-h*a*k+i*p*k)*C,n[6]=(y*c*o-l*v*o-y*a*f+i*v*f+l*a*k-i*c*k)*C,n[7]=(l*p*o-h*c*o+h*a*f-i*p*f-l*a*m+i*c*m)*C,n[8]=w*C,n[9]=(y*d*o-h*g*o-y*s*m+i*g*m+h*s*k-i*d*k)*C,n[10]=(l*g*o-y*u*o+y*s*f-i*g*f-l*s*k+i*u*k)*C,n[11]=(h*u*o-l*d*o-h*s*f+i*d*f+l*s*m-i*u*m)*C,n[12]=_*C,n[13]=(h*g*a-y*d*a+y*s*p-i*g*p-h*s*v+i*d*v)*C,n[14]=(y*u*a-l*g*a-y*s*c+i*g*c+l*s*v-i*u*v)*C,n[15]=(l*d*a-h*u*a+h*s*c-i*d*c-l*s*p+i*u*p)*C,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,a=e.y,o=e.z,l=i*s,u=i*a;return this.set(l*s+n,l*a-r*o,l*o+r*a,0,l*a+r*o,u*a+n,u*o-r*s,0,l*o-r*a,u*o+r*s,i*o*o+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,s=t._y,a=t._z,o=t._w,l=i+i,u=s+s,c=a+a,f=i*l,h=i*u,d=i*c,p=s*u,m=s*c,y=a*c,g=o*l,v=o*u,k=o*c,x=n.x,b=n.y,w=n.z;return r[0]=(1-(p+y))*x,r[1]=(h+k)*x,r[2]=(d-v)*x,r[3]=0,r[4]=(h-k)*b,r[5]=(1-(f+y))*b,r[6]=(m+g)*b,r[7]=0,r[8]=(d+v)*w,r[9]=(m-g)*w,r[10]=(1-(f+p))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:function(e,t,n){var i=this.elements,s=r.set(i[0],i[1],i[2]).length(),a=r.set(i[4],i[5],i[6]).length(),o=r.set(i[8],i[9],i[10]).length(),l=this.determinant();l<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],c.copy(this);var u=1/s,f=1/a,h=1/o;return c.elements[0]*=u,c.elements[1]*=u,c.elements[2]*=u,c.elements[4]*=f,c.elements[5]*=f,c.elements[6]*=f,c.elements[8]*=h,c.elements[9]*=h,c.elements[10]*=h,t.setFromRotationMatrix(c),n.x=s,n.y=a,n.z=o,this},makePerspective:function(e,t,n,r,i,s){void 0===s&&console.warn("mathsMatrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,o=2*i/(t-e),l=2*i/(n-r),u=(t+e)/(t-e),c=(n+r)/(n-r),f=-(s+i)/(s-i),h=-2*s*i/(s-i);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=f,a[14]=h,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,n,r,i,s){var a=this.elements,o=1/(t-e),l=1/(n-r),u=1/(s-i),c=(t+e)*o,f=(n+r)*l,h=(s+i)*u;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-f,a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-h,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e},_construct:function(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("mathsMatrix4: the constructor no longer reads arguments. use .set() instead.")}}),c=new u;return t.Matrix4=u}),define("skylark-langx-numerics/euler",["skylark-langx-klass","./numerics","./maths","./quaternion","./vector3","./matrix4"],function(e,t,n,r,i,s){var a=new s,o=new r,l=e({x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}},isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var i=n.clamp,s=e.elements,a=s[0],o=s[4],l=s[8],u=s[1],c=s[5],f=s[9],h=s[2],d=s[6],p=s[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-f,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,c),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(u,a))):"ZYX"===t?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,c))):"YZX"===t?(this._z=Math.asin(i(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-f,c),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(l,p))):"XZY"===t?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-f,p),this._y=0)):console.warn("skylark-nunustudio/editor/gui/element/RendererCanvasEuler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,n){return a.makeRotationFromQuaternion(e),this.setFromRotationMatrix(a,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return o.setFromEuler(this),this.setFromQuaternion(o,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new i(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){},_construct:function(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||l.DefaultOrder}});return l.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],l.DefaultOrder="XYZ",t.Euler=l}),define("skylark-langx-numerics/matrix3",["skylark-langx-klass","./numerics"],function(e,t){var n=e({klassName:"Matrix3",isMatrix3:!0,set:function(e,t,n,r,i,s,a,o,l){var u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=i,u[5]=o,u[6]=n,u[7]=s,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},extractBasis:function(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],u=n[4],c=n[7],f=n[2],h=n[5],d=n[8],p=r[0],m=r[3],y=r[6],g=r[1],v=r[4],k=r[7],x=r[2],b=r[5],w=r[8];return i[0]=s*p+a*g+o*x,i[3]=s*m+a*v+o*b,i[6]=s*y+a*k+o*w,i[1]=l*p+u*g+c*x,i[4]=l*m+u*v+c*b,i[7]=l*y+u*k+c*w,i[2]=f*p+h*g+d*x,i[5]=f*m+h*v+d*b,i[8]=f*y+h*k+d*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],a=e[5],o=e[6],l=e[7],u=e[8];return t*s*u-t*a*l-n*i*u+n*a*o+r*i*l-r*s*o},getInverse:function(e,t){void 0!==t&&console.warn("mathsMatrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=e.elements,r=this.elements,i=n[0],s=n[1],a=n[2],o=n[3],l=n[4],u=n[5],c=n[6],f=n[7],h=n[8],d=h*l-u*f,p=u*c-h*o,m=f*o-l*c,y=i*d+s*p+a*m;if(0===y)return this.set(0,0,0,0,0,0,0,0,0);var g=1/y;return r[0]=d*g,r[1]=(a*f-h*s)*g,r[2]=(u*s-a*l)*g,r[3]=p*g,r[4]=(h*i-a*c)*g,r[5]=(a*o-u*i)*g,r[6]=m*g,r[7]=(s*c-f*i)*g,r[8]=(l*i-s*o)*g,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,s,a){var o=Math.cos(i),l=Math.sin(i);this.set(n*o,n*l,-n*(o*s+l*a)+s+e,-r*l,r*o,-r*(-l*s+o*a)+a+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],s=r[3],a=r[6],o=r[1],l=r[4],u=r[7];return r[0]=t*i+n*o,r[3]=t*s+n*l,r[6]=t*a+n*u,r[1]=-n*i+t*o,r[4]=-n*s+t*l,r[7]=-n*a+t*u,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e},_construct:function(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("Matrix3: the constructor no longer reads arguments. use .set() instead.")}});return t.Matrix3=n}),define("skylark-langx-numerics/transform",["skylark-langx-klass","./numerics"],function(e,t){var n=e({klassName:"Transform",value:{get:function(){return this._.value}}});return t.Transform=n}),define("skylark-langx-numerics/matrix-transform",["./numerics","./transform"],function(e,t){var n=t.inherit({klassName:"MatrixTransform",value:{get:function(){return this.matrix.clone()}},matrix:{get:function(){return this._.matrix}},clone:function(){},transform:function(e){},transformBounds:function(e){},_construct:function(e){var t=this._={};t.matrix=e}});return e.MatrixTransform=n}),define("skylark-langx-numerics/plane",["skylark-langx-klass","./numerics","./matrix3","./vector3"],function(e,t,n,r){var i=new r,s=new r,a=new n,o=e({klassName:"Plane",set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,n){var r=i.subVectors(n,t).cross(s.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("mathsPlane: .projectPoint() target is now required"),t=new r),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("mathsPlane: .intersectLine() target is now required"),t=new r);var n=e.delta(i),s=this.normal.dot(n);if(0===s)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?void 0:t.copy(n).multiplyScalar(a).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("mathsPlane: .coplanarPoint() target is now required"),e=new r),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var n=t||a.getNormalMatrix(e),r=this.coplanarPoint(i).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant},_construct:function(e,t){this.normal=void 0!==e?e:new r(1,0,0),this.constant=void 0!==t?t:0}});return t.Plane=o}),define("skylark-langx-numerics/rotate-transform",["./numerics","./transform","./matrix-transform"],function(e,t,n){var r=e.RotateTransform=t.inherit({klassName:"RotateTransform",value:{get:function(){return n.rotateAt(this.angle,this.centerX,this.centerY)}},angle:{get:function(){return this._.angle}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(e){},transformBounds:function(e){},init:function(e,t,n){var r=this._={};r.angle=e||0,r.centerX=t||0,r.centerY=n||0}});return r}),define("skylark-langx-numerics/scale-transform",["./numerics","./transform","./matrix-transform"],function(e,t,n){var r=t.inherit({klassName:"ScaleTransform",value:{get:function(){return n.scaleAt(this.scaleX,this.scaleY,this.centerX,this.centerY)}},scaleX:{get:function(){return this._.scaleX}},scaleY:{get:function(){return this._.scaleY}},centerX:{get:function(){return this._.centerX}},centerY:{get:function(){return this._.centerY}},clone:function(){},transform:function(e){},transformBounds:function(e){},_construct:function(e,t,n,r){var i=this._={};i.scaleX=e||1,i.scaleY=t||1,i.centerX=n||0,i.centerY=r||0}});return e.ScaleTransform=r}),define("skylark-langx-numerics/skew-transform",["./numerics","./transform","./matrix-transform"],function(e,t,n){var r=t.inherit({klassName:"SkewTransform",value:{get:function(){return n.scaleAt(this.skewX,this.skewY)}},skewX:{get:function(){return this._.skewX}},skewY:{get:function(){return this._.skewY}},clone:function(){},transform:function(e){},transformBounds:function(e){},_construct:function(e,t){var n=this._={};n.skewX=e||0,n.skewY=t||0}});return e.SkewTransform=r}),define("skylark-langx-numerics/vector2",["skylark-langx-klass","./numerics"],function(e,t){var n=e({klassName:"Vector2",set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(-this.y,-this.x)+Math.PI;return e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this},_construct:function(e,t){this.x=e||0,this.y=t||0}});return t.Vector2=n}),define("skylark-langx-numerics/transform-matrix",["skylark-langx-klass","./numerics","./vector2"],function(e,t,n){var r=Math.PI/180,i={},s=function(e){return i[e]||(i[e]=Math.PI*e/180)},a=e({klassName:"TransformMatrix",_multiplyPoint:function(e){var t=this._,r=e.x*t.m11+e.y*t.m21+t.dx,i=e.x*t.m12+e.y*t.m22+t.dy;return new n(r,i)},m11:{get:function(){return this._.m11}},m12:{get:function(){return this._.m12}},m21:{get:function(){return this._.m21}},m22:{get:function(){return this._.m22}},dx:{get:function(){return this._.dx}},dy:{get:function(){return this._.dy}},alpha:{get:function(){return this._.alpha}},shadow:{get:function(){return this._.shadow}},compositeOperation:{get:function(){return this._.compositeOperation}},multiplyPoint:function(e){return this._multiplyPoint(e)},multiplyRectangle:function(e){if(this.isIdentity())return e.clone();var t=this.multiplyPoint(e.leftTop),n=this.multiplyPoint(e.leftBottom),r=this.multiplyPoint(e.right),i=this.multiplyPoint(e.rightBottom),s=Math.min(t.x,n.x,r.x,i.x),a=Math.min(t.y,n.y,r.y,i.y),o=Math.max(t.x,n.x,r.x,i.x),l=Math.max(t.y,n.y,r.y,i.y);return new Rect(s,a,o-s,l-a)},prepend:function(e,t,n,r,i,s){var a=this.dx;if(1!=e||0!=t||0!=n||1!=r){var o=this.m11,l=this.m21;this.m11=o*e+this.m12*n,this.m12=o*t+this.m12*r,this.m21=l*e+this.m22*n,this.m22=l*t+this.m22*r}return this.dx=a*e+this.dy*n+i,this.dy=a*t+this.dy*r+s,this},append:function(e,t,n,r,i,s){var a=this.m11,o=this.m12,l=this.m21,u=this.m22;return this.m11=e*a+t*l,this.m12=e*o+t*u,this.m21=n*a+r*l,this.m22=n*o+r*u,this.dx=i*a+s*l+this.dx,this.dy=i*o+s*u+this.dy,this},prependMatrix:function(e){return this.prepend(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),this.prependProperties(e.alpha,e.shadow,e.compositeOperation),this},appendMatrix:function(e){return this.append(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),this.appendProperties(e.alpha,e.shadow,e.compositeOperation),this},prependTransform:function(e,t,n,i,s,a,o,l,u){if(s%360)var c=s*r,f=Math.cos(c),h=Math.sin(c);else f=1,h=0;return(l||u)&&(this.dx-=l,this.dy-=u),a||o?(a*=r,o*=r,this.prepend(f*n,h*n,-h*i,f*i,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),e,t)):this.prepend(f*n,h*n,-h*i,f*i,e,t),this},appendTransform:function(e,t,n,i,s,a,o,l,u){if(s%360)var c=s*r,f=Math.cos(c),h=Math.sin(c);else f=1,h=0;return a||o?(a*=r,o*=r,this.append(Math.cos(o),Math.sin(o),-Math.sin(a),Math.cos(a),e,t),this.append(f*n,h*n,-h*i,f*i,0,0)):this.append(f*n,h*n,-h*i,f*i,e,t),(l||u)&&(this.dx-=l*this.m11+u*this.m21,this.dy-=l*this.m12+u*this.m22),this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.m11,i=this.m21,s=this.dx;return this.m11=r*t-this.m12*n,this.m12=r*n+this.m12*t,this.m21=i*t-this.m22*n,this.m22=i*n+this.m22*t,this.dx=s*t-this.dy*n,this.dy=s*n+this.dy*t,this},skew:function(e,t){return e*=r,t*=r,this.append(Math.cos(t),Math.sin(t),-Math.sin(e),Math.cos(e),0,0),this},scale:function(e,t){return this.m11*=e,this.m22*=t,this.dx*=e,this.dy*=t,this},translate:function(e,t){return this.dx+=e,this.dy+=t,this},identity:function(){return this.alpha=this.m11=this.m22=1,this.m12=this.m21=this.dx=this.dy=0,this.shadow=this.compositeOperation=null,this},invert:function(){var e=this.m11,t=this.m12,n=this.m21,r=this.m22,i=this.dx,s=e*r-t*n;return this.m11=r/s,this.m12=-t/s,this.m21=-n/s,this.m22=e/s,this.dx=(n*this.dy-r*i)/s,this.dy=-(e*this.dy-t*i)/s,this},isIdentity:function(){return 0==this.dx&&0==this.dy&&1==this.m11&&0==this.m12&&0==this.m21&&1==this.m22},decompose:function(e){null==e&&(e={}),e.x=this.dx,e.y=this.dy,e.scaleX=Math.sqrt(this.m11*this.m11+this.m12*this.m12),e.scaleY=Math.sqrt(this.m21*this.m21+this.m22*this.m22);var t=Math.atan2(-this.m21,this.m22),n=Math.atan2(this.m12,this.m11);return t==n?(e.rotation=n/r,this.m11<0&&this.m22>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=t/r,e.skewY=n/r),e},reinitialize:function(e,t,n,r,i,s,a,o,l){return this._initialize(e,t,n,r,i,s),this.alpha=a||1,this.shadow=o,this.compositeOperation=l,this},appendProperties:function(e,t,n){return this.alpha*=e,this.shadow=t||this.shadow,this.compositeOperation=n||this.compositeOperation,this},prependProperties:function(e,t,n){return this.alpha*=e,this.shadow=this.shadow||t,this.compositeOperation=this.compositeOperation||n,this},multiply:function(e){var t=this.m11,n=this.m12,r=this.m21,i=this.m22,s=this.dx,a=this.dy,o=e;return this.m11=t*o.m11+r*o.m12,this.m12=n*o.m11+i*o.m12,this.m21=t*o.m21+r*o.m22,this.m22=n*o.m21+i*o.m22,this.dx=t*o.dx+r*o.dy+s,this.dy=n*o.dx+i*o.dy+a,this},clone:function(){var e=this._,t=new a(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);return t.shadow=this.shadow,t.alpha=this.alpha,t.compositeOperation=this.compositeOperation,t},toString:function(){var e=this._;return"[TransformMatrix (m11="+e.m11+" m12="+e.m12+" m21="+e.m21+" m22="+e.m22+" dx="+e.dx+" dy="+e.dy+")]"},_construct:function(e,t,n,r,i,s){var a=this._={};a.m11=e||1,a.m12=t||0,a.m21=n||0,a.m22=r||1,a.dx=i||0,a.dy=s||0}});return Object.assign(a,{translate:function(e,t){return new a(1,0,0,1,e,t)},scale:function(e,t){return new a(e,0,0,t||e,0,0)},rotate:function(e){var t=Math.cos(e),n=Math.sin(e);return new a(t,n,-n,t,0,0)},rotateg:function(e){return this.rotate(s(e))},skewX:function(e){var t=Math.tan(e);return new a(1,0,t,1)},skewXg:function(e){return this.skewX(s(e))},skewY:function(e){var t=Math.tan(e);return new a(1,t,0,1)},skewYg:function(e){return this.skewY(s(e))},reflect:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var n=e*e,r=t*t,i=n+r,s=2*n/i-1,o=2*e*t/i,l=o,u=2*r/i-1;return new a(s,l,o,u)},project:function(e,t){var n=e*e,r=t*t,i=n+r,s=n/i,o=e*t/i;return yx=o,yy=r/i,new a(s,yx,o,yy)},_sandwich:function(e,t,n){return this.translate(t,n).multiply(e).multiply(this.translate(-t,-n))},scaleAt:function(e,t,n,r){switch(arguments.length){case 4:return this._sandwich(this.scale(e,t),n,r);case 3:return"number"==typeof n?this._sandwich(this.scale(e),t,n):this._sandwich(this.scale(e,t),n.x,n.y)}return this._sandwich(this.scale(e),t.x,t.y)},rotateAt:function(e,t,n){return arguments.length>2?this._sandwich(this.rotate(e),t,n):this._sandwich(this.rotate(e),t.x,t.y)},rotategAt:function(e,t,n){return arguments.length>2?this._sandwich(this.rotateg(e),t,n):this._sandwich(this.rotateg(e),t.x,t.y)},skewXAt:function(e,t,n){return arguments.length>2?this._sandwich(this.skewX(e),t,n):this._sandwich(this.skewX(e),t.x,t.y)},skewXgAt:function(e,t,n){return arguments.length>2?this._sandwich(this.skewXg(e),t,n):this._sandwich(this.skewXg(e),t.x,t.y)},skewYAt:function(e,t,n){return arguments.length>2?this._sandwich(this.skewY(e),t,n):this._sandwich(this.skewY(e),t.x,t.y)},skewYgAt:function(e,t,n){return arguments.length>2?this._sandwich(this.skewYg(e),t,n):this._sandwich(this.skewYg(e),t.x,t.y)}}),t.TransformMatrix=a}),define("skylark-langx-numerics/translate-transform",["./numerics","./transform","./matrix-transform"],function(e,t,n,r,i){var s=t.inherit({klassName:"TranslateTransform",value:{get:function(){return n.scaleAt(this.x,this.y)}},x:{get:function(){return this._.x}},y:{get:function(){return this._.y}},clone:function(){},transform:function(e){},transformBounds:function(e){},init:function(e,t){var n=this._;n.x=e||0,n.y=t||0}});return e.TranslateTransform=s}),define("skylark-langx-numerics/vector4",["skylark-langx-klass","./numerics"],function(e,t){var n=e({klassName:"Vector4",set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,s=e.elements,a=s[0],o=s[4],l=s[8],u=s[1],c=s[5],f=s[9],h=s[2],d=s[6],p=s[10];if(Math.abs(o-u)<.01&&Math.abs(l-h)<.01&&Math.abs(f-d)<.01){if(Math.abs(o+u)<.1&&Math.abs(l+h)<.1&&Math.abs(f+d)<.1&&Math.abs(a+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,y=(c+1)/2,g=(p+1)/2,v=(o+u)/4,k=(l+h)/4,x=(f+d)/4;return m>y&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(m),r=v/n,i=k/n):y>g?y<.01?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(y),n=v/r,i=x/r):g<.01?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(g),n=k/i,r=x/i),this.set(n,r,i,t),this}var b=Math.sqrt((d-f)*(d-f)+(l-h)*(l-h)+(u-o)*(u-o));return Math.abs(b)<.001&&(b=1),this.x=(d-f)/b,this.y=(l-h)/b,this.z=(u-o)/b,this.w=Math.acos((a+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this},_construct:function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}});return t.Vector4=n}),define("skylark-langx-numerics/main",["./numerics","./euler","./maths","./matrix3","./matrix4","./matrix-transform","./plane","./quaternion","./rotate-transform","./scale-transform","./skew-transform","./transform","./transform-matrix","./translate-transform","./vector2","./vector3","./vector4"],function(e){return e}),define("skylark-langx-numerics",["skylark-langx-numerics/main"],function(e){return e}),define("skylark-langx/numerics",["skylark-langx-numerics"],function(e){return e}),define("skylark-langx/objects",["skylark-langx-objects"],function(e){return e}),define("skylark-langx-paths/paths",["skylark-langx-ns"],function(e){var t={_makeLong:function(e){return e},_removeDuplicateSeps:function(e){return e=e.replace(this._replaceRegex,this.sep)},sep:"/"};return t._replaceRegex=new RegExp("//+","g"),t.delimiter=":",t.posix=t,t.win32=t,e.attach("langx.paths",t)}),define("skylark-langx-paths/normalize",["./paths"],function(e){return e.normalize=function(t){""===t&&(t=".");for(var n=t.charAt(0)===e.sep,r=(t=e._removeDuplicateSeps(t)).split(e.sep),i=[],s=0;s<r.length;s++){var a=r[s];"."!==a&&(".."===a&&(n||!n&&i.length>0&&".."!==i[0])?i.pop():i.push(a))}if(!n&&i.length<2)switch(i.length){case 1:""===i[0]&&i.unshift(".");break;default:i.push(".")}t=i.join(e.sep),n&&t.charAt(0)!==e.sep&&(t=e.sep+t);return t}}),define("skylark-langx-paths/basename",["./paths","./normalize"],function(e,t){return e.basename=function(n,r){void 0===r&&(r="");if(""===n)return n;var i=(n=t(n)).split(e.sep),s=i[i.length-1];if(""===s&&i.length>1)return i[i.length-2];if(r.length>0){var a=s.substr(s.length-r.length);if(a===r)return s.substr(0,s.length-r.length)}return s}}),define("skylark-langx-paths/dirname",["./paths"],function(e){return e.dirname=function(t){var n=(t=e._removeDuplicateSeps(t)).charAt(0)===e.sep,r=t.split(e.sep);""===r.pop()&&r.length>0&&r.pop();return r.length>1||1===r.length&&!n?r.join(e.sep):n?e.sep:"."}}),define("skylark-langx-paths/extname",["./paths","./normalize"],function(e,t){return e.extname=function(n){var r=(n=t(n)).split(e.sep);""===(n=r.pop())&&r.length>0&&(n=r.pop());if(".."===n)return"";var i=n.lastIndexOf(".");if(-1===i||0===i)return"";return n.substr(i)}}),define("skylark-langx-paths/format",["./paths"],function(e){return e.format=function(t){if(null===t||"object"!=typeof t)throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);if("string"!=typeof(t.root||""))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var n=t.dir?t.dir+e.sep:"",r=t.base||"";return n+r}}),define("skylark-langx-paths/is-absolute",["./paths"],function(e){return e.isAbsolute=function(t){return t.length>0&&t.charAt(0)===e.sep}}),define("skylark-langx-paths/join",["./paths","./normalize"],function(e,t){return e.join=function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];for(var i=[],s=0;s<n.length;s++){var a=n[s];if("string"!=typeof a)throw new TypeError("Invalid argument type to segs.join: "+typeof a);""!==a&&i.push(a)}return t(i.join(e.sep))}}),define("skylark-langx-paths/path",["skylark-langx-types","skylark-langx-constructs","./paths"],function(e,t,n){var r=t.klass({_construct:function(){var t=this._={segments:null,hasLeading:!1,hasTrailing:!1};1==arguments.length&&e.isString(arguments[0])?this._parse(arguments[0]):e.isArray(arguments[0])&&(t.segments=arguments[0],t.hasLeading=arguments[1]||!1,t.hasTrailing=arguments[2]||!1,this._canonicalize())},_canonicalize:function(){for(var e,t=this._.segments,n=0;n<t.length;n++)if("."==t[n]||".."==t[n]){e=!0;break}if(e){for(var r=[],n=0;n<t.length;n++)".."==t[n]?0==r.length?this.hasLeading||r.push(t[n]):".."==r[r.length-1]?r.push(".."):r.pop():"."==t[n]&&1!=t.length||r.push(t[n]);if(r.length==t.length)return;this._.segments=r}},_length:function(e){return this._.segments.length},_parse:function(e){e||(e=".");var t=this._,n=e.split("/");"/"==e.charAt(0)&&(t.hasLeading=!0,n.shift()),"/"==e.charAt(e.length-1)&&(t.hasTrailing=!0,n.pop()),t.segments=n,t.path=e,this._canonicalize()},append:function(t){return e.isString(t)?this.appendPathStr(t):this.appendPath(t)},appendPath:function(e){if(e.isAbsolute())return e;var t=this.segments,n=e.segments,i=t.concat(n),s=new r(i,this.hasLeading,e.hasTrailing);return s},appendPathStr:function(e){return e=new r(e||""),this.appendPath(e)},clone:function(){return new r(this.segments,this.hasLeading,this.hasTrailing)},endsWith:function(e){for(var t=this.segments,n=new r(e).segments;n.length>0&&t.length>0;)if(n.pop()!=t.pop())return!1;return!0},equals:function(e){var t=this._.segments,n=e._.segments;if(t.length!=n.length)return!1;for(var r=0;r<t.length;r++)if(n[r]!=t[r])return!1;return!0},firstSegment:function(e){var t=this._.segments;return t[e||0]},getExtension:function(){var e=this._.extension,t=this._.path;return textension||(e=this._.extension=t.substr(t.lastIndexOf(".")+1)),e},getSegments:function(){return this.segments},getParentPath:function(){var e=this._.parentPath;if(!e){var t=this.segments;t.pop(),e=this._.parentPath=new r(t,this.hasLeading)}return e},getRoot:function(){},isAbsolute:function(){return this.hasLeading},lastSegment:function(){var e=this._.segments;return e[e.length-1]},matchingFirstSegments:function(e){for(var t=this.segments,n=e.segments,r=Math.min(t.length,n.length),i=0,s=0;s<r;s++){if(t[s]!=n[s])return i;i++}return i},normalize:function(){},removeFirstSegments:function(e){var t=this._.segments,n=this._.hasLeading;return hasTrailing=this._.hasTrailing,new r(t.slice(e,t.length),n,hasTrailing)},removeLastSegments:function(e){var t=this._.segments,n=this._.hasLeading;return hasTrailing=this._.hasTrailing,e||(e=1),new r(t.slice(0,t.length-e),n,hasTrailing)},removeMatchingFirstSegments:function(e){var t=this.matchingFirstSegments(e);return this.removeFirstSegments(t)},removeMatchingLastSegments:function(e){var t=this.matchingFirstSegments(anotherPath);return this.removeLastSegments(t)},removeRelative:function(){var e=this.segments;return e.length>0&&"."==e[1]?this.removeFirstSegments(1):this},relativeTo:function(e,t){"string"==typeof e&&(e=new r(e));var n=this.segments;if(this.isAbsolute())return this;var i=e.segments,s=this.matchingFirstSegments(e),a=i.length;t&&(a-=1);var o=a-s,l=o+n.length-s;if(0==l)return r.EMPTY;for(var u=[],c=0;c<o;c++)u.push("..");for(var c=s;c<n.length;c++)u.push(n[c]);return new r(u,!1,this.hasTrailing)},segment:function(e){var t=this._.segments;return t.length<e?null:t[e]},startsWith:function(e){var t=this.matchingFirstSegments(e);return e._length()==t},toString:function(){var e=[],t=this._.segments;this.hasLeading&&e.push("/");for(var n=0;n<t.length;n++)n>0&&e.push("/"),e.push(t[n]);return this.hasTrailing&&e.push("/"),e.join("")},hasLeading:{get:function(){return this._.hasLeading}},hasTrailing:{get:function(){return this._.hasTrailing}}});return r.EMPTY=new r(""),n.Path=r}),define("skylark-langx-paths/resolve",["./paths","./normalize"],function(e,t){return e.resolve=function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];for(var i=[],s=0;s<n.length;s++){var a=n[s];if("string"!=typeof a)throw new TypeError("Invalid argument type to paths.join: "+typeof a);""!==a&&(a.charAt(0)===e.sep&&(i=[]),i.push(a))}var o=t(i.join(e.sep));if(o.length>1&&o.charAt(o.length-1)===e.sep)return o.substr(0,o.length-1);return o}}),define("skylark-langx-paths/relative",["./paths","./resolve"],function(e,t){return e.relative=function(n,r){var i;n=t(n),r=t(r);var s=n.split(e.sep),a=r.split(e.sep);a.shift(),s.shift();var o=0,l=[];for(i=0;i<s.length;i++){var u=s[i];if(u!==a[i]){o=s.length-i;break}}l=a.slice(i),1===s.length&&""===s[0]&&(o=0);o>s.length&&(o=s.length);var c="";for(i=0;i<o;i++)c+="../";(c+=l.join(e.sep)).length>1&&c.charAt(c.length-1)===e.sep&&(c=c.substr(0,c.length-1));return c}}),define("skylark-langx-paths/main",["./paths","./basename","./dirname","./extname","./format","./is-absolute","./join","./normalize","./path","./relative","./resolve"],function(e){return e}),define("skylark-langx-paths",["skylark-langx-paths/main"],function(e){return e}),define("skylark-langx/paths",["skylark-langx-paths"],function(e){return e}),define("skylark-langx/Evented",["./emitter"],function(e){return e}),define("skylark-langx-strings/strings",["skylark-langx-ns"],function(e){return e.attach("langx.strings")}),define("skylark-langx-strings/base64",["./strings"],function(e){return e.base64={decode:function(e,t){t=null!=t&&t;var n,r,i,s,a,o,l,u="",c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(;c<e.length;)s=this._keyStr.indexOf(e.charAt(c++)),a=this._keyStr.indexOf(e.charAt(c++)),o=this._keyStr.indexOf(e.charAt(c++)),l=this._keyStr.indexOf(e.charAt(c++)),n=s<<2|a>>4,r=(15&a)<<4|o>>2,i=(3&o)<<6|l,u+=String.fromCharCode(n),64!=o&&(u+=String.fromCharCode(r)),64!=l&&(u+=String.fromCharCode(i));t||(u=function(e){var t="",n=0,r=c1=c2=0;for(;n<e.length;)(r=e.charCodeAt(n))<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((31&r)<<6|63&c2),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),n+=3);return t}(u));return u},encode:function(e,t){var n,r,i,s,a,o,l,u="",c=0;(t=null!=t&&t)||(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t}(e));for(;c<e.length;)n=e.charCodeAt(c++),r=e.charCodeAt(c++),i=e.charCodeAt(c++),s=n>>2,a=(3&n)<<4|r>>4,o=(15&r)<<2|i>>6,l=63&i,isNaN(r)?o=l=64:isNaN(i)&&(l=64),u=u+this._keyStr.charAt(s)+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(l);return u}}}),define("skylark-langx-strings/camel-case",["./strings"],function(e){return e.camelCase=function(e){return e.replace(/-([\da-z])/g,function(e){return e.toUpperCase().replace("-","")})}}),define("skylark-langx-strings/dasherize",["./strings"],function(e){return e.dasherize=function(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}}),define("skylark-langx-strings/deserialize-value",["./strings"],function(e){return e.deserializeValue=function(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?JSON.parse(e):e):e}catch(t){return e}}}),define("skylark-langx-strings/escape-html",["./strings"],function(e){var t=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"});function n(e){return t[e]}var r=/[&<>"'`=]/g;return e.escapeHTML=function(e){if(null==e)return"";if(!e)return String(e);return e.toString().replace(r,n)}}),define("skylark-langx-strings/generate-uuid",["./strings"],function(e){return e.generateUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}}),define("skylark-langx-strings/lower-first",["./strings"],function(e){return e.lowerFirst=function(e){return e.charAt(0).toLowerCase()+e.slice(1)}}),define("skylark-langx-strings/ltrim",["./strings"],function(e){return e.ltrim=function(e){return e.replace(/^\s+/,"")}}),define("skylark-langx-strings/rtrim",["./strings"],function(e){return e.rtrim=function(e){return e.replace(/\s+$/,"")}}),define("skylark-langx-strings/serialize-value",["./strings"],function(e){return e.serializeValue=function(e){return JSON.stringify(e)}}),define("skylark-langx-strings/slugify",["./strings"],function(e){return e.slugify=function(e){e=(e=e.replace(/^\s+|\s+$/g,"")).toLowerCase();for(var t="a/_,:;",n=0,r=t.length;n<r;n++)e=e.replace(new RegExp(t.charAt(n),"g"),"AAAAAACCCDEEEEEEEEIIIINNOOOOOORRSTUUUUUYYZaaaaaacccdeeeeeeeeiiiinnooooooorrstuuuuuyyzbBDdBAa------".charAt(n));return e=e.replace(/\s+/g,"-").replace(/-+/g,"-")}}),define("skylark-langx-strings/substitute",["./strings"],function(e){return e.substitute=function(e,t,n,r){function i(e,t){if(e.match(/\./)){var n,r=function(e,t){var i=e.pop();return i?t[i]?r(e,n=t[i]):null:n};return r(e.split(".").reverse(),t)}return t[e]}return r=r||window,n=n?proxy(r,n):function(e){return e},e.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(e,s,a){var o=i(s,t);return a&&(o=i(a,r).call(r,o,s)),n(o,s).toString()})}}),define("skylark-langx-strings/template",["./strings"],function(e){var t=/(.)^/,n={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},r=/\\|'|\r|\n|\u2028|\u2029/g,i=function(e){return"\\"+n[e]};function s(e,n,a){!n&&a&&(n=a),n=Object.assign({},s.templateSettings,n);var o=RegExp([(n.escape||t).source,(n.interpolate||t).source,(n.evaluate||t).source].join("|")+"|$","g"),l=0,u="__p+='";e.replace(o,function(t,n,s,a,o){return u+=e.slice(l,o).replace(r,i),l=o+t.length,n?u+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":s?u+="'+\n((__t=("+s+"))==null?'':__t)+\n'":a&&(u+="';\n"+a+"\n__p+='"),t}),u+="';\n",n.variable||(u="with(obj||{}){\n"+u+"}\n"),u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+u+"return __p;\n";try{var c=new Function(n.variable||"obj","_",u)}catch(e){throw e.source=u,e}var f=this,h=function(e){return c.call(f,e,f)},d=n.variable||"obj";return h.source="function("+d+"){\n"+u+"}",h}return s.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},e.template=s}),define("skylark-langx-strings/trim",["./strings"],function(e){return e.trim=function(e){return null==e?"":String.prototype.trim.call(e)}}),define("skylark-langx-strings/trim-null",["./strings"],function(e){const t=/\x00/g;return e.trimNull=function(e){if("string"!=typeof e)return warn("The argument for removeNullCharacters must be a string."),e;return e.replace(t,"")}}),define("skylark-langx-strings/unique-id",["./strings"],function(e){var t=0;return e.uniqueId=function(e){var n=++t+"";return e?e+n:n}}),define("skylark-langx-strings/upper-first",["./strings"],function(e){return e.upperFirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}),define("skylark-langx-strings/words",["./strings"],function(e){const t="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",n=`[${t}]`,r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\u1ab0-\\u1aff\\u1dc0-\\u1dff]",i="[\\u2700-\\u27bf]",s="[a-z\\xdf-\\xf6\\xf8-\\xff]",a=`[^\\ud800-\\udfff${t+"\\d\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde"}]`,o=`(?:${r}|\\ud83c[\\udffb-\\udfff])`,l="[^\\ud800-\\udfff]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",f="[A-Z\\xc0-\\xd6\\xd8-\\xde]",h=`(?:${s}|${a})`,d=`(?:${f}|${a})`,p="(?:['](?:d|ll|m|re|s|t|ve))?",m="(?:['](?:D|LL|M|RE|S|T|VE))?",y=`${o}?`,g="[\\ufe0e\\ufe0f]?",v=`(?:\\u200d(?:${[l,u,c].join("|")})${g+y})*`,k=g+y+v,x=`(?:${[i,u,c].join("|")})${k}`,b=RegExp([`${f}?${s}+${p}(?=${[n,f,"$"].join("|")})`,`${d}+${m}(?=${[n,f+h,"$"].join("|")})`,`${f}?${h}+${p}`,`${f}+${m}`,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",x].join("|"),"g");const w=RegExp.prototype.test.bind(/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/),_=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;return e.words=function(e,t){if(void 0===t){const t=w(e)?function(e){return e.match(b)}(e):function(e){return e.match(_)}(e);return t||[]}return e.match(t)||[]}}),define("skylark-langx-strings/main",["./strings","./base64","./camel-case","./dasherize","./deserialize-value","./escape-html","./generate-uuid","./lower-first","./ltrim","./rtrim","./serialize-value","./slugify","./substitute","./template","./trim","./trim-null","./unique-id","./upper-first","./words"],function(e){return e}),define("skylark-langx-strings",["skylark-langx-strings/main"],function(e){return e}),define("skylark-langx/strings",["skylark-langx-strings"],function(e){return e}),define("skylark-langx/stateful",["./Evented","./strings","./objects"],function(e,t,n){var r=n.isEqual,i=n.mixin,s=n.result,a=n.isEmptyObject,o=n.clone,l=t.uniqueId,u=e.inherit({_construct:function(e,t){var n=e||{};t||(t={}),this.cid=l(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{});var r=s(this,"defaults");n=i({},r,n),this.set(n,t),this.changed={}},changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",toJSON:function(e){return o(this.attributes)},get:function(e){return this.attributes[e]},has:function(e){return null!=this.get(e)},set:function(e,t,n){if(null==e)return this;var i;if("object"==typeof e?(i=e,n=t):(i={})[e]=t,n||(n={}),!this._validate(i,n))return!1;var s=n.unset,a=n.silent,l=[],u=this._changing;this._changing=!0,u||(this._previousAttributes=o(this.attributes),this.changed={});var c=this.attributes,f=this.changed,h=this._previousAttributes;for(var d in i)t=i[d],r(c[d],t)||l.push(d),r(h[d],t)?delete f[d]:f[d]=t,s?delete c[d]:c[d]=t;if(this.idAttribute in i&&(this.id=this.get(this.idAttribute)),!a){l.length&&(this._pending=n);for(var p=0;p<l.length;p++)this.trigger("change:"+l[p],this,c[l[p]],n)}if(u)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,i({},t,{unset:!0}))},clear:function(e){var t={};for(var n in this.attributes)t[n]=void 0;return this.set(t,i({},e,{unset:!0}))},hasChanged:function(e){return null==e?!a(this.changed):void 0!==this.changed[e]},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&o(this.changed);var t=this._changing?this._previousAttributes:this.attributes,n={};for(var i in e){var s=e[i];r(t[i],s)||(n[i]=s)}return!a(n)&&n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return o(this._previousAttributes)},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},i({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=i({},this.attributes,e);var n=this.validationError=this.validate(e,t)||null;return!n||(this.trigger("invalid",this,n,i(t,{validationError:n})),!1)}});return u}),define("skylark-langx-topic/topic",["skylark-langx-ns","skylark-langx-events"],function(e,t){var n=new t.Emitter;return e.attach("langx.topic",{publish:function(e,t,r){var i=[].slice.call(arguments,1);return n.trigger({type:e,data:i})},subscribe:function(e,t,r){var i=function(e){t.apply(r,e.data)};return n.on(e,i),{remove:function(){n.off(e,i)}}}})}),define("skylark-langx-topic/main",["./topic"],function(e){return e}),define("skylark-langx-topic",["skylark-langx-topic/main"],function(e){return e}),define("skylark-langx/topic",["skylark-langx-topic"],function(e){return e}),define("skylark-langx/types",["skylark-langx-types"],function(e){return e}),define("skylark-langx-urls/urls",["skylark-langx-ns"],function(e){return e.attach("langx.urls",{})}),define("skylark-langx-urls/create_object_url",["./urls"],function(e){"use strict";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return e.createObjectURL=function(e,n,r=!1){if(!r&&URL.createObjectURL){const t=new Blob([e],{type:n});return URL.createObjectURL(t)}let i=`data:${n};base64,`;for(let n=0,r=e.length;n<r;n+=3){const s=255&e[n],a=255&e[n+1],o=255&e[n+2],l=s>>2,u=(3&s)<<4|a>>4,c=n+1<r?(15&a)<<2|o>>6:64,f=n+2<r?63&o:64;i+=t[l]+t[u]+t[c]+t[f]}return i}}),define("skylark-langx-urls/create_valid_absolute_url",["./urls"],function(e){"use strict";return e.createValidAbsoluteUrl=function(e,t){if(!e)return null;try{const n=t?new URL(e,t):new URL(e);if(function(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(n))return n}catch(e){}return null}}),define("skylark-langx-urls/get-absolute-url",["./urls"],function(e){"use strict";return e.getAbsoluteUrl=function(e){if(!e.match(/^https?:\/\//)){const t=document.createElement("div");t.innerHTML=`<a href="${e}">x</a>`,e=t.firstChild.href}return e}}),define("skylark-langx-urls/get-file-extension",["./urls"],function(e){"use strict";return e.getFileExtension=function(e){if("string"==typeof e){const t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,n=t.exec(e);if(n)return n.pop().toLowerCase()}return""}}),define("skylark-langx-urls/get-file-name",["./urls"],function(e){"use strict";return e.getFileName=function(e){const t=e.indexOf("#"),n=e.indexOf("?"),r=Math.min(t>0?t:e.length,n>0?n:e.length);return e.substring(e.lastIndexOf("/",r)+1,r)}}),define("skylark-langx-urls/get-query",["./urls"],function(e){"use strict";return e.getQuery=function(e){for(var t={},n=e.split("&"),r=n.length,i=[],s=0;s<r;s++){i=n[s].split("=",2);try{i[0]=decodeURIComponent(i[0]),i[1]=decodeURIComponent(i[1])}catch(e){}void 0===t[i[0]]?t[i[0]]=i[1]:t[i[0]]+=","+i[1]}return t}}),define("skylark-langx-urls/parse-url",["./urls"],function(e){"use strict";return e.parseUrl=function(e){const t=["protocol","hostname","port","pathname","search","hash","host"];let n=document.createElement("a");n.href=e;const r=""===n.host&&"file:"!==n.protocol;let i;r&&((i=document.createElement("div")).innerHTML=`<a href="${e}"></a>`,n=i.firstChild,i.setAttribute("style","display:none; position:absolute;"),document.body.appendChild(i));const s={};for(let e=0;e<t.length;e++)s[t[e]]=n[t[e]];"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,""));"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,""));s.protocol||(s.protocol=window.location.protocol);r&&document.body.removeChild(i);return s}}),define("skylark-langx-urls/is-cross-origin",["./urls","./parse-url"],function(e,t){"use strict";return e.isCrossOrigin=function(e,n=window.location){const r=t(e);return(":"===r.protocol?n.protocol:r.protocol)+r.host!==n.protocol+n.host}}),define("skylark-langx-urls/is_same_origin",["./urls"],function(e){"use strict";return e.isSameOrigin=function(e,t){let n;try{if(!(n=new URL(e)).origin||"null"===n.origin)return!1}catch(e){return!1}const r=new URL(t,n);return n.origin===r.origin}}),define("skylark-langx-urls/main",["./urls","./create_object_url","./create_valid_absolute_url","./get-absolute-url","./get-file-extension","./get-file-name","./get-query","./is-cross-origin","./is_same_origin","./parse-url"],function(e){return e}),define("skylark-langx-urls",["skylark-langx-urls/main"],function(e){return e}),define("skylark-langx/urls",["skylark-langx-urls"],function(e){return e}),define("skylark-langx/langx",["./skylark","./arrays","./array-store","./aspect","./async","./binary","./chars","./constructs","./datetimes","./deferred","./emitter","./evented","./events","./funcs","./globals","./hoster","./klass","./maths","./numerics","./objects","./paths","./stateful","./strings","./topic","./types","./urls"],function(e,t,n,r,i,s,a,o,l,u,c,f,h,d,p,m,y,g,v,k,x,b,w,_,E,C){"use strict";Array.prototype.concat,Array.prototype.indexOf,Array.prototype.slice,Array.prototype.filter;var S=k.mixin,M=(k.safeMixin,E.isFunction);var j=1;var T=e.attach("langx");return S(T,{createEvent:c.createEvent,funcArg:function(e,t,n,r){return M(t)?t.call(e,n,r):t},getQueryParams:function(e){var t=(e=e||window.location.href).split("?"),n={};t.length>1&&t[1].split("&").forEach(function(e){var t=e.split("=");n[t[0]]=t[1]});return n},toPixel:function(e){return parseFloat(e)||0},uid:function(e){return e._uid||(e._uid=j++)},URL:"undefined"!=typeof window?window.URL||window.webkitURL:null}),S(T,t,r,l,d,v,k,w,E,{ArrayStore:n,async:i,Deferred:u,Emitter:c,Evented:f,hoster:m,klass:y,Stateful:b,topic:_}),T}),define("skylark-domx-browser/browser",["skylark-langx/skylark","skylark-langx/langx"],function(e,t){"use strict";var n=t.hoster.browser;return t.mixin(n,{isIE:!!/msie/i.exec(window.navigator.userAgent),location:function(){return window.location},support:{}}),e.attach("domx.browser",n)}),define("skylark-domx-browser/support/css3",["skylark-langx/langx","../browser"],function(e,t){"use strict";var n,r,i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},s=null,a="",o="",l={},u={},c=/^(Webkit|webkit|O|Moz|moz|ms)(.*)$/,f=window.document,h=f.createElement("div"),d=h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.matchesSelector,p=h.style;for(var m in p){var y=m.match(r||c);if(y){r||(n=y[1],r=new RegExp("^("+n+")(.*)$"),n,a="-"+n.toLowerCase()+"-",o=n.toLowerCase()),l[e.lowerFirst(y[2])]=m;var g=e.dasherize(y[2]);u[g]=a+g,i[m]&&(s=i[m])}}s||void 0!==p.transition&&(s=i.transition);var v={normalizeStyleProperty:function(e){return l[e]||e},normalizeCssProperty:function(e){return u[e]||e},normalizeCssEvent:function(e){return o?o+e:e.toLowerCase()},matchesSelector:d};return e.mixin(t,v),t.css3PropPrefix=v.propPrefix=a,s&&(t.support.transition=v.transition={end:s}),t.support.cssPointerEvents=v.pointerEvents=(h.style.cssText="pointer-events:auto","auto"===h.style.pointerEvents),h=null,t.support.css3=v}),define("skylark-domx-browser/support/fullscreen",["../browser"],function(e){const t={prefixed:!0},n=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],r=n[0];let i;for(let e=0;e<n.length;e++)if(n[e][1]in document){i=n[e];break}if(i){for(let e=0;e<i.length;e++)t[r[e]]=i[e];t.prefixed=i[0]!==r[0],e.requestFullscreen=function(){return document.body[t.requestFullscreen].apply(this,arguments)},e.exitFullscreen=function(){return document[t.exitFullscreen].apply(this,arguments)},e.support.fullscreen=t}else e.support.fullscreen=null;return e.support.fullscreen}),define("skylark-domx-browser/support/touch",["../browser"],function(e){return e.support.tocuh=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch)}),define("skylark-domx-browser/main",["./browser","./support/css3","./support/fullscreen","./support/touch"],function(e){return e}),define("skylark-domx-browser",["skylark-domx-browser/main"],function(e){return e}),define("skylark-langx/main",["./langx"],function(e){return e}),define("skylark-langx",["skylark-langx/main"],function(e){return e}),define("skylark-langx-scripter/scripter",["skylark-langx/skylark","skylark-langx"],function(e,t){var n=document.getElementsByTagName("head")[0],r={},i={},s=0;function a(){return a}var o={type:!0,src:!0,nonce:!0,noModule:!0};return t.mixin(a,{loadJavaScript:function(e,t,a){var o=r[e];if(o||(o=r[e]={state:0,loadedCallbacks:[],errorCallbacks:[]}),o.loadedCallbacks.push(t),o.errorCallbacks.push(a),1===o.state)o.node.onload();else if(-1===o.state)o.node.onerror();else{var l=o.node=document.createElement("script"),u=o.id=s++;l.type="text/javascript",l.async=!1,l.defer=!1,startTime=(new Date).getTime(),n.appendChild(l),l.onload=function(){o.state=1;for(var e=o.loadedCallbacks,t=e.length;t--;)e[t]();o.loadedCallbacks=[],o.errorCallbacks=[]},l.onerror=function(){o.state=-1;for(var e=o.errorCallbacks,t=e.length;t--;)e[t]();o.loadedCallbacks=[],o.errorCallbacks=[]},l.src=e,i[u]=l}return o.id},deleteJavaScript:function(e){var t=i[e];if(t){var n=t.src;t.parentNode&&t.parentNode.remove(t),delete i[e],delete r[n]}},evaluate:function(e,t,n){var r,i,s=(n=n||document).createElement("script");if(s.text=e,t)for(r in o)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&s.setAttribute(r,i);return n.head.appendChild(s).parentNode.removeChild(s),this},loadScript:function(e){var n=new t.Deferred;return n.promise.scriptId=this.loadJavaScript(e,function(){n.resolve()},function(e){n.reject(e)}),n.promise}}),e.attach("langx.scripter",a)}),define("skylark-langx-scripter/main",["./scripter"],function(e){return e}),define("skylark-langx-scripter",["skylark-langx-scripter/main"],function(e){return e}),define("skylark-domx-noder/noder",["skylark-langx-ns","skylark-langx-types","skylark-langx-arrays","skylark-langx-strings","skylark-langx-scripter","skylark-domx-browser"],function(e,t,n,r,i,s){Array.prototype.map,Array.prototype.slice;function a(){return a}return Object.assign(a,{blur:function(e){e.blur()},generateId:function(e){var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;for(;n--;)r+=t.charCodeAt(n);return r.toString(36)}}),e.attach("domx.noder",a)}),define("skylark-domx-noder/active",["./noder"],function(e){return e.active=function(e){var t;e=e||document;try{t=e.activeElement}catch(n){t=e.body}t||(t=e.body);t.nodeName||(t=e.body);return t}}),define("skylark-domx-noder/_enhance_place_content",["skylark-langx-types","skylark-langx-arrays","./noder"],function(e,t,n){return function(n,r){if(e.isFunction(n))return n.apply(r,[]);if(e.isArrayLike(n)){for(var i,s=0;s<n.length;s++)e.isFunction(n[s])&&(n[s]=n[s].apply(r,[]),e.isArrayLike(n[s])&&(i=!0));i&&(n=t.flatten(n))}return n}}),define("skylark-domx-noder/is-element",["./noder"],function(e){return e.isElement=function(e){return e&&1===e.nodeType}}),define("skylark-domx-noder/is-text-node",["./noder"],function(e){return e.isTextNode=function(e){return e&&3===e.nodeType}}),define("skylark-domx-noder/is-fragment",["./noder"],function(e){return e.isFragment=function(e){return e&&11===e.nodeType}}),define("skylark-domx-noder/_normalize_content",["skylark-langx-types","./noder","./is-element","./is-text-node","./is-fragment"],function(e,t,n,r,i){var s=Array.prototype.map;return function(t){"function"==typeof t&&(t=t());return s.call(e.isArrayLike(t)?t:[t],e=>("function"==typeof e&&(e=e()),n(e)||r(e)||i(e)?e:"string"==typeof e&&/\S/.test(e)?document.createTextNode(e):void 0)).filter(e=>e)}}),define("skylark-domx-noder/_ensure_nodes",["skylark-langx-arrays","./noder","./_normalize_content"],function(e,t,n){var r=Array.prototype.map;return function(t,i){var s=n(t);i&&(s=r.call(s,function(e){return e.cloneNode(!0)}));return e.flatten(s)}}),define("skylark-domx-noder/after",["./noder","./_enhance_place_content","./_ensure_nodes"],function(e,t,n){return e.after=function(e,r,i){r=t(r,e);var s=(o=e).parentNode;if(s)for(var a=n(r,i),o=o.nextSibling,l=0;l<a.length;l++)o?s.insertBefore(a[l],o):s.appendChild(a[l]);return this}}),define("skylark-domx-noder/append",["./noder","./_enhance_place_content","./_ensure_nodes"],function(e,t,n){return e.append=function(e,r,i){r=t(r,e);for(var s=e,a=n(r,i),o=0;o<a.length;o++)s.appendChild(a[o]);return this}}),define("skylark-domx-noder/before",["./noder","./_enhance_place_content","./_ensure_nodes"],function(e,t,n){return e.before=function(e,r,i){r=t(r,e);var s=e,a=s.parentNode;if(a)for(var o=n(r,i),l=0;l<o.length;l++)a.insertBefore(o[l],s);return this}}),define("skylark-domx-noder/body",["./noder"],function(e){return e.body=function(){return document.body}}),define("skylark-domx-noder/clone",["./noder"],function(e){return e.clone=function(e,t){return e.cloneNode(t)}}),define("skylark-domx-noder/is-child-of",["./noder"],function(e){return e.isChildOf=function(e,t,n){if(n)return e.parentNode===t;if(document.documentElement.contains)return t.contains(e);for(;e;){if(t===e)return!0;e=e.parentNode}return!1}}),define("skylark-domx-noder/contains",["./noder","./is-child-of"],function(e,t){return e.contains=function(e,n){return t(n,e)}}),define("skylark-domx-noder/node-name",["./noder"],function(e){return e.nodeName=function(e,t){var n=e.nodeName&&e.nodeName.toLowerCase();if(void 0!==t)return n===t.toLowerCase();return n}}),define("skylark-domx-noder/contents",["./noder","./node-name"],function(e,t){return e.contents=function(e){if(t(e,"iframe"))return e.contentDocument;return e.childNodes}}),define("skylark-domx-noder/create-element",["skylark-langx-types","./noder"],function(e,t){return t.createElement=function(n,r,i,s){var a;a=/svg/i.test(n)?document.createElementNS("http://www.w3.org/2000/svg",n):document.createElement(n);e.isHtmlNode(r)?(s=r,r=null,i=null):e.isHtmlNode(i)&&(s=i,i=null);if(r)for(var o in r)a[o]=r[o];if(i)for(var o in i)a.setAttribute(o,i[o]);s&&t.append(s,a);return a}}),define("skylark-domx-noder/create-fragment",["skylark-langx-strings","./noder","./create-element"],function(e,t,n){var r=/^\s*<(\w+|!)[^>]*>/,i=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,s=document.createElement("div"),a=document.createElement("table"),o=document.createElement("tbody"),l=document.createElement("tr"),u={tr:o,tbody:a,thead:a,tfoot:a,td:l,th:l,"*":s},c=Array.prototype.slice;return t.createFragment=function(t){if(t=e.trim(t),i.test(t))return[n(RegExp.$1)];var s=r.test(t)&&RegExp.$1;s in u||(s="*");var a=u[s];return a.innerHTML=function(e){for(var t=e.split("/>"),n="",r=0;r<t.length-1;r++){var i=t[r].split("<");n+=t[r]+"></"+i[i.length-1].split(" ")[0]+">"}return n+t[t.length-1]}(""+t),dom=c.call(a.childNodes),dom.forEach(function(e){a.removeChild(e)}),dom}}),define("skylark-domx-noder/create-text-node",["./noder"],function(e){return e.createTextNode=function(e){return document.createTextNode(e)}}),define("skylark-domx-noder/doc",["./noder"],function(e){return e.doc=function(){return document}}),define("skylark-domx-noder/empty",["./noder"],function(e){return e.empty=function(e){for(;e.hasChildNodes();){var t=e.firstChild;e.removeChild(t)}return this}}),define("skylark-domx-noder/focusable",["./noder"],function(e){return e.focusable=function(e,t){var n,r,i,s,a,o=e.nodeName.toLowerCase();if("area"===o)return n=e.parentNode,r=n.name,!(!e.href||!r||"map"!==n.nodeName.toLowerCase())&&((i=$("img[usemap='#"+r+"']")).length>0&&i.is(":visible"));/^(input|select|textarea|button|object)$/.test(o)?(s=!e.disabled)&&(a=$(e).closest("fieldset")[0])&&(s=!a.disabled):s="a"===o&&e.href||t;return s&&$(e).is(":visible")&&visible($(e))}}),define("skylark-domx-noder/from-point",["./noder"],function(e){return e.fromPoint=function(e,t){return document.elementFromPoint(e,t)}}),define("skylark-domx-noder/fullscreen",["skylark-domx-browser","./noder"],function(e,t){return t.fullscreen=function(t){return!1===t?e.exitFullscreen.apply(document):t?t[e.support.fullscreen.requestFullscreen]():document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}}),define("skylark-domx-noder/html",["skylark-langx-types","skylark-langx-scripter","./noder","./empty"],function(e,t,n,r){var i=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,s=/^$|^module$|\/(?:java|ecma)script/i;return n.html=function(n,a){var o=function(t,n){if(void 0===n)return t.innerHTML;if(r(t),n=n||"",e.isString(n)&&(n=n.replace(i,"<$1></$2>")),e.isString(n)||e.isNumber(n))t.innerHTML=n;else if(e.isArrayLike(n))for(var s=0;s<n.length;s++)t.appendChild(n[s]);else t.appendChild(n);return this}(n,a);if(void 0!==a){for(var l=n.querySelectorAll("script"),u=0;u<l.length;u++){var c=l[u];s.test(c.type||"")&&t.evaluate(c.textContent,c)}return this}return o}}),define("skylark-domx-noder/is-active",["./noder"],function(e){return e.isActive=function(e){return e===document.activeElement&&(e.type||e.href)}}),define("skylark-domx-noder/is-block-node",["./noder"],function(e){var t=["div","p","ul","ol","li","blockquote","hr","pre","h1","h2","h3","h4","h5","table"];return e.isBlockNode=function(e){if(!e||3===e.nodeType)return!1;return new RegExp("^("+t.join("|")+")$").test(e.nodeName.toLowerCase())}}),define("skylark-domx-noder/is-doc",["./noder"],function(e){return e.isDoc=function(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}}),define("skylark-domx-noder/is-editable",["./noder"],function(e){return e.isEditable=function e(t){if(!t)return!1;if("false"===t.contentEditable)return!1;if("true"===t.contentEditable)return!0;return e(t.parentNode)}}),define("skylark-domx-noder/is-fullscreen",["./noder","./fullscreen"],function(e,t){return e.isFullscreen=function(e){return t()===e}}),define("skylark-domx-noder/is-in-document",["./noder"],function(e){return e.isInDocument=function(e){return e===document.body||document.body.contains(e)}}),define("skylark-domx-noder/is-in-frame",["./noder"],function(e){return e.isInFrame=function(){try{return window.parent!==window.self}catch(e){return!0}}}),define("skylark-domx-noder/is-input",["./noder","./is-editable"],function(e,t){return e.isInput=function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||t(e)}}),define("skylark-domx-noder/is-window",["skylark-langx-types","./noder"],function(e,t){return t.isWindow=e.isWindow}),define("skylark-domx-noder/offset-parent",["./noder"],function(e){var t=/^(?:body|html)$/i;return e.offsetParent=function(e){var n=e.offsetParent||document.body;for(;n&&!t.test(n.nodeName)&&"static"==document.defaultView.getComputedStyle(n).position;)n=n.offsetParent;return n}}),define("skylark-domx-styler/styler",["skylark-langx/skylark","skylark-langx/langx"],function(e,t){Array.prototype.every;var n=Array.prototype.forEach,r=t.camelCase,i=t.dasherize;function s(e,t){return"number"!=typeof t||a[i(e)]?t:t+"px"}var a={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},o={};function l(e){return e in o?o[e]:o[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function u(e,t){var n=e.className||"",r=n&&void 0!==n.baseVal;if(void 0===t)return r?n.baseVal:n;r?n.baseVal=t:e.className=t}var c={};function f(e,n){if(!n)return this;var r=u(e);return(t.isString(n)?n.split(/\s+/g):n).forEach(function(e){var t=l(e);r.match(t)||(r+=(r?" ":"")+e)}),u(e,r),this}function h(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=window),t.getComputedStyle(e)}function d(e,t){var n=l(t);return e.className&&e.className.match(n)}function p(e,n){if(n){var r=u(e);(t.isString(n)?n.split(/\s+/g):n).forEach(function(e){var t=l(e);r.match(t)&&(r=r.replace(t," "))}),u(e,r.trim())}else u(e,"");return this}var m=function(){return m};return t.mixin(m,{autocssfix:!1,cssHooks:{},addClass:f,className:u,css:function(e,a,o){if(void 0==o){var l=h(e);if(void 0==a)return l;if(t.isString(a))return e.style[r(a)]||l.getPropertyValue(i(a));if(t.isArrayLike(a)){var u={};return n.call(a,function(t){u[t]=e.style[r(t)]||l.getPropertyValue(i(t))}),u}}var c="";if("string"==typeof a)o||0===o?c=i(a)+":"+s(a,o):e.style.removeProperty(i(a));else for(key in a)void 0!==a[key]&&(a[key]||0===a[key]?c+=i(key)+":"+s(key,a[key])+";":e.style.removeProperty(i(key)));return e.style.cssText+=";"+c,this},disabled:function(e,t){if(arguments.length<2)return!!this.dom.disabled;return e.disabled=t,this},hasClass:d,hide:function(e){return m.css(e,"display","none"),this},isInvisible:function(e){return"none"==m.css(e,"display")||0==m.css(e,"opacity")||"hidden"==m.css(e,"visibility")},removeClass:p,show:function(e){m.css(e,"display",""),"none"==m.css(e,"display")&&m.css(e,"display",function(e){var t,n;c[e]||(t=document.createElement(e),document.body.appendChild(t),n=h(t).getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),c[e]=n);return c[e]}(e.nodeName));return this},toggleClass:function(e,t,n){return t.split(/\s+/g).forEach(function(t){void 0===n&&(n=!d(e,t)),n?f(e,t):p(e,t)}),this}}),e.attach("domx.styler",m)}),define("skylark-domx-styler/main",["./styler"],function(e,t,n){return e}),define("skylark-domx-styler",["skylark-domx-styler/main"],function(e){return e}),define("skylark-domx-noder/overlay",["skylark-domx-styler","./noder"],function(e,t){return t.overlay=function(n,r){var i=t.createElement("div",r);return e.css(i,{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:2147483647,opacity:.7}),n.appendChild(i),i}}),define("skylark-domx-noder/owner-doc",["./noder"],function(e){return e.ownerDoc=function(e){if(!e)return document;if(9==e.nodeType)return e;return e.ownerDocument}}),define("skylark-domx-noder/owner-window",["./noder","./owner-doc"],function(e,t){return e.ownerWindow=function(e){var n=t(e);return n.defaultView||n.parentWindow}}),define("skylark-domx-noder/picture-in-picture",["skylark-domx-browser","./noder"],function(e,t){return t.pictureInPicture=function(e){if(!1===e)return document.exitPictureInPicture();if(!e)return document.pictureInPictureElement;e!==document.pictureInPictureElement&&(e.requestPictureInPicture(),e)}}),define("skylark-domx-noder/prepend",["./noder","./_enhance_place_content","./_ensure_nodes"],function(e,t,n){return e.prepend=function(e,t,r){for(var i=e,s=i.firstChild,a=n(t,r),o=0;o<a.length;o++)s?i.insertBefore(a[o],s):i.appendChild(a[o]);return this}}),define("skylark-domx-noder/reflow",["./noder"],function(e){return e.reflow=function(e){e||(e=document);return e.offsetHeight,this}}),define("skylark-domx-noder/remove-child",["skylark-langx-types","./noder"],function(e,t){return t.removeChild=function(t,n){e.isArrayLike(n)||(n=[n]);for(var r=0;r<n.length;r++)t.removeChild(n[r]);return this}}),define("skylark-domx-noder/remove",["./noder"],function(e){return e.remove=function(e){if(e&&e.parentNode)try{e.parentNode.removeChild(e)}catch(e){console.warn("The node is already removed",e)}return this}}),define("skylark-domx-noder/replace",["./noder"],function(e){return e.replace=function(e,t){return t.parentNode.replaceChild(e,t),this}}),define("skylark-domx-noder/reverse",["./noder"],function(e){return e.reverse=function(e){for(var t=e.firstChild,n=e.children.length-1;n>0;n--)if(n>0){var r=e.children[n];e.insertBefore(r,t)}}}),define("skylark-domx-noder/root",["./noder"],function(e){return e.root=function(){return document.documentElement}}),define("skylark-domx-noder/scrolling-element",["./noder"],function(e){return e.scrollingElement=function(){return document.scrollingElement||document.documentElement}}),define("skylark-domx-noder/selectable",["./noder"],function(e){return e.selectable=function(e,t){if(void 0===e||void 0===e.style)return;e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off"}}),define("skylark-domx-noder/throb",["skylark-langx/langx","skylark-domx-styler","./noder"],function(e,t,n){return n.throb=function(e,r){(r=r||{}).text,r.style;var i,s=r.time,a=r.callback,o=n.createElement("div",{className:r.className||"throbber"}),l=function(){i&&(clearTimeout(i),i=null),o&&(n.remove(o),o=null)};r.style&&t.css(o,r.style);var u=r.content||'<span class="throb"></span>';n.html(o,u),e.appendChild(o),s&&(i=setTimeout(function(){l(),a&&a()},s));return{throbber:o,remove:l,update:function(e){e&&e.text&&o&&(textNode.nodeValue=e.text)}}}}),define("skylark-domx-noder/traverse",["./noder"],function(e){return e.traverse=function e(t,n){n(t);for(var r=0,i=t.childNodes.length;r<i;r++)e(t.childNodes[r],n);return this}}),define("skylark-domx-noder/unwrap",["./noder","./is-doc"],function(e,t){return e.unwrap=function(e){var n=e.parentNode;if(n){if(t(n.parentNode))return;n.parentNode.insertBefore(e,n)}}}),define("skylark-domx-noder/wrapper-inner",["./noder"],function(e){var t=Array.prototype.slice;return e.wrapperInner=function(e,n){var r=t.call(e.childNodes);e.appendChild(n);for(var i=0;i<r.length;i++)n.appendChild(r[i]);return this}}),define("skylark-domx-noder/wrapper",["./noder"],function(e){return e.wrapper=function(e,t){types.isString(t)&&(t=this.createFragment(t).firstChild);e.parentNode.insertBefore(t,e),t.appendChild(e)}}),define("skylark-domx-noder/main",["./noder","./active","./after","./append","./before","./body","./clone","./contains","./contents","./create-element","./create-fragment","./create-text-node","./doc","./empty","./focusable","./from-point","./fullscreen","./html","./is-active","./is-block-node","./is-child-of","./is-doc","./is-editable","./is-element","./is-fragment","./is-fullscreen","./is-in-document","./is-in-frame","./is-input","./is-text-node","./is-window","./node-name","./offset-parent","./overlay","./owner-doc","./owner-window","./picture-in-picture","./prepend","./reflow","./remove-child","./remove","./replace","./reverse","./root","./scrolling-element","./selectable","./throb","./traverse","./unwrap","./wrapper-inner","./wrapper","./throb"],function(e){return e}),define("skylark-domx-noder",["skylark-domx-noder/main"],function(e){return e}),define("skylark-domx-finder/finder",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-styler"],function(e,t,n,r,s){var a={},o=Array.prototype.filter,l=Array.prototype.slice,u=n.matchesSelector;(function(){var e,t,n,r,i,s={},a={},o=/\\/g,l=function(n,i){if(null==n)return null;if(!0===n.Slick)return n;n=(""+n).replace(/^\s+|\s+$/g,"");var o=(r=!!i)?a:s;if(o[n])return o[n];for(e={Slick:!0,expressions:[],raw:n,reverse:function(){return l(this.raw,!0)}},t=-1;n!=(n=n.replace(h,d)););return e.length=e.expressions.length,o[e.raw]=r?c(e):e},u=function(e){return"!"===e?" ":" "===e?"!":/^!/.test(e)?e.replace(/^!/,""):"!"+e},c=function(e){for(var t=e.expressions,n=0;n<t.length;n++){for(var r=t[n],i={parts:[],tag:"*",combinator:u(r[0].combinator)},s=0;s<r.length;s++){var a=r[s];a.reverseCombinator||(a.reverseCombinator=" "),a.combinator=a.reverseCombinator,delete a.reverseCombinator}r.reverse().push(i)}return e},f=(i=/(?=[\-\[\]{}()*+?.\\\^$|,#\s])/g,function(e){return e.replace(i,"\\")}),h=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+f(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])"));function d(i,s,a,l,c,h,d,p,m,y,g,v,k,x,b,w){if((s||-1===t)&&(e.expressions[++t]=[],n=-1,s))return"";if(a||l||-1===n){a=a||" ";var _=e.expressions[t];r&&_[n]&&(_[n].reverseCombinator=u(a)),_[++n]={combinator:a,tag:"*"}}var E=e.expressions[t][n];if(c)E.tag=c.replace(o,"");else if(h)E.id=h.replace(o,"");else if(d)d=d.replace(o,""),E.classList||(E.classList=[]),E.classes||(E.classes=[]),E.classList.push(d),E.classes.push({value:d,regexp:new RegExp("(^|\\s)"+f(d)+"(\\s|$)")});else if(k)w=(w=w||b)?w.replace(o,""):null,E.pseudos||(E.pseudos=[]),E.pseudos.push({key:k.replace(o,""),value:w,type:1==v.length?"class":"element"});else if(p){var C,S;switch(p=p.replace(o,""),g=(g||"").replace(o,""),m){case"^=":S=new RegExp("^"+f(g));break;case"$=":S=new RegExp(f(g)+"$");break;case"~=":S=new RegExp("(^|\\s)"+f(g)+"(\\s|$)");break;case"|=":S=new RegExp("^"+f(g)+"(-|$)");break;case"=":C=function(e){return g==e};break;case"*=":C=function(e){return e&&e.indexOf(g)>-1};break;case"!=":C=function(e){return g!=e};break;default:C=function(e){return!!e}}""==g&&/^[*$^]=$/.test(m)&&(C=function(){return!1}),C||(C=function(e){return e&&S.test(e)}),E.attributes||(E.attributes=[]),E.attributes.push({key:p,operator:m,value:g,test:C})}return""}var p=this.Slick||{};p.parse=function(e){return l(e)},p.escapeRegExp=f,this.Slick||(this.Slick=p)}).apply(a);var c=/^(?:input|select|textarea|button)$/i,f=/^h\d$/i,l=Array.prototype.slice;a.parseSelector=a.Slick.parse;var h=a.pseudos={button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},checked:function(e){return!!e.checked},contains:function(e,t,n,r){if($(this).text().indexOf(r)>-1)return this},disabled:function(e){return!!e.disabled},enabled:function(e){return!e.disabled},eq:function(e,t,n,r){return t==r},even:function(e,t,n,r){return t%2==0},focus:function(e){return document.activeElement===e&&(e.href||e.type||e.tabindex)},focusable:function(e){return r.focusable(e,null!=e.tabindex)},first:function(e,t){return 0===t},gt:function(e,t,n,r){return t>r},has:function(e,t,n,r){return x(e,r)},header:function(e){return f.test(e.nodeName)},hidden:function(e){return!a.pseudos.visible(e)},input:function(e){return c.test(e.nodeName)},last:function(e,t,n){return t===n.length-1},lt:function(e,t,n,r){return t<r},not:function(e,t,n,r){return!_(e,r)},odd:function(e,t,n,r){return t%2==1},parent:function(e){return!!e.parentElement},selected:function(e){return!!e.selected},tabbable:function(e){var t=e.tabindex,n=null!=t;return(!n||t>=0)&&r.focusable(element,n)},text:function(e){return"text"===e.type},visible:function(e){return e.offsetWidth&&e.offsetWidth},empty:function(e){return!e.hasChildNodes()}};function d(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function p(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}for(i in["first","eq","last"].forEach(function(e){h[e].isArrayFilter=!0}),h.nth=h.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})h[i]=d(i);for(i in{submit:!0,reset:!0})h[i]=p(i);function m(e,n,r){for(var i=[],s=r&&t.isString(r);(e=e.parentElement)&&9!==e.nodeType;){if(r)if(s){if(_(e,r))break}else if(t.isArrayLike(r)){if(t.inArray(e,r)>-1)break}else if(e==r)break;n&&!_(e,n)||i.push(e)}return i}function y(e,t){for(var n=e.childNodes,r=[],i=0;i<n.length;i++){var e=n[i];1==e.nodeType&&r.push(e)}return t&&(r=a.filter(r,t)),r}function g(e,t,n,r){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentElement===n&&_(e,t):_(e,t))||r&&e===n)return e;if(e===n)break}while(e=S(e))}return null}function v(e,t){try{return l.call(e.querySelectorAll(t))}catch(e){}return a.query(e,t)}function k(e,t){try{return e.querySelector(t)}catch(e){}var n=a.query(e,t);return n.length>0?n[0]:null}function x(e,t){return t||(t=e,e=document.body),_(e,t)?e:k(e,t)}function b(e,t,n){for(var r=e.childNodes,i=r[0];i;){if(1==i.nodeType){if(!t||_(i,t))return i;if(n)break}i=i.nextSibling}return null}function w(e,t,n){for(var r=e.childNodes,i=r[r.length-1];i;){if(1==i.nodeType){if(!t||_(i,t))return i;if(n)break}i=i.previousSibling}return null}function _(e,n){if(!n||!e||1!==e.nodeType)return!1;if(t.isString(n)){try{return u.call(e,n.replace(/\[([^=]+)=\s*([^'"\]]+?)\s*\]/g,'[$1="$2"]'))}catch(e){}return a.match(e,n)}return t.isArrayLike(n)?t.inArray(e,n)>-1:t.isPlainObject(n)?a.check(e,n):e===n}function E(e,t,n){for(var r=e.nextSibling;r;){if(1==r.nodeType){if(!t||_(r,t))return r;if(n)break}r=r.nextSibling}return null}function C(e,t){for(var n=e.nextSibling,r=[];n;)1==n.nodeType&&(t&&!_(n,t)||r.push(n)),n=n.nextSibling;return r}function S(e,t){var n=e.host&&e!==document&&e.host.nodeType?e.host:e.parentElement;return!n||t&&!_(n,t)?null:n}function M(e,t,n){for(var r=e.previousSibling;r;){if(1==r.nodeType){if(!t||_(r,t))return r;if(n)break}r=r.previousSibling}return null}function j(e,t){for(var n=e.previousSibling,r=[];n;)1==n.nodeType&&(t&&!_(n,t)||r.push(n)),n=n.previousSibling;return r}function T(e,t){for(var n=e.parentElement.firstChild,r=[];n;)1==n.nodeType&&n!==e&&(t&&!_(n,t)||r.push(n)),n=n.nextSibling;return r}a.divide=function(e){var t,n,r,i,s,a="",o=[];if((n=e.id)&&(a+="#"+n),r=e.classes)for(var l=r.length;l--;)a+="."+r[l].value;if(i=e.attributes)for(var l=0;l<i.length;l++)i[l].operator?a+="["+i[l].key+i[l].operator+JSON.stringify(i[l].value)+"]":a+="["+i[l].key+"]";if(s=e.pseudos)for(l=s.length;l--;)part=s[l],this.pseudos[part.key]?o.push(part):void 0!==part.value&&(a+=":"+part.key+"("+JSON.stringify(part));return(t=e.tag)&&"*"!==t&&(a=t.toUpperCase()+a),a||(a="*"),{nativeSelector:a,customPseudos:o}},a.check=function(e,t,n,r,i){var s,a,o,l,c,f,h,d,p;if(!i){if(s=t.tag){var m=e.nodeName.toUpperCase();if("*"==s){if(m<"@")return!1}else if(m!=(s||"").toUpperCase())return!1}if((a=t.id)&&e.getAttribute("id")!=a)return!1;if(o=t.classes)for(f=o.length;f--;)if(!(d=e.getAttribute("class"))||!o[f].regexp.test(d))return!1;if(l=t.attributes)for(f=l.length;f--;)if((h=l[f]).operator?!h.test(e.getAttribute(h.key)):!e.hasAttribute(h.key))return!1}if(c=t.pseudos)for(f=c.length;f--;)if(h=c[f],p=this.pseudos[h.key]){if((i&&p.isArrayFilter||!i&&!p.isArrayFilter)&&!p(e,n,r,h.value))return!1}else if(!i&&!u.call(e,h.key))return!1;return!0},a.match=function(e,n){var r;if(!(r=t.isString(n)?a.Slick.parse(n):n))return!0;var i,s,o=r.expressions,l=0;for(i=0;s=o[i];i++)if(1==s.length){var u=s[0];if(this.check(e,u))return!0;l++}if(l==r.length)return!1;var c,f=this.query(document,r);for(i=0;c=f[i++];)if(c===e)return!0;return!1},a.filterSingle=function(e,t){var n=o.call(e,function(n,r){return a.check(n,t,r,e,!1)});return n=o.call(n,function(e,r){return a.check(e,t,r,n,!0)})},a.filter=function(e,n){if(!t.isString(n))return a.filterSingle(e,n);var r,i,s=a.Slick.parse(n).expressions,o=[];for(r=0;i=s[r];r++){if(1!=i.length)throw new Error("not supported selector:"+n);var l=i[0],u=a.filterSingle(e,l);o=t.uniq(o.concat(u))}return o},a.combine=function(e,t){var n,r=t.combinator,i=t,s=[];switch(r){case">":s=y(e,i);break;case"+":(n=E(e,i,!0))&&s.push(n);break;case"^":(n=b(e,i,!0))&&s.push(n);break;case"~":s=C(e,i);break;case"++":var u=M(e,i,!0),c=E(e,i,!0);u&&s.push(u),c&&s.push(c);break;case"~~":s=T(e,i);break;case"!":s=m(e,i);break;case"!>":(n=S(e,i))&&s.push(n);break;case"!+":s=M(e,i,!0);break;case"!^":(n=w(e,i,!0))&&s.push(n);break;case"!~":s=j(e,i);break;default:var f=this.divide(t);if(s=l.call(e.querySelectorAll(f.nativeSelector)),f.customPseudos)for(var h=f.customPseudos.length-1;h>=0;h--)s=o.call(s,function(e,t){return a.check(e,{pseudos:[f.customPseudos[h]]},t,s,!1)}),s=o.call(s,function(e,t){return a.check(e,{pseudos:[f.customPseudos[h]]},t,s,!0)})}return s},a.query=function(e,n,r){for(var i,s,o=this.Slick.parse(n),l=[],u=o.expressions,c=0;i=u[c];c++){for(var f,h=[e],d=0;s=i[d];d++)(f=t.map(h,function(e,t){return a.combine(e,s)}))&&(h=f);f&&(l=l.concat(f))}return l};var A=function(){return A};return t.mixin(A,{ancestor:function(e,n,r){var i=r&&t.isString(r);for(;e=e.parentElement;){if(_(e,n))return e;if(r)if(i){if(_(e,r))break}else if(e==r)break}return null},ancestors:m,byId:function(e,t){return(t=t||r.doc()).getElementById(e)},childAt:function(e,n,r){var i=0,a=e.children;r=t.mixin({ignoreHidden:!0,excluding:null,closesting:null},r);for(var o=0;o<a.length;o++){var l=a[o];if((!r.ignoreHidden||"none"!==s.css(l))&&((!r.excluding||!r.excluding.includes(l))&&(!r.closesting||g(l,r.closesting,e,!1)))){if(i===n)return l;i++}}return null},children:y,closest:g,descendant:k,descendants:v,find:x,findAll:function(e,t){t||(t=e,e=document.body);return v(e,t)},firstChild:b,index:function(e,n){var r=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)t.isString(n)?_(e,n)&&r++:t.isFunction(n)&&n(e)&&r++,r++;return r},lastChild:w,matches:_,nextSibling:E,nextSiblings:C,parent:S,previousSibling:M,previousSiblings:j,pseudos:a.pseudos,scrollableParent:function(e,t){if(!e||!e.getBoundingClientRect)return r.scrollingElement();var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var a=s.css(n);if(n.clientWidth<n.scrollWidth&&("auto"==a.overflowX||"scroll"==a.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==a.overflowY||"scroll"==a.overflowY)){if(!n||!n.getBoundingClientRect||n===document.body)return r.scrollingElement();if(i||t)return n;i=!0}}}while(n=n.parentNode);return r.scrollingElement()},siblings:T}),e.attach("domx.finder",A)}),define("skylark-domx-finder/main",["./finder"],function(e){return e}),define("skylark-domx-finder",["skylark-domx-finder/main"],function(e){return e}),define("skylark-domx-data/data",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-finder","skylark-domx-noder"],function(e,t,n,r){var i=Array.prototype.map,s=(Array.prototype.filter,t.camelCase),a=t.deserializeValue,o=/([A-Z])/g,l={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"};var u={option:{get:function(e){var t=e.getAttribute("value");return null!=t?t:(m(e).match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")}},select:{get:function(e){var t,n,i,s=e.options,a=e.selectedIndex,o="select-one"===e.type,l=o?null:[],u=o?a+1:s.length;for(i=a<0?u:o?a:0;i<u;i++)if((n=s[i]).selected&&!n.disabled&&(!n.parentNode.disabled||!r.nodeName(n.parentNode,"optgroup"))){if(t=y(n),o)return t;l.push(t)}return l},set:function(e,n){for(var r,i,s=e.options,a=t.makeArray(n),o=s.length;o--;)((i=s[o]).selected=t.inArray(u.option.get(i),a)>-1)&&(r=!0);return r||(e.selectedIndex=-1),a}}};function c(e,t,n){if(void 0===n){if("object"==typeof t){for(var r in t)c(e,r,t[r]);return this}return e.getAttribute?e.getAttribute(t):e[t]}return e.setAttribute?e.setAttribute(t,n):e[t]=n,this}function f(e,n){var r=e._$_store;return!r&&n&&(r=e._$_store=function(e){var n={};return t.each(e.attributes||[],function(e,t){0==t.name.indexOf("data-")&&(n[s(t.name.replace("data-",""))]=a(t.value))}),n}(e)),r}function h(e,t,n){var r=f(e,!0);r[s(t)]=n}function d(e,n,r){if(void 0===r){if("object"==typeof n){for(var i in n)h(e,i,n[i]);return this}return function(e,n){if(void 0===n)return f(e,!0);var r=f(e);if(r){if(n in r)return r[n];var i=s(n);if(i in r)return r[i]}var a="data-"+n.replace(o,"-$1").toLowerCase(),l=c(e,a);return t.isString(l)||(l=void 0),l}(e,n)}return h(e,n,r),this}function p(e){e._$_store&&delete e._$_store}function m(e,t){return void 0===t?void 0!==e.textContent?e.textContent:e.innerText:(t=null==t?"":""+t,void 0!==e.textContent?e.textContent=t:e.innerText=t,this)}function y(e,n){var r=u[e.type]||u[e.nodeName.toLowerCase()];if(void 0===n)return r&&"get"in r&&void 0!==(ret=r.get(e,"value"))?ret:(ret=e.value,"string"==typeof ret?ret.replace(/\r/g,""):null==ret?"":ret);null==n?n="":"number"==typeof n?n+="":t.isArray(n)&&(n=t.map(n,function(e){return null==e?"":e+""})),r&&"set"in r&&void 0!==r.set(e,n,"value")||(e.value=n)}function g(){return g}return t.each(["radio","checkbox"],function(){u[this]={set:function(e,n){if(t.isArray(n))return e.checked=t.inArray(y(e),n)>-1}}}),n.pseudos.data=function(e,t,n,r){return!!d(e,r||n[3])},t.mixin(g,{aria:function(e,t,n){return this.attr(e,"aria-"+t,n)},attr:c,cleanData:p,data:d,pluck:function(e,t){return i.call(e,function(e){return e[t]})},prop:function e(t,n,r){if(void 0===r&&"object"==typeof n){for(var i in n)e(t,i,n[i]);return this}n=l[n]||n;return void 0===r?t[n]:(t[n]=r,this)},removeAttr:function(e,t){return t.split(" ").forEach(function(t){!function(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}(e,t)}),this},removeData:function(e,n){if(n){t.isString(n)&&(n=n.split(/\s+/));var r=f(e,!0);n.forEach(function(e){delete r[e]})}else p(e);return this},removeProp:function(e,t){return t.split(" ").forEach(function(t){delete e[t]}),this},text:m,val:y,valHooks:u}),e.attach("domx.data",g)}),define("skylark-domx-query/query",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-finder"],function(e,t,n,r){var i,s=Array.prototype.some,a=Array.prototype.push,o=(Array.prototype.every,Array.prototype.concat,Array.prototype.slice),l=(Array.prototype.map,Array.prototype.filter),u=Array.prototype.forEach,c=Array.prototype.indexOf,f=Array.prototype.sort,h=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,d=t.funcArg,p=t.isArrayLike,m=t.isString,y=t.uniq,g=t.isFunction,v=t.type,k=(t.isArray,t.isWindow,t.isDocument,t.isObject);t.isPlainObject,t.compact,t.flatten,t.camelCase,t.dasherize,r.children;function x(e,r,i){return function(i){var s,a=t.map(arguments,function(e){return"function"==(s=v(e))||"object"==s||"array"==s||null==e?e:n.createFragment(e)});return a.length<1?this:(this.each(function(t){e.apply(r,[this,a,t>0])}),this)}}function b(e,n){return function(){var r=o.call(arguments),i=t.map(this,function(t,i){return e.apply(n,[t].concat(r))});return j(y(i))}}function w(e,t,n){return function(r){o.call(arguments);var i=this.map(function(i,s){return e.apply(t,n?[s]:[s,r])});return n&&r?i.filter(r):i}}function _(e,t,n){return function(r,i){o.call(arguments);var s=this.map(function(s,a){return e.apply(t,n?[a,r]:[a,i,r])});return n&&i?s.filter(i):s}}function E(e,t){return function(){var n=o.call(arguments);return this.each(function(r,i){e.apply(t,[this].concat(n))}),this}}function C(e,n,r){return function(i){return t.isDefined(i)?(u.call(this,function(t,s){var a;a=r?d(t,i,s,r(t)):i,e.apply(n,[t,a])}),this):this[0]?e.apply(n,[this[0]]):void 0}}var S,M=t.klass({klassName:"SkNodeList",init:function(e,i){var s,o,l,u;if(e&&(this.context=i=i||n.doc(),m(e)?(this.selector=e,(s="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:h.exec(e))?s[1]?(o=n.createFragment(e),t.isPlainObject(i)&&(u=i)):(l=r.byId(s[2],n.ownerDoc(i)))&&(o=[l]):(t.isString(i)&&(i=r.find(i)),o=r.descendants(i,e))):o=!n.isWindow(e)&&p(e)?e:[e]),o&&(a.apply(this,o),u))for(var c in u)t.isFunction(this[c])?this[c](u[c]):this.attr(c,u[c]);return this}}),j=function(){i=function(e){return e instanceof M},init=function(e,t){return new M(e,t)};var e=function(t,n){return g(t)?(e.ready(function(){t(e)}),h):i(t)?t:n&&i(n)&&m(t)?n.find(t):init(t,n)},h=e(document);e.fn=M.prototype,t.mixin(e.fn,{length:0,map:function(n){return e(y(t.map(this,function(e,t){return n.call(e,t,e)})))},slice:function(){return e(o.apply(this,arguments))},forEach:function(){return u.apply(this,arguments)},get:function(e){return void 0===e?o.call(this):this[e>=0?e:e+this.length]},indexOf:function(){return c.apply(this,arguments)},sort:function(){return f.apply(this,arguments)},toArray:function(){return o.call(this)},size:function(){return this.length},remove:function(e){return e?this.find(e).remove():(this.each(function(e,t){n.remove(t)}),this)},each:function(e){return t.each(this,e),this},filter:function(t){return g(t)?this.not(this.not(t)):e(l.call(this,function(e){return r.matches(e,t)}))},add:function(t,n){return e(y(this.toArray().concat(e(t,n).toArray())))},is:function(e){if(this.length>0){if(t.isString(e))return s.call(this,function(t){return r.matches(t,e)});if(t.isArrayLike(e))return s.call(this,function(n){return t.inArray(n,e)>-1});if(t.isHtmlNode(e))return s.call(this,function(t){return t==e})}return!1},not:function(t){var n=[];if(g(t)&&void 0!==t.call)this.each(function(e,r){t.call(this,e,r)||n.push(this)});else{var r="string"==typeof t?this.filter(t):p(t)&&g(t.item)?o.call(t):e(t);this.forEach(function(e){r.indexOf(e)<0&&n.push(e)})}return e(n)},has:function(t){return this.filter(function(){return k(t)?n.contains(this,t):e(this).find(t).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:w(r.descendants,r),closest:w(r.closest,r),parents:w(r.ancestors,r),parentsUntil:_(r.ancestors,r),parent:w(r.parent,r),children:w(r.children,r),contents:b(n.contents,n),empty:E(n.empty,n),html:C(n.html,n),pluck:function(e){return t.map(this,function(t){return t[e]})},pushStack:function(t){var n=e(t);return n.prevObject=this,n},replaceWith:function(e){return this.before(e).remove()},wrap:function(t){var n="function"==typeof t;return this.each(function(r){e(this).wrapAll(n?t.call(this,r):t)})},wrapAll:function(t){var n;return this[0]&&("function"==typeof t&&(t=t.call(this[0])),n=e(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&n.insertBefore(this[0]),n.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(t){return"function"==typeof t?this.each(function(n){e(this).wrapInner(t.call(this,n))}):this.each(function(){var n=e(this),r=n.contents();r.length?r.wrapAll(t):n.append(t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){e(this).replaceWith(this.childNodes)}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},toggle:function(t){return this.each(function(){var n=e(this);(void 0===t?"none"==n.css("display"):t)?n.show():n.hide()})},prev:function(t){return e(this.pluck("previousElementSibling")).filter(t||"*")},prevAll:w(r.previousSiblings,r),next:function(t){return e(this.pluck("nextElementSibling")).filter(t||"*")},nextAll:w(r.nextSiblings,r),siblings:w(r.siblings,r),index:function(t){return t?this.indexOf(e(t)[0]):this.parent().children().indexOf(this[0])}}),e.fn.detach=e.fn.remove,e.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};n.traverse;return e.fn.after=x(n.after,n),e.fn.prepend=x(n.prepend,n),e.fn.before=x(n.before,n),e.fn.append=x(n.append,n),t.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(t){for(var r,i=[],s=e(t),o=s.length-1,l=0;l<=o;l++)r=l===o?this:this.clone(!0),e(s[l])[n](r),a.apply(i,r.get());return this.pushStack(i)}}),e}();return(S=j).fn.scrollParent=function(e){var t=this.css("position"),n="absolute"===t,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,i=this.parents().filter(function(){var e=S(this);return(!n||"static"!==e.css("position"))&&r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==t&&i.length?i:S(this[0].ownerDocument||document)},function(e){e.fn.end=function(){return this.prevObject||e()},e.fn.andSelf=function(){return this.add(this.prevObject||e())},e.fn.addBack=function(e){return this.prevObject?e?this.add(this.prevObject.filter(e)):this.add(this.prevObject):this},"filter,add,not,eq,first,last,find,closest,parents,parent,children,siblings,prev,prevAll,next,nextAll".split(",").forEach(function(t){var n=e.fn[t];e.fn[t]=function(){var e=n.apply(this,arguments);return e.prevObject=this,e}})}(j),function(e){var s;e.fn.query=e.fn.find,e.fn.place=function(e,s){return t.isString(e)?e=r.descendant(e):i(e)&&(e=e[0]),this.each(function(t,r){switch(s){case"before":n.before(e,r);break;case"after":n.after(e,r);break;case"replace":n.replace(e,r);break;case"only":n.empty(e),n.append(e,r);break;case"first":n.prepend(e,r);break;default:n.append(e,r)}})},e.fn.addContent=function(e,n){return e.template&&(e=t.substitute(e.template,e)),this.append(e)},e.fn.disableSelection=(s="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(s+".ui-disableSelection",function(e){e.preventDefault()})}),e.fn.enableSelection=function(){return this.off(".ui-disableSelection")},e.fn.reflow=function(){return n.reflow(this[0])},e.fn.isBlockNode=function(){return n.isBlockNode(this[0])}}(j),j.fn.plugin=function(e,t){var n=o.call(arguments,1),r=this,i=this;return this.each(function(){i=plugins.instantiate.apply(r,[this,e].concat(n))}),i},j.wraps={wrapper_node_operation:x,wrapper_map:b,wrapper_value:C,wrapper_selector:w,wrapper_some_chk:function(e,t){return function(){var n=o.call(arguments);return s.call(this,function(r){return e.apply(t,[r].concat(n))})}},wrapper_selector_until:_,wrapper_every_act_firstArgFunc:function(e,t,n){return function(r){var i=o.call(arguments);return u.call(this,function(s,a){var o=d(s,r,a,n(s));e.apply(t,[s,o].concat(i.slice(1)))}),this}},wrapper_every_act:E,wrapper_name_value:function(e,n,r){return function(i,s){return t.isPlainObject(i)||t.isDefined(s)?(u.call(this,function(t,a){var o;o=r?d(t,s,a,r(t,i)):s,e.apply(n,[t,i,o])}),this):this[0]?e.apply(n,[this[0],i]):void 0}}},e.attach("domx.query",j)}),define("skylark-domx-query/main",["./query","skylark-domx-styler"],function(e,t){return e.fn.disabled=e.wraps.wrapper_name_value(t.disabled,t),e.fn.style=e.wraps.wrapper_name_value(t.css,t),e.fn.css=e.wraps.wrapper_name_value(t.css,t),e.fn.hasClass=e.wraps.wrapper_some_chk(t.hasClass,t),e.fn.addClass=e.wraps.wrapper_every_act_firstArgFunc(t.addClass,t,t.className),e.fn.removeClass=e.wraps.wrapper_every_act_firstArgFunc(t.removeClass,t,t.className),e.fn.toggleClass=e.wraps.wrapper_every_act_firstArgFunc(t.toggleClass,t,t.className),e.fn.replaceClass=function(e,t){return this.removeClass(t),this.addClass(e),this},e.fn.replaceClass=function(e,t){return this.removeClass(t),this.addClass(e),this},e}),define("skylark-domx-query",["skylark-domx-query/main"],function(e){return e}),define("skylark-domx-velm/velm",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-finder","skylark-domx-query"],function(e,t,n,r,i){var s=Array.prototype.map,a=Array.prototype.slice,o=t.klass({klassName:"VisualElement",_construct:function(e){t.isString(e)&&(e="<"===(e=t.trim(e)).charAt(0)?n.createFragment(e)[0]:document.getElementById(e)),this._elm=e}});o.prototype.$=o.prototype.query=function(e){return i(e,this._elm)},o.prototype.elm=function(){return this._elm};var l=new o(document.body),u=function(e){return e?e instanceof o?e:new o(e):l};return t.mixin(u,{batch:function(e,t,n){return e.forEach(function(e){var r=e instanceof o?e:u(e);r[t].apply(r,n)}),this},root:new o(document.body),VisualElement:o,partial:function(e,t){var n={};n[e]=t,o.partial(n)},delegate:function(e,n,r){var i={};e.forEach(function(e){var l=e;r&&r[e]&&(l=r[e]),i[e]=function(e,n){return function(){var r=this._elm,i=e.apply(n,[r].concat(a.call(arguments)));if(i){if(i===n)return this;i instanceof HTMLElement?i=new o(i):t.isArrayLike(i)&&(i=s.call(i,function(e){return e instanceof HTMLElement?new o(e):e}))}return i}}(n[l],n)}),o.partial(i)}}),u.delegate(["ancestor","ancestors","children","descendant","find","findAll","firstChild","lastChild","matches","nextSibling","nextSiblings","parent","previousSibling","previousSiblings","siblings"],r),u.find=function(e){return"body"===e?this.root:this.root.descendant(e)},u.delegate(["after","append","before","clone","contains","contents","empty","fullscreen","html","isChildOf","isDocument","isInDocument","isWindow","ownerDoc","prepend","remove","removeChild","replace","reverse","throb","traverse","wrapper","wrapperInner","unwrap"],n),e.attach("domx.velm",u)}),define("skylark-domx-velm/main",["./velm","skylark-domx-styler"],function(e,t){e.delegate(["addClass","className","css","disabled","hasClass","hide","isInvisible","removeClass","show","toggleClass"],t);return["position","left","top","right","bottom","width","height","border","borderLeft","borderTop","borderRight","borderBottom","borderColor","display","overflow","margin","marginLeft","marginTop","marginRight","marginBottom","padding","paddingLeft","paddingTop","paddingRight","paddingBottom","color","background","backgroundColor","opacity","fontSize","fontWeight","textAlign","textDecoration","textTransform","cursor","zIndex"].forEach(function(t){var n=t;e.VisualElement.prototype[n]=function(e){return this.css(t,e),this}}),e}),define("skylark-domx-velm",["skylark-domx-velm/main"],function(e){return e}),define("skylark-domx-data/main",["./data","skylark-domx-velm","skylark-domx-query"],function(e,t,n){return t.delegate(["attr","data","prop","removeAttr","removeData","text","val"],e),n.fn.text=n.wraps.wrapper_value(e.text,e,e.text),n.fn.attr=n.wraps.wrapper_name_value(e.attr,e,e.attr),n.fn.removeAttr=n.wraps.wrapper_every_act(e.removeAttr,e),n.fn.prop=n.wraps.wrapper_name_value(e.prop,e,e.prop),n.fn.removeProp=n.wraps.wrapper_every_act(e.removeProp,e),n.fn.data=n.wraps.wrapper_name_value(e.data,e),n.fn.removeData=n.wraps.wrapper_every_act(e.removeData),n.fn.val=n.wraps.wrapper_value(e.val,e,e.val),e}),define("skylark-domx-data",["skylark-domx-data/main"],function(e){return e}),define("skylark-domx-eventer/eventer",["skylark-langx/skylark"],function(e){return e.attach("domx.eventer",function e(){return e})}),define("skylark-domx-eventer/compatible",["skylark-langx","./eventer"],function(e,t){var n={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};return t.compatible=function(t,r){!r&&t.isDefaultPrevented||(r||(r=t),e.each(n,function(n,i){var s=r[n];t[n]=function(){return this[i]=e.returnTrue,s&&s.apply(r,arguments)},t[i]=e.returnFalse}));return t}}),define("skylark-domx-eventer/proxy",["skylark-langx","./eventer","./compatible"],function(e,t,n){var r=/^([A-Z]|returnValue$|layer[XY]$)/;return t.proxy=function(t,i){var s,a={originalEvent:t};for(s in t)"keyIdentifier"===s||r.test(s)||void 0===t[s]||(a[s]=t[s]);i&&e.mixin(a,i);return n(a,t)}}),define("skylark-domx-eventer/event-bindings",["skylark-langx","skylark-domx-finder","skylark-domx-noder","./eventer","./proxy"],function(e,t,n,r,i){var s="onfocusin"in window,a={focus:"focusin",blur:"focusout"},o={mouseenter:"mouseover",mouseleave:"mouseout"},l=function(e){return o[e]||s&&a[e]||e},u=e.klass({init:function(e,t){this._target=e,this._event=t,this._bindings=[]},add:function(r,s){var a=this._bindings,u={fn:r,options:e.mixin({},s)};a.push(u);var c=this;if(!c._listener){c._listener=function(r){var s=this,a=i(r),l=r._args,u=c._bindings,f=a.namespace;l=e.isDefined(l)?[a].concat(l):[a],a.type=c._event,e.each(u,function(r,i){var u=s;if(a.isImmediatePropagationStopped&&a.isImmediatePropagationStopped())return!1;var h=i.fn,d=i.options||{},p=d.selector,m=d.one,y=d.data;if(!f||f==d.ns||-1!==d.ns.indexOf(f)){if(p){if(!(u=t.closest(a.target,p))||u===s)return;e.mixin(a,{currentTarget:u,liveFired:s})}var g=c._event;if(g in o){var v=a.relatedTarget;if(v&&(v===u||n.contains(u,v)))return}e.isDefined(y)&&(a.data=y),m&&c.remove(h,d),!1===(h.handleEvent?h.handleEvent.apply(h,l):d.ctx?h.apply(d.ctx,l):h.apply(u,l))&&(a.preventDefault(),a.stopPropagation())}})};var f=c._event;c._target.addEventListener?c._target.addEventListener(l(f),c._listener,!1):console.warn("invalid eventer object",c._target)}},remove:function(t,n){var r,i;(n=e.mixin({},n)).ns&&(i=n.ns,r=new RegExp("(?:^| )"+i.replace(" "," .* ?")+"(?: |$)")),this._bindings=this._bindings.filter(function(e){var i=(!t||t===e.fn)&&(!r||r.test(e.options.ns))&&(!n.selector||n.selector==e.options.selector);return!i}),0==this._bindings.length&&(this._target.removeEventListener&&this._target.removeEventListener(l(this._event),this._listener,!1),this._listener=null)}});return r.EventBindings=u}),define("skylark-domx-eventer/special-events",["skylark-langx","skylark-domx-browser","./eventer"],function(e,t,n){var r={};return t.support.transition&&(r.transitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end}),n.specialEvents=r}),define("skylark-domx-eventer/parse",[],function(){return function(e){if(e){var t=(""+e).split(".");return{type:t[0],ns:t.slice(1).sort().join(" ")}}return{type:null,ns:null}}}),define("skylark-domx-eventer/events-handler",["skylark-langx","./eventer","./event-bindings","./special-events","./parse"],function(e,t,n,r,i){var s=e.klass({init:function(e){this._target=e,this._handler={}},register:function(t,s,a){var o=i(t),t=o.type,l=r[t],u=l&&(l.bindType||l.bindEventName),c=this._handler;void 0===c[t]&&(c[t]=new n(this._target,u||t)),c[t].add(s,e.mixin({ns:o.ns},a))},unregister:function(t,n,r){var s=this._handler,a=i(t);if(t=a.type){var o=s[t];o&&o.remove(n,e.mixin({ns:a.ns},r))}else for(t in s){var o=s[t];o.remove(n,e.mixin({ns:a.ns},r))}}});return t.EventsHandler=s}),define("skylark-domx-eventer/find-handler",["skylark-langx","./eventer","./events-handler"],function(e,t,n){var r={};return t.findHandler=function(t){var i=e.uid(t),s=r[i];s||(s=r[i]=new n(t));return s}}),define("skylark-domx-eventer/clear",["skylark-langx","./eventer","./find-handler"],function(e,t,n){return t.clear=function(e){return n(e).unregister(),this}}),define("skylark-domx-eventer/native-event-ctors",["skylark-langx","./eventer"],function(e,t){var n=[window.CustomEvent,window.CompositionEvent,window.DragEvent,window.Event,window.FocusEvent,window.KeyboardEvent,window.MessageEvent,window.MouseEvent,window.MouseScrollEvent,window.MouseWheelEvent,window.MutationEvent,window.ProgressEvent,window.TextEvent,window.TouchEvent,window.UIEvent,window.WheelEvent,window.ClipboardEvent];return t.NativeEventCtors=n}),define("skylark-domx-eventer/native-events",["skylark-langx","./eventer"],function(e,t){return t.NativeEvents={compositionstart:1,compositionend:1,compositionupdate:1,beforecopy:16,beforecut:16,beforepaste:16,copy:16,cut:16,paste:16,drag:2,dragend:2,dragenter:2,dragexit:2,dragleave:2,dragover:2,dragstart:2,drop:2,abort:3,change:3,error:3,selectionchange:3,submit:3,reset:3,fullscreenchange:3,fullscreenerror:3,focus:4,blur:4,focusin:4,focusout:4,keydown:5,keypress:5,keyup:5,message:6,click:7,contextmenu:7,dblclick:7,mousedown:7,mouseup:7,mousemove:7,mouseover:7,mouseout:7,mouseenter:7,mouseleave:7,progress:11,textInput:12,tap:13,touchstart:13,touchmove:13,touchend:13,load:14,resize:14,select:14,scroll:14,unload:14,wheel:15}}),define("skylark-domx-eventer/create",["skylark-langx","./eventer","./native-event-ctors","./native-events","./parse","./compatible"],function(e,t,n,r,i,s){var a=function(){return function(t,a){e.isString(t)?a=a||{}:t=(a=t||{}).type||"";var o=i(t);t=o.type,a=e.mixin({bubbles:!0,cancelable:!0},a),o.ns&&(a.namespace=o.ns);var l=function(e){var t=r[e];t||(t=0);return n[t]}(t),u=new l(t,a);return e.safeMixin(u,a),s(u)}}();return t.create=a}),define("skylark-domx-eventer/trigger",["skylark-langx","./eventer","./create"],function(e,t,n){return t.trigger=function(e,t,r){var i;i=t instanceof Event?t:n(t,r);i._args=r;var s=e.dispatchEvent||e.trigger;s?s.call(e,i):console.warn("The evented parameter is not a eventable object");return this}}),define("skylark-domx-eventer/focused",["skylark-langx","./eventer","./trigger"],function(e,t,n){var r=[],i=e.loop(function(){for(var e=0;e<r.length;e++)n(r[e],"focused");r=[]});return i.start(),t.focused=function(e){r.includes(e)||r.push(e)}}),define("skylark-domx-eventer/is-native-event",["skylark-langx","./eventer","./native-events"],function(e,t,n){return t.isNativeEvent=function(t){if(e.isString(t))return!!n[t];if(e.isArray(t)){for(var r=0;r<t.length;r++)if(n[t])return!1;return t.length>0}}}),define("skylark-domx-eventer/keys",["skylark-langx","./eventer"],function(e,t){return t.keys={backspace:8,comma:188,delete:46,down:40,end:35,enter:13,escape:27,home:36,left:37,page_down:34,page_up:33,period:190,right:39,space:32,tab:9,up:38}}),define("skylark-domx-eventer/is-handler",["skylark-langx","./eventer"],function(e,t){return function(t){return t&&(e.isFunction(t)||e.isFunction(t.handleEvent))}}),define("skylark-domx-eventer/off",["skylark-langx","./eventer","./find-handler","./is-handler"],function(e,t,n,r){return t.off=function t(i,s,a,o){if(e.isPlainObject(s))return e.each(s,function(e,n){t(i,e,a,n)}),this;e.isString(a)||r(o)||!1===o||(o=a,a=void 0);!1===o&&(o=e.returnFalse);"string"==typeof s&&(s=s.indexOf(",")>-1?s.split(","):s.split(/\s/));var l=n(i);s&&s.forEach(function(e){l.unregister(e,o,{selector:a})});return this}}),define("skylark-domx-eventer/on",["skylark-langx","./eventer","./find-handler","./is-handler"],function(e,t,n,r){return t.on=function t(i,s,a,o,l,u,c){if(e.isPlainObject(s))return e.each(s,function(e,n){t(i,e,a,o,n,c)}),this;e.isString(a)||r(l)||(c=u,u=l,l=o,o=a,a=void 0);r(o)&&(c=u,u=l,l=o,o=void 0);e.isBoolean(u)&&(c=u,u=void 0);!1===l&&(l=e.returnFalse);"string"==typeof s&&(s=s.indexOf(",")>-1?s.split(","):s.split(/\s/));var f=n(i);s.forEach(function(e){if("ready"==e)return ready(l);f.register(e,l,{data:o,selector:a,ctx:u,one:!!c})});return this}}),define("skylark-domx-eventer/one",["skylark-langx","./eventer","./on"],function(e,t,n){return t.one=function(...e){return n(...e,!0),this}}),define("skylark-domx-eventer/ready",["skylark-langx","./eventer"],function(e,t){var n=/complete|loaded|interactive/;return t.ready=function(t){n.test(document.readyState)&&document.body?e.defer(t):document.addEventListener("DOMContentLoaded",t,!1);return this}}),define("skylark-domx-eventer/resized",["skylark-langx","./eventer","./trigger"],function(e,t,n){var r=[],i=e.loop(function(){for(var e=0;e<r.length;e++)n(r[e],"resized");r=[]});return i.start(),t.resized=function(e){r.includes(e)||r.push(e)}}),define("skylark-domx-eventer/shortcuts",["skylark-langx","skylark-domx-data","./eventer","./keys"],function(e,t,n,r){return n.shortcuts=function(e){var n=t.data(e,"shortcuts");if(!n){n={},t.data(e,"shortcuts",n);var i=function(e,t){var n=t.metaKey||t.ctrlKey;if(e.ctrl==n&&e.alt==t.altKey&&e.shift==t.shiftKey&&(t.keyCode==e.keyCode||t.charCode&&t.charCode==e.charCode))return t.preventDefault(),"keydown"==t.type&&e.fn(t),!0};on(e,"keyup keypress keydown",function(e){if(!/INPUT|TEXTAREA/.test(e.target.nodeName))for(var t in n)i(n[t],e)})}return{add:function(e,t){(e.indexOf(",")>-1?e.toLowerCase().split(","):e.toLowerCase().split(" ")).forEach(function(e){var i={fn:t,alt:!1,ctrl:!1,shift:!1};e.split("+").forEach(function(e){switch(e){case"alt":case"ctrl":case"shift":i[e]=!0;break;default:i.charCode=e.charCodeAt(0),i.keyCode=r[e]||e.toUpperCase().charCodeAt(0)}});var s=(i.ctrl?"ctrl":"")+","+(i.alt?"alt":"")+","+(i.shift?"shift":"")+","+i.keyCode;n[s]=i})}}}}),define("skylark-domx-eventer/stop",["skylark-langx","./eventer"],function(e,t){return t.stop=function(e){window.document.all&&(e.keyCode=0);e.preventDefault&&(e.preventDefault(),e.stopPropagation());return this}}),define("skylark-domx-eventer/main",["skylark-langx","skylark-domx-velm","skylark-domx-query","./eventer","./clear","./compatible","./event-bindings","./events-handler","./find-handler","./focused","./is-native-event","./keys","./native-event-ctors","./native-events","./off","./on","./one","./proxy","./ready","./resized","./shortcuts","./special-events","./stop","./trigger"],function(e,t,n,r){e.each(r.NativeEvents,function(e){r[e]=function(t,n,i,s){return arguments.length>1?r.on(t,e,n,i,s):("focus"==e?t.focus&&t.focus():"blur"==e?t.blur&&t.blur():"click"==e?t.click&&t.click():r.trigger(t,e),this)}});var i=["off","on","one","trigger"];return e.each(r.NativeEvents,function(e){i.push(e)}),t.delegate(i,r),e.each(i,function(e,t){n.fn[t]=n.wraps.wrapper_every_act(r[t],r)}),n.ready=r.ready,r}),define("skylark-domx-eventer",["skylark-domx-eventer/main"],function(e){return e}),define("skylark-domx-forms/forms",["skylark-langx/skylark"],function(e){return e.attach("domx.forms",{})}),define("skylark-domx-forms/deserialize",["skylark-langx/langx","skylark-domx-query","./forms"],function(e,t,n){function r(e,t,n){var r=n[e];return void 0===r?n[e]=[t]:r.push(t),n}var i={checked:["radio","checkbox"],selected:["option","select-one","select-multiple"],value:["button","color","date","datetime","datetime-local","email","hidden","month","number","password","range","reset","search","submit","tel","text","textarea","time","url","week"]};function s(t,n,r,s,a){var o=function(t){var n=function(e){return(e.type||e.nodeName).toLowerCase()}(t),r=void 0;return e.each(i,function(t,i){if(e.inArray(n,i)>-1)return r=t,!1}),r}(t);if("value"==o&&n==s)t.value=r,a.call(t,r);else if("checked"==o||"selected"==o){var l=[];t.options?e.each(t.options,function(e,t){l.push(t)}):l.push(t),t.multiple&&0==s&&(t.selectedIndex=-1),e.each(l,function(e,t){t.value==r&&(t[o]=!0,a.call(t,r))})}}var a={change:e.noop,complete:e.noop};return n.deserialize=function(n,i,o){e.isFunction(o)&&(o={complete:o});o=e.extend(a,o||{}),i=function(t){var n={},i=/\+/g;e.isPlainObject(t)?(e.extend(n,t),e.each(n,function(t,r){e.isArray(r)||(n[t]=[r])})):e.isArray(t)?e.each(t,function(e,t){r(t.name,t.value,n)}):"string"==typeof t&&e.each(t.split("&"),function(e,t){var s=t.split("="),a=decodeURIComponent(s[0].replace(i,"%20")),o=decodeURIComponent(s[1].replace(i,"%20"));r(a,o,n)});return n}(i);var l=function(n,i){var s={},a=t(n).map(function(){return this.elements?e.makeArray(this.elements):this}).filter(i||":input:not(:disabled)").get();return e.each(a,function(e,t){r(t.name,t,s)}),s}(n,o.filter);return e.each(i,function(t,n){e.each(l[t],function(t,r){e.each(n,function(e,n){s(r,t,n,e,o.change)})})}),o.complete.call(n),this}}),define("skylark-domx-forms/serialize-array",["skylark-langx/langx","skylark-domx-data","./forms"],function(e,t,n){return n.serializeArray=function(n){var r,i,s,a=[],o=function(e){if(e.forEach)return e.forEach(o);a.push({name:r,value:e})};s=n.elements?n.elements:e.isArrayLike(n)?n:[n];return e.each(s,function(e,n){i=n.type,(r=n.name)&&"fieldset"!=n.nodeName.toLowerCase()&&!n.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&"file"!=i&&("radio"!=i&&"checkbox"!=i||n.checked)&&o(t.val(n))}),a}}),define("skylark-domx-forms/serialize-object",["skylark-langx/langx","./forms","./serialize-array"],function(e,t,n){return t.serializeObject=function(t){var r={};return e.each(n(t),function(t,n){var i=n.name,s=n.value;r[i]=void 0===r[i]?s:e.isArray(r[i])?r[i].concat(s):[r[i],s]}),r}}),define("skylark-domx-forms/serialize",["skylark-langx/langx","./forms","./serialize-array"],function(e,t,n){return t.serialize=function(e){var t=[];return n(e).forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")}}),define("skylark-domx-forms/main",["skylark-langx","skylark-domx-data","./forms","skylark-domx-velm","skylark-domx-query","./deserialize","./serialize-array","./serialize-object","./serialize"],function(e,t,n,r,i){return r.delegate(["deserialize","serializeArray","serializeObject","serialize"],n),i.fn.deserialize=i.wraps.wrapper_every_act(n.deserialize,n,n.deserialize),i.fn.serializeArray=function(){var e=[];return this.each(function(t,r){e=e.concat(n.serializeArray(r))}),e},i.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},i.fn.serializeObject=function(){var t={};return this.serializeArray().forEach(function(n){var r=n.name,i=n.value;t[r]=void 0===t[r]?i:e.isArray(t[r])?t[r].concat(i):[t[r],i]}),t},n}),define("skylark-domx-forms",["skylark-domx-forms/main"],function(e){return e}),define("skylark-domx-transits/transits",["skylark-langx/skylark","skylark-langx/langx"],function(e,t){function n(){return n}return t.mixin(n,{off:!1,speeds:{normal:400,fast:200,slow:600}}),e.attach("domx.transits",n)}),define("skylark-domx-geom/geom",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder","skylark-domx-styler"],function(e,t,n,r){"use strict";var i,s=/^(?:body|html)$/i,a=t.toPixel,o=n.offsetParent;function l(e){if(n.isWindow(e))return{left:0,top:0,right:0,bottom:0};var t=getComputedStyle(e);return{left:a(t.borderLeftWidth,e),top:a(t.borderTopWidth,e),right:a(t.borderRightWidth,e),bottom:a(t.borderBottomWidth,e)}}function u(e,t){if(void 0===t)return s.test(e.nodeName)?{top:0,left:0}:e.getBoundingClientRect();var n=o(e),r=u(n),i=g(e),a=l(n);return x(e,{top:t.top-r.top-i.top-a.top+(_(n)||0),left:t.left-r.left-i.left-a.left+(w(n)||0)}),this}function c(e,t){return void 0!==t?(u(e,t),f(e,t),this):e==window||e==document.documentElement||e==document.body?{top:0,left:0,bottom:window.innerHeight,right:window.innerWidth,height:window.innerHeight,width:window.innerWidth}:e.getBoundingClientRect?e.getBoundingClientRect():void 0}function f(e,n){if(void 0==n)return t.isWindow(e)?{width:e.innerWidth,height:e.innerHeight}:t.isDocument(e)?y(document):{width:e.offsetWidth,height:e.offsetHeight};var i="border-box"===r.css(e,"box-sizing"),s={width:n.width,height:n.height};if(!i){var a=v(e),o=l(e);void 0!==s.width&&""!==s.width&&null!==s.width&&(s.width=s.width-a.left-a.right-o.left-o.right),void 0!==s.height&&""!==s.height&&null!==s.height&&(s.height=s.height-a.top-a.bottom-o.top-o.bottom)}return r.css(e,s),this}function h(e,t){if(void 0==t)return{width:e.clientWidth||e.innerWidth,height:e.clientHeight||e.innerHeight};var n="border-box"===r.css(e,"box-sizing"),i={width:t.width,height:t.height};if(n){var s=l(e);void 0!==i.width&&(i.width=i.width+s.left+s.right),void 0!==i.height&&(i.height=i.height+s.top+s.bottom)}else{var a=v(e);void 0!==i.width&&(i.width=i.width-a.left-a.right),void 0!==i.height&&(i.height=i.height-a.top-a.bottom)}return r.css(e,i),this}function d(e,t){return void 0==t?p(e).height:(p(e,{height:t}),this)}function p(e,t){var n=h(e),i=v(e);if(void 0===t)return{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom};var s="border-box"===r.css(e,"box-sizing"),a={width:t.width,height:t.height};if(s){var o=l(e);void 0!==a.width&&""!==a.width&&null!==a.width&&(a.width=a.width+i.left+i.right+o.left+o.right),void 0!==a.height&&""!==a.height&&null!==a.height&&(a.height=a.height+i.top+i.bottom+o.top+o.bottom)}return r.css(e,a),this}function m(e,t){return void 0==t?p(e).width:(p(e,{width:t}),this)}function y(e){var t=e.documentElement,n=e.body,r=Math.max,i=r(t.scrollWidth,n.scrollWidth),s=r(t.clientWidth,n.clientWidth),a=r(t.offsetWidth,n.offsetWidth),o=r(t.scrollHeight,n.scrollHeight),l=r(t.clientHeight,n.clientHeight),u=r(t.offsetHeight,n.offsetHeight);return{width:i<a?s:i,height:o<u?l:o}}function g(e){if(n.isWindow(e))return{left:0,top:0,right:0,bottom:0};var t=getComputedStyle(e);return{left:a(t.marginLeft),top:a(t.marginTop),right:a(t.marginRight),bottom:a(t.marginBottom)}}function v(e){if(n.isWindow(e))return{left:0,top:0,right:0,bottom:0};var t=getComputedStyle(e);return{left:a(t.paddingLeft),top:a(t.paddingTop),right:a(t.paddingRight),bottom:a(t.paddingBottom)}}function k(e,t){if(void 0===t){var n=e.getBoundingClientRect(),r=e.ownerDocument.defaultView;return{left:n.left+r.pageXOffset,top:n.top+r.pageYOffset}}var i=o(e),s=k(i),a=g(e),u=l(i);return x(e,{top:t.top-s.top-a.top-u.top,left:t.left-s.left-a.left-u.left}),this}function x(e,t){if(void 0==t){var n=o(e),i=u(e),s=u(n),a=g(e),c=l(n);return{top:i.top-s.top-c.top-a.top,left:i.left-s.left-c.left-a.left}}var n=o(e),f={top:t.top,left:t.left};return"static"==r.css(e,"position")&&(f.position="relative"),r.css(e,f),this}function b(e,t){if(void 0===t){var n=o(e),r=c(e),i=u(n),s=(g(e),l(n));return{top:r.top-i.top-s.top,left:r.left-i.left-s.left,width:r.width,height:r.height}}return x(e,t),f(e,t),this}function w(e,t){9===e.nodeType?e=e.defaultView:e==document.body&&(e=document.scrollingElement||document.documentElement);var n="scrollLeft"in e;return void 0===t?n?e.scrollLeft:e.pageXOffset:(n?e.scrollLeft=t:e.scrollTo(t,e.scrollY),this)}function _(e,t){9===e.nodeType?e=e.defaultView:e==document.body&&(e=document.scrollingElement||document.documentElement);var n="scrollTop"in e;return void 0===t?n?e.scrollTop:e.pageYOffset:(n?e.scrollTop=t:e.scrollTo(e.scrollX,t),this)}function E(e){return c(e=e||window)}function C(){return C}return t.mixin(C,{borderExtents:l,boundingHeight:function(e,t){return void 0==t?f(e).height:(f(e,{height:t}),this)},boundingPosition:u,boundingRect:c,boundingSize:f,boundingWidth:function(e,t){return void 0==t?f(e).width:(f(e,{width:t}),this)},clientHeight:function(e,t){return void 0==t?h(e).height:h(e,{height:t})},clientSize:h,clientWidth:function(e,t){return void 0==t?h(e).width:(h(e,{width:t}),this)},contentHeight:d,contentRect:function(e){var t=h(e),n=v(e);return{left:n.left,top:n.top,width:t.width-n.left-n.right,height:t.height-n.top-n.bottom}},contentSize:p,contentWidth:m,getDocumentSize:y,hasScrollbar:function(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)},height:d,inview:function(e,t){var n=function(e,t){var n={};return t=+t||0,n.width=(n.right=e.right+t)-(n.left=e.left-t),n.height=(n.bottom=e.bottom+t)-(n.top=e.top-t),n}(c(e),t),r=E();return!!n&&n.bottom>=0&&n.right>=0&&n.top<=r.height&&n.left<=r.width},marginExtents:g,marginRect:function(e){var t=b(e),n=g(e);return{left:t.left,top:t.top,width:t.width+n.left+n.right,height:t.height+n.top+n.bottom}},marginSize:function(e){var t=f(e),n=g(e);return{width:t.width+n.left+n.right,height:t.height+n.top+n.bottom}},offsetParent:o,paddingExtents:v,pagePosition:k,pageRect:function(e,t){if(void 0===t){var n=e.getBoundingClientRect(),r=e.ownerDocument.defaultView;return{left:n.left+r.pageXOffset,top:n.top+r.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}}return k(e,t),f(e,t),this},relativePosition:x,relativeRect:b,scrollbarWidth:function(){if(void 0!==i)return i;var e,t,s=n.createFragment("<div style='display:block;position:absolute;width:200px;height:200px;overflow:hidden;'><div style='height:300px;width:auto;'></div></div>")[0],a=s.childNodes[0];n.append(document.body,s),e=a.offsetWidth,r.css(s,"overflow","scroll"),t=a.offsetWidth,e===t&&(t=s[0].clientWidth);return n.remove(s),i=e-t},scrollIntoView:function(e,t){var n,r,i,s,a,o,l=e.parentNode,u=function(e,t){var n,r,i=e;n=r=0;for(;i&&i!=t&&i.nodeType;)n+=i.offsetLeft||0,r+=i.offsetTop||0,i=i.offsetParent;return{x:n,y:r}}(e,l);n=u.x,r=u.y,i=e.offsetWidth,s=e.offsetHeight,a=l.clientWidth,o=l.clientHeight,"end"==t?(n-=a-i,r-=o-s):"center"==t&&(n-=a/2-i/2,r-=o/2-s/2);return l.scrollLeft=n,l.scrollTop=r,this},scrollLeft:w,scrollTop:_,scrollBy:function(e,t,n){e.scrollLeft+=t,e.scrollTop+=n},size:p,testAxis:function(e){var t=e.offsetTop,n=e.offsetLeft,r=e.offsetWidth,i=e.offsetHeight;for(;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,n+=e.offsetLeft;var s={x:0,y:0};t<window.pageYOffset?s.y=t-window.pageYOffset:t+i>window.pageYOffset+window.innerHeight&&(s.y=t+i-(window.pageYOffset+window.innerHeight));n<window.pageXOffset?s.x=n-window.pageXOffset:n+r>window.pageXOffset+window.innerWidth&&(s.x=n+r-(window.pageXOffset+window.innerWidth));return s},viewportSize:E,width:m}),e.attach("domx.geom",C)}),define("skylark-domx-geom/posit",["skylark-langx/langx","skylark-domx-noder","skylark-domx-styler","./geom"],function(e,t,n,r){"use strict";var i=Math.max,s=Math.abs,a=/left|center|right/,o=/top|center|bottom/,l=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,c=/%$/;function f(e,t,n){return[parseFloat(e[0])*(c.test(e[0])?t/100:1),parseFloat(e[1])*(c.test(e[1])?n/100:1)]}function h(e,t){return parseInt(n.css(e,t),10)||0}var d={fit:{left:function(e,t){var n,r=t.within,s=r.isWindow?r.scrollLeft:r.offset.left,a=r.width,o=e.left-t.collisionPosition.marginLeft,l=s-o,u=o+t.collisionWidth-a-s;t.collisionWidth>a?l>0&&u<=0?(n=e.left+l+t.collisionWidth-a-s,e.left+=l-n):e.left=u>0&&l<=0?s:l>u?s+a-t.collisionWidth:s:l>0?e.left+=l:u>0?e.left-=u:e.left=i(e.left-o,e.left)},top:function(e,t){var n,r=t.within,s=r.isWindow?r.scrollTop:r.offset.top,a=t.within.height,o=e.top-t.collisionPosition.marginTop,l=s-o,u=o+t.collisionHeight-a-s;t.collisionHeight>a?l>0&&u<=0?(n=e.top+l+t.collisionHeight-a-s,e.top+=l-n):e.top=u>0&&l<=0?s:l>u?s+a-t.collisionHeight:s:l>0?e.top+=l:u>0?e.top-=u:e.top=i(e.top-o,e.top)}},flip:{left:function(e,t){var n,r,i=t.within,a=i.offset.left+i.scrollLeft,o=i.width,l=i.isWindow?i.scrollLeft:i.offset.left,u=e.left-t.collisionPosition.marginLeft,c=u-l,f=u+t.collisionWidth-o-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,d="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,p=-2*t.offset[0];c<0?((n=e.left+h+d+p+t.collisionWidth-o-a)<0||n<s(c))&&(e.left+=h+d+p):f>0&&((r=e.left-t.collisionPosition.marginLeft+h+d+p-l)>0||s(r)<f)&&(e.left+=h+d+p)},top:function(e,t){var n,r,i=t.within,a=i.offset.top+i.scrollTop,o=i.height,l=i.isWindow?i.scrollTop:i.offset.top,u=e.top-t.collisionPosition.marginTop,c=u-l,f=u+t.collisionHeight-o-l,h="top"===t.my[1],d=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];c<0?((r=e.top+d+p+m+t.collisionHeight-o-a)<0||r<s(c))&&(e.top+=d+p+m):f>0&&((n=e.top-t.collisionPosition.marginTop+d+p+m-l)>0||s(n)<f)&&(e.top+=d+p+m)}},flipfit:{left:function(){d.flip.left.apply(this,arguments),d.fit.left.apply(this,arguments)},top:function(){d.flip.top.apply(this,arguments),d.fit.top.apply(this,arguments)}}};return r.posit=function(c,p){var m,y,g,v,k,x,b=(p=e.extend({},p)).of,w=(S=p.within,M=S||window,j=t.isWindow(M),T=!!M&&9===M.nodeType,A=!j&&!T,z=r.marginSize(M),{element:M,isWindow:j,isDocument:T,offset:A?r.pagePosition(S):{left:0,top:0},scrollLeft:r.scrollLeft(M),scrollTop:r.scrollTop(M),width:z.width,height:z.height}),_=function(e){var t=e.isWindow||e.isDocument?"":n.css(e.element,"overflow-x"),i=e.isWindow||e.isDocument?"":n.css(e.element,"overflow-y"),s="scroll"===t||"auto"===t&&e.width<r.scrollWidth(e.element);return{width:"scroll"===i||"auto"===i&&e.height<r.scrollHeight(e.element)?r.scrollbarWidth():0,height:s?r.scrollbarWidth():0}}(w),E=(p.collision||"flip").split(" "),C={};var S,M,j,T,A,z;P=b,x=9===P.nodeType?{size:size(P),offset:{top:0,left:0}}:t.isWindow(P)?{size:r.size(P),offset:{top:r.scrollTop(P),left:r.scrollLeft(P)}}:P.preventDefault?{size:{width:0,height:0},offset:{top:P.pageY,left:P.pageX}}:{size:r.size(P),offset:r.pagePosition(P)},b.preventDefault&&(p.at="left top");var P;y=x.size.width,g=x.size.height,v=x.offset,k=e.extend({},v),e.each(["my","at"],function(){var e,t,n=(p[this]||"").split(" ");1===n.length&&(n=a.test(n[0])?n.concat(["center"]):o.test(n[0])?["center"].concat(n):["center","center"]),n[0]=a.test(n[0])?n[0]:"center",n[1]=o.test(n[1])?n[1]:"center",e=l.exec(n[0]),t=l.exec(n[1]),C[this]=[e?e[0]:0,t?t[0]:0],p[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===E.length&&(E[1]=E[0]);"right"===p.at[0]?k.left+=y:"center"===p.at[0]&&(k.left+=y/2);"bottom"===p.at[1]?k.top+=g:"center"===p.at[1]&&(k.top+=g/2);return m=f(C.at,y,g),k.left+=m[0],k.top+=m[1],function(t){var n,a,o=r.marginSize(t),l=o.width,u=o.height,c=h(t,"marginLeft"),x=h(t,"marginTop"),S=l+c+h(t,"marginRight")+_.width,M=u+x+h(t,"marginBottom")+_.height,j=e.extend({},k),T=f(C.my,o.width,o.height);"right"===p.my[0]?j.left-=l:"center"===p.my[0]&&(j.left-=l/2),"bottom"===p.my[1]?j.top-=u:"center"===p.my[1]&&(j.top-=u/2),j.left+=T[0],j.top+=T[1],n={marginLeft:c,marginTop:x},e.each(["left","top"],function(e,r){d[E[e]]&&d[E[e]][r](j,{targetWidth:y,targetHeight:g,elemWidth:l,elemHeight:u,collisionPosition:n,collisionWidth:S,collisionHeight:M,offset:[m[0]+T[0],m[1]+T[1]],my:p.my,at:p.at,within:w,elem:t})}),p.using&&(a=function(e){var n=v.left-j.left,r=n+y-l,a=v.top-j.top,o=a+g-u,c={target:{element:b,left:v.left,top:v.top,width:y,height:g},element:{element:t,left:j.left,top:j.top,width:l,height:u},horizontal:r<0?"left":n>0?"right":"center",vertical:o<0?"top":a>0?"bottom":"middle"};y<l&&s(n+r)<y&&(c.horizontal="center"),g<u&&s(a+o)<g&&(c.vertical="middle"),i(s(n),s(r))>i(s(a),s(o))?c.important="horizontal":c.important="vertical",p.using.call(this,e,c)}),r.pagePosition(t,e.extend(j,{using:a}))}(c)}}),define("skylark-domx-geom/scroll-to-top",["skylark-langx","skylark-domx-styler","./geom"],function(e,t,n){return n.scrollToTop=function(t,n,r,i){var s=parseInt(t.scrollTop),a=0,o=1e3*r/5,l=parseInt(n),u=setInterval(function(){++a<=o&&(t.scrollTop=(l-s)/o*a+s),a>=o+1&&(clearInterval(u),i&&e.debounce(i,1e3)())},5);return this}}),define("skylark-domx-geom/main",["skylark-langx/langx","./geom","skylark-domx-velm","skylark-domx-query","./posit","./scroll-to-top"],function(e,t,n,r){return n.delegate(["borderExtents","boundingPosition","boundingHeight","boundingRect","boundingSize","boundingWidth","clientHeight","clientSize","clientWidth","contentHeight","contentRect","contentSize","contentWidth","marginExtents","marginRect","marginSize","offsetParent","paddingExtents","pagePosition","pageRect","relativePosition","relativeRect","scrollIntoView","scrollLeft","scrollTop"],t,{}),r.fn.offset=r.wraps.wrapper_value(t.pagePosition,t,t.pagePosition),r.fn.scrollTop=r.wraps.wrapper_value(t.scrollTop,t),r.fn.scrollLeft=r.wraps.wrapper_value(t.scrollLeft,t),r.fn.position=function(n){if(!this.length)return this;if(n)return n.of&&n.of.length&&((n=e.clone(n)).of=n.of[0]),this.each(function(){t.posit(this,n)});var r=this[0];return t.relativePosition(r)},r.fn.offsetParent=r.wraps.wrapper_map(t.offsetParent,t),r.fn.boundingSize=r.wraps.wrapper_value(t.boundingSize,t),r.fn.width=r.wraps.wrapper_value(t.width,t,t.width),r.fn.height=r.wraps.wrapper_value(t.height,t,t.height),r.fn.clientSize=r.wraps.wrapper_value(t.clientSize,t),["width","height"].forEach(function(e){var n=e.replace(/./,function(e){return e[0].toUpperCase()});r.fn["outer"+n]=function(n,r){if(arguments.length?"boolean"!=typeof n&&(r=n,n=!1):(n=!1,r=void 0),void 0===r){var i=this[0];if(!i)return;var s=t.boundingSize(i);if(n){var a=t.marginExtents(i);s.width=s.width+a.left+a.right,s.height=s.height+a.top+a.bottom}return"width"===e?s.width:s.height}return this.each(function(i,s){var a={},o=t.marginExtents(s);"width"===e?(a.width=r,n&&(a.width=a.width-o.left-o.right)):(a.height=r,n&&(a.height=a.height-o.top-o.bottom)),t.boundingSize(s,a)})}}),r.fn.innerWidth=r.wraps.wrapper_value(t.clientWidth,t,t.clientWidth),r.fn.innerHeight=r.wraps.wrapper_value(t.clientHeight,t,t.clientHeight),t}),define("skylark-domx-geom",["skylark-domx-geom/main"],function(e){return e}),define("skylark-domx-transits/transit",["skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","./transits"],function(e,t,n,r,i,s,a){var o,l,u,c,f=t.normalizeCssEvent("TransitionEnd"),h=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,d=t.css3PropPrefix+"transform",p={};return p[o=t.normalizeCssProperty("transition-property")]=p[l=t.normalizeCssProperty("transition-duration")]=p[c=t.normalizeCssProperty("transition-delay")]=p[u=t.normalizeCssProperty("transition-timing-function")]="",a.transit=function(t,n,m,y,g,v){var k,x,b,w={},_=[],E="",C=this,S=!1,M=!1;e.isPlainObject(m)&&(y=m.easing,g=m.complete,v=m.delay,m=m.duration);e.isString(m)&&(m=a.speeds[m]);void 0===m&&(m=a.speeds.normal);m/=1e3,a.off&&(m=0);e.isFunction(y)?(g=y,eace="swing"):y=y||"swing";v?v/=1e3:v=0;for(k in n){var j=n[k];if(h.test(k))E+=k+"("+j+") ";else{if("scrollTop"===k&&(M=!0),"clip"==k&&e.isPlainObject(j)){if(w[k]="rect("+j.top+"px,"+j.right+"px,"+j.bottom+"px,"+j.left+"px)","auto"==i.css(t,"clip")){var T=r.size(t);i.css(t,"clip","rect(0px,"+T.width+"px,"+T.height+"px,0px)"),!0}}else w[k]=j;_.push(e.dasherize(k))}}x=f,E&&(w[d]=E,_.push(d));m>0&&(w[o]=_.join(", "),w[l]=m+"s",w[c]=v+"s",w[u]=y);b=function(e){if(S=!0,e){if(e.target!==e.currentTarget)return;s.off(e.target,x,b)}else s.off(t,x,b);i.css(t,p),g&&g.call(this)},m>0&&(s.on(t,x,b),e.debounce(function(){S||b.call(C)},1e3*(m+v)+25)());t.clientLeft,i.css(t,w),m<=0&&e.debounce(function(){S||b.call(C)},0)();M&&r.scrollToTop(t,n.scrollTop,m,g);return this}}),define("skylark-domx-transits/bounce",["skylark-langx/langx","skylark-domx-geom","skylark-domx-styler","./transits","./transit"],function(e,t,n,r,i){return r.bounce=function(r,s,a){var o,l,u,c,f=s.mode,h="hide"===f,d="show"===f,p=s.direction||"up",m=s.distance,y=s.times||5,g=2*y+(d||h?1:0),v=s.duration/g,k=s.easing,x="up"===p||"down"===p?"top":"left",b="up"===p||"left"===p,w=0,_=e.Deferred,E=[];if(u=n.css(r,x),!m){var C=t.size(r);m=("top"===x?C.height:C.width)/3}c=t.relativePosition(r)[x],d&&((l={opacity:1})[x]=u,n.css(r,"opacity",0),n.css(r,x,c+(b?2*-m:2*m)),E.push(S(r,l,v,k)));h&&(m/=Math.pow(2,y-1));function S(e,t,n,r){return function(){var s=new _;return i(e,t,n,r,function(){s.resolve()}),s.promise}}for((l={})[x]=u;w<y;w++)(o={})[x]=c+(b?-m:m),E.push(S(r,o,v,k)),E.push(S(r,l,v,k)),m=h?2*m:m/2;h&&((o={opacity:0})[x]=c+(b?-1*m:m),E.push(S(r,o,v,k)));return E.push(a),E.reduce(function(e,t,n,r){return e.then(t)},_.resolve()),this}}),define("skylark-domx-transits/emulate-transition-end",["skylark-langx/langx","skylark-domx-browser","skylark-domx-eventer","./transits"],function(e,t,n,r){return r.emulateTransitionEnd=function(e,r){var i=!1;n.one(e,"transitionEnd",function(){i=!0});return setTimeout(function(){i||n.trigger(e,t.support.transition.end)},r),this}}),define("skylark-domx-transits/show",["skylark-langx/langx","skylark-domx-styler","./transits","./transit"],function(e,t,n,r){return n.show=function(n,i,s){t.show(n),i&&(!s&&e.isFunction(i)&&(s=i,i="normal"),t.css(n,"opacity",0),r(n,{opacity:1,scale:"1,1"},i,s));return this}}),define("skylark-domx-transits/hide",["skylark-langx/langx","skylark-domx-styler","./transits","./transit"],function(e,t,n,r){return n.hide=function(n,i,s){i?(!s&&e.isFunction(i)&&(s=i,i="normal"),r(n,{opacity:0,scale:"0,0"},i,function(){t.hide(n),s&&s.call(n)})):t.hide(n);return this}}),define("skylark-domx-transits/explode",["skylark-langx/langx","skylark-domx-styler","skylark-domx-geom","skylark-domx-noder","skylark-domx-query","./transits","./transit","./show","./hide"],function(e,t,n,r,i,s,a,o,l){return s.explode=function(e,r,s){t.show(e),t.css(e,"visibility","hidden");var a,o,l,u,c,f=r.pieces?Math.round(Math.sqrt(r.pieces)):3,h=f,d="show"===r.mode,p=n.pagePosition(e),m=n.marginSize(e),y=Math.ceil(m.width/h),g=Math.ceil(m.height/f),v=[];function k(){v.push(this),v.length===f*h&&(t.css(e,{visibility:"visible"}),i(v).remove(),s())}for(var x=0;x<f;x++)for(l=p.top+x*g,c=x-(f-1)/2,a=0;a<h;a++)o=p.left+a*y,u=a-(h-1)/2,i(e).clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-a*y,top:-x*g}).parent().addClass(r.explodeClass||"ui-effects-explode").css({position:"absolute",overflow:"hidden",width:y,height:g,left:o+(d?u*y:0),top:l+(d?c*g:0),opacity:d?0:1}).transit({left:o+(d?0:u*y),top:l+(d?0:c*g),opacity:d?1:0},r.duration||500,r.easing,k);return this}}),define("skylark-domx-transits/fade",["skylark-langx/langx","skylark-domx-styler","./transits","./transit"],function(e,t,n,r){return n.fade=function(t,n,i,s){e.isFunction(i)&&(s=i,i={});return r(t,{opacity:n},(i=i||{}).duration,i.easing,s),this}}),define("skylark-domx-transits/fade-in",["skylark-langx/langx","skylark-domx-styler","./transits","./fade"],function(e,t,n,r){return n.fadeIn=function(e,n,i){var s=t.css(e,"opacity");s>0?t.css(e,"opacity",0):s=1;return t.show(e),r(e,s,n,i),this}}),define("skylark-domx-transits/fade-out",["skylark-langx/langx","skylark-domx-styler","./transits","./fade"],function(e,t,n,r){return n.fadeOut=function(e,t,n){return r(e,0,t,n),this}}),define("skylark-domx-transits/fade-toggle",["skylark-langx/langx","skylark-domx-styler","./transits","./fade-in","./fade-out"],function(e,t,n,r,i){return n.fadeToggle=function(e,n,s,a){t.isInvisible(e)?r(e,n,s,a):i(e,n,s,a);return this}}),define("skylark-domx-transits/pulsate",["skylark-langx/langx","skylark-domx-geom","skylark-domx-styler","./transits","./transit"],function(e,t,n,r,i){return r.pulsate=function(t,r,s){var a=r.mode,o="show"===a||!a,l=o||"hide"===a,u=2*(r.times||5)+(l?1:0),c=r.duration/u,f=0,h=1;(o||n.isInvisible(t))&&(n.css(t,"opacity",0),n.show(t),f=1);var d=e.Deferred,p=[];function m(e,t,n,r){return function(){var s=new d;return i(e,t,n,r,function(){s.resolve()}),s.promise}}for(;h<u;h++)p.push(m(t,{opacity:f},c,r.easing)),f=1-f;return p.push(m(t,{opacity:f},c,r.easing)),p.push(s),p.reduce(function(e,t,n,r){return e.then(t)},d.resolve()),this}}),define("skylark-domx-transits/shake",["skylark-langx/langx","skylark-domx-geom","skylark-domx-styler","./transits","./transit"],function(e,t,n,r,i){return r.shake=function(n,r,s){var a=1,o=r.direction||"left",l=r.distance||20,u=r.times||3,c=2*u+1,f=Math.round(r.duration/c),h="up"===o||"down"===o?"top":"left",d="up"===o||"left"===o,p={},m={},y={},g={},v=e.Deferred;function k(e,t,n,r){return function(){var s=new v;return i(e,t,n,r,function(){s.resolve()}),s.promise}}for(start=t.relativePosition(n)[h],funcs=[],p[h]=start,m[h]=start+(d?-1:1)*l,y[h]=m[h]+(d?1:-1)*l*2,g[h]=y[h]+(d?-1:1)*l*2,funcs.push(k(n,m,f,r.easing));a<u;a++)funcs.push(k(n,y,f,r.easing)),funcs.push(k(n,g,f,r.easing));return funcs.push(k(n,p,f/2,r.easing)),funcs.push(s),funcs.reduce(function(e,t,n,r){return e.then(t)},v.resolve()),this}}),define("skylark-domx-transits/slide",["skylark-langx/langx","skylark-domx-styler","./transits","./transit"],function(e,t,n,r){return n.slide=function(i,s,a){e.isFunction(s)&&(a=s,s={});var o=(s=s||{}).direction||"down",l="up"===o||"left"===o,u="up"===o||"down"===o,c=s.duration||n.speeds.normal,f=t.css(i,"position");if(l){if(t.isInvisible(i))return this}else t.show(i),t.css(i,{position:"absolute",visibility:"hidden"});if(u){var h=t.css(i,"margin-top"),d=t.css(i,"margin-bottom"),p=t.css(i,"padding-top"),m=t.css(i,"padding-bottom"),y=t.css(i,"height");l?(t.css(i,{visibility:"visible",overflow:"hidden",height:y,marginTop:h,marginBottom:d,paddingTop:p,paddingBottom:m}),r(i,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:c,queue:!1,complete:function(){t.hide(i),t.css(i,{visibility:"visible",overflow:"hidden",height:y,marginTop:h,marginBottom:d,paddingTop:p,paddingBottom:m}),a&&a.apply(i)}})):(t.css(i,{position:f,visibility:"visible",overflow:"hidden",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),r(i,{height:y,marginTop:h,marginBottom:d,paddingTop:p,paddingBottom:m},{duration:c,complete:function(){a&&a.apply(i)}}))}else{var g=t.css(i,"margin-left"),v=t.css(i,"margin-right"),k=t.css(i,"padding-left"),x=t.css(i,"padding-right"),b=t.css(i,"width");l?(t.css(i,{visibility:"visible",overflow:"hidden",width:b,marginLeft:g,marginRight:v,paddingLeft:k,paddingRight:x}),r(i,{width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},{duration:c,queue:!1,complete:function(){t.hide(i),t.css(i,{visibility:"visible",overflow:"hidden",width:b,marginLeft:g,marginRight:v,paddingLeft:k,paddingRight:x}),a&&a.apply(i)}})):(t.css(i,{position:f,visibility:"visible",overflow:"hidden",width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0}),r(i,{width:b,marginLeft:g,marginRight:v,paddingLeft:k,paddingRight:x},{duration:c,complete:function(){a&&a.apply(i)}}))}return this}}),define("skylark-domx-transits/slide-down",["./transits","./slide"],function(e,t){return e.slideDown=function(e,n,r){return t(e,{direction:"down",duration:n},r)}}),define("skylark-domx-transits/slide-up",["./transits","./slide"],function(e,t){return e.slideUp=function(e,n,r){return t(e,{direction:"up",duration:n},r)}}),define("skylark-domx-transits/slide-toggle",["skylark-langx/langx","skylark-domx-geom","./transits","./slide-down","./slide-up"],function(e,t,n,r,i){return n.slideToggle=function(e,n,s){0==t.height(e)?r(e,n,s):i(e,n,s);return this}}),define("skylark-domx-transits/throb",["skylark-langx/langx","skylark-domx-styler","skylark-domx-noder","./transits","./transit"],function(e,t,n,r,i){return r.throb=function(e,r){(r=r||{}).text,r.style;var i,s=r.time,a=r.callback,o=n.createElement("div",{class:r.className||"throbber"}),l=function(){i&&(clearTimeout(i),i=null),o&&(n.remove(o),o=null)};r.style&&t.css(o,r.style);var u=r.content||'<span class="throb"></span>';n.html(o,u),e.appendChild(o),s&&(i=setTimeout(function(){l(),a&&a()},s));return{throbber:o,remove:l,update:function(e){e&&e.text&&o&&(textNode.nodeValue=e.text)}}}}),define("skylark-domx-transits/toggle",["skylark-langx/langx","skylark-domx-styler","./transits","./show","./hide"],function(e,t,n,r,i){return n.toggle=function(e,n,s){t.isInvisible(e)?r(e,n,s):i(e,n,s);return this}}),define("skylark-domx-transits/main",["./transits","skylark-domx-velm","skylark-domx-query","./transit","./bounce","./emulate-transition-end","./explode","./fade-in","./fade-out","./fade","./fade-toggle","./hide","./pulsate","./shake","./show","./slide","./slide-down","./slide-toggle","./slide-up","./throb","./toggle"],function(e,t,n){return t.delegate(["transit","emulateTransitionEnd","fadeIn","fadeOut","fade","fadeToggle","hide","scrollToTop","slideDown","slideToggle","slideUp","show","toggle"],e),n.fn.hide=n.wraps.wrapper_every_act(e.hide,e),n.fn.transit=n.wraps.wrapper_every_act(e.transit,e),n.fn.emulateTransitionEnd=n.wraps.wrapper_every_act(e.emulateTransitionEnd,e),n.fn.show=n.wraps.wrapper_every_act(e.show,e),n.fn.hide=n.wraps.wrapper_every_act(e.hide,e),n.fn.toogle=n.wraps.wrapper_every_act(e.toogle,e),n.fn.fadeTo=n.wraps.wrapper_every_act(e.fadeTo,e),n.fn.fadeIn=n.wraps.wrapper_every_act(e.fadeIn,e),n.fn.fadeOut=n.wraps.wrapper_every_act(e.fadeOut,e),n.fn.fadeToggle=n.wraps.wrapper_every_act(e.fadeToggle,e),n.fn.slideDown=n.wraps.wrapper_every_act(e.slideDown,e),n.fn.slideToggle=n.wraps.wrapper_every_act(e.slideToggle,e),n.fn.slideUp=n.wraps.wrapper_every_act(e.slideUp,e),e}),define("skylark-domx-transits",["skylark-domx-transits/main"],function(e){return e}),define("skylark-domx-fx/fx",["skylark-langx/skylark","skylark-langx/langx"],function(e,t){function n(){return n}return t.mixin(n,{off:!1,speeds:{normal:400,fast:200,slow:600}}),e.attach("domx.fx",n)}),define("skylark-domx-animates/animates",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser"],function(e,t,n){function r(){return r}return t.mixin(r,{off:!1,speeds:{normal:400,fast:200,slow:600},animationName:n.normalizeCssProperty("animation-name"),animationDuration:n.normalizeCssProperty("animation-duration"),animationDelay:n.normalizeCssProperty("animation-delay"),animationTiming:n.normalizeCssProperty("animation-timing-function"),animationEnd:n.normalizeCssEvent("AnimationEnd"),animateBaseClass:"animated"}),e.attach("domx.animates",r)}),define("skylark-domx-animates/animation",["skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-geom","skylark-domx-styler","skylark-domx-eventer","./animates"],function(e,t,n,r,i,s,a){var o=a.animationName,l=a.animationDuration,u=a.animationTiming,c=a.animationDelay,f=a.animationEnd,h={};return h[o]=h[l]=h[c]=h[u]="",a.animation=function(t,n,r,c,h,d){var p={};e.isPlainObject(r)&&(c=r.easing,h=r.complete,d=r.delay,r=r.duration);e.isString(r)&&(r=a.speeds[r]);void 0===r&&(r=a.speeds.normal);r/=1e3,e.isFunction(c)?(h=c,eace="swing"):c=c||"swing";d?d/=1e3:d=0;p[o]=n,p[l]=r+"s",p[u]=c,r>0&&s.on(t,f,h);return t.clientLeft,i.css(t,p),this}}),define("skylark-domx-fx/animate",["skylark-langx/langx","skylark-domx-transits/transit","skylark-domx-animates/animation","./fx"],function(e,t,n,r){return r.animate=function(r,i,s,a,o,l){return e.isString(i)?n(r,i,s,a,o,l):t(r,i,s,a,o,l)}}),define("skylark-domx-fx/bounce",["skylark-domx-transits","./fx"],function(e,t){return t.bounce=e.bounce}),define("skylark-domx-fx/emulateTransitionEnd",["skylark-domx-transits","./fx"],function(e,t){return t.emulateTransitionEnd=e.emulateTransitionEnd}),define("skylark-domx-fx/explode",["skylark-domx-transits","./fx"],function(e,t){return t.explode=e.explode}),define("skylark-domx-fx/fadeIn",["skylark-domx-transits","./fx"],function(e,t){return t.fadeIn=e.fadeIn}),define("skylark-domx-fx/fadeOut",["skylark-domx-transits","./fx"],function(e,t){return t.fadeOut=e.fadeOut}),define("skylark-domx-fx/fade",["skylark-domx-transits","./fx"],function(e,t){return t.fade=e.fade}),define("skylark-domx-fx/fadeToggle",["skylark-domx-transits","./fx"],function(e,t){return t.fadeToggle=e.fadeToggle}),define("skylark-domx-fx/hide",["skylark-domx-transits","./fx"],function(e,t){return t.hide=e.hide}),define("skylark-domx-fx/pulsate",["skylark-domx-transits","./fx"],function(e,t){return t.pulsate=e.pulsate}),define("skylark-domx-fx/shake",["skylark-domx-transits","./fx"],function(e,t){return t.shake=e.shake}),define("skylark-domx-fx/show",["skylark-domx-transits","./fx"],function(e,t){return t.show=e.show}),define("skylark-domx-fx/slide",["skylark-domx-transits","./fx"],function(e,t){return t.slide=function(e,n,r){langx.isFunction(n)&&(r=n,n={});var i=(n=n||{}).direction||"down",s="up"===i||"left"===i,a="up"===i||"down"===i,o=n.duration||t.speeds.normal,l=styler.css(e,"position");if(s){if(styler.isInvisible(e))return this}else styler.show(e),styler.css(e,{position:"absolute",visibility:"hidden"});if(a){var u=styler.css(e,"margin-top"),c=styler.css(e,"margin-bottom"),f=styler.css(e,"padding-top"),h=styler.css(e,"padding-bottom"),d=styler.css(e,"height");s?(styler.css(e,{visibility:"visible",overflow:"hidden",height:d,marginTop:u,marginBottom:c,paddingTop:f,paddingBottom:h}),animate(e,{height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0},{duration:o,queue:!1,complete:function(){styler.hide(e),styler.css(e,{visibility:"visible",overflow:"hidden",height:d,marginTop:u,marginBottom:c,paddingTop:f,paddingBottom:h}),r&&r.apply(e)}})):(styler.css(e,{position:l,visibility:"visible",overflow:"hidden",height:0,marginTop:0,marginBottom:0,paddingTop:0,paddingBottom:0}),animate(e,{height:d,marginTop:u,marginBottom:c,paddingTop:f,paddingBottom:h},{duration:o,complete:function(){r&&r.apply(e)}}))}else{var p=styler.css(e,"margin-left"),m=styler.css(e,"margin-right"),y=styler.css(e,"padding-left"),g=styler.css(e,"padding-right"),v=styler.css(e,"width");s?(styler.css(e,{visibility:"visible",overflow:"hidden",width:v,marginLeft:p,marginRight:m,paddingLeft:y,paddingRight:g}),animate(e,{width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0},{duration:o,queue:!1,complete:function(){styler.hide(e),styler.css(e,{visibility:"visible",overflow:"hidden",width:v,marginLeft:p,marginRight:m,paddingLeft:y,paddingRight:g}),r&&r.apply(e)}})):(styler.css(e,{position:l,visibility:"visible",overflow:"hidden",width:0,marginLeft:0,marginRight:0,paddingLeft:0,paddingRight:0}),animate(e,{width:v,marginLeft:p,marginRight:m,paddingLeft:y,paddingRight:g},{duration:o,complete:function(){r&&r.apply(e)}}))}return this}}),define("skylark-domx-fx/slideDown",["skylark-domx-transits","./fx"],function(e,t){return t.slideDown=function(e,t,n){return slide(e,{direction:"down",duration:t},n)}}),define("skylark-domx-fx/slideToggle",["skylark-domx-transits","./fx"],function(e,t){return t.slideToggle=function(e,t,n){0==geom.height(e)?slideDown(e,t,n):slideUp(e,t,n);return this}}),define("skylark-domx-fx/slideUp",["skylark-domx-transits","./fx"],function(e,t){return t.slideUp=function(e,t,n){return slide(e,{direction:"up",duration:t},n)}}),define("skylark-domx-fx/throb",["skylark-domx-noder","./fx"],function(e,t){return t.throb=e.throb}),define("skylark-domx-fx/toggle",["skylark-domx-transits","./fx"],function(e,t){return t.toggle=function(e,t,n){styler.isInvisible(e)?show(e,t,n):hide(e,t,n);return this}}),define("skylark-domx-fx/main",["./fx","./animate","./bounce","./emulateTransitionEnd","./explode","./fadeIn","./fadeOut","./fade","./fadeToggle","./hide","./pulsate","./shake","./show","./slide","./slideDown","./slideToggle","./slideUp","./throb","./toggle"],function(e){return e}),define("skylark-domx-fx",["skylark-domx-fx/main"],function(e){return e}),define("skylark-jquery/core",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-noder","skylark-domx-data","skylark-domx-eventer","skylark-domx-finder","skylark-domx-forms","skylark-domx-transits","skylark-domx-fx","skylark-domx-styler","skylark-domx-query","skylark-langx-scripter"],function(e,t,n,r,i,s,a,o,l,u,c,f,h){var d,p=Array.prototype.filter;Array.prototype.slice;return(d=f).fn.jquery="2.2.0",d.browser=n,d.camelCase=t.camelCase,d.cleanData=function(e){for(var t,n=0;void 0!==(t=e[n]);n++)i.cleanData(t)},d.removeData=function(e,t){i.removeData(e,t)},d.each=t.each,d.extend=t.extend,d.grep=function(e,t){return p.call(e,t)},d.attr=function(e,t){return i.attr(e,t)},d.isArray=t.isArray,d.isEmptyObject=t.isEmptyObject,d.isFunction=t.isFunction,d.isWindow=t.isWindow,d.isPlainObject=t.isPlainObject,d.isNumeric=t.isNumber,d.inArray=t.inArray,d.makeArray=t.makeArray,d.map=t.map,d.noop=function(){},d.parseJSON=window.JSON.parse,d.proxy=t.proxy,d.trim=t.trim,d.type=t.type,d.fn.extend=function(e){t.mixin(d.fn,e)},function(e){e.Event=function(e,n){if(t.isString(e)){var r=e;return s.create(r,n)}return s.proxy(e,n)},e.event={},e.event.special=s.special,e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this},e.fn.triggerHandler=e.fn.trigger,e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.bind=function(e,t,n,r){return this.on(e,t,n,r)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.ready=function(e){return s.ready(e),this},e.fn.stop=function(){return this},e.fn.moveto=function(e,t){return this.transit({left:e+"px",top:t+"px"},.4)},e.ready=s.ready,e.on=s.on,e.off=s.off}(f),function(e){e.uuid=0,e.support=n.support,e.expr={},e.expr[":"]=e.expr.pseudos=e.expr.filters=a.pseudos,e.expr.createPseudo=function(e){return e},e.cssHooks=c.cssHooks,e.contains=r.contains,e.css=c.css,e.data=i.data,e.fx=u,e.fx.step={},e.fn.animate=e.wraps.wrapper_every_act(u.animate,u),e.speed=function(t,n,r){var i=t&&"object"==typeof t?e.extend({},t):{complete:r||!r&&n||e.isFunction(t)&&t,duration:t,easing:r&&n||n&&!e.isFunction(n)&&n};return e.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in e.fx.speeds?i.duration=e.fx.speeds[i.duration]:i.duration=e.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){e.isFunction(i.old)&&i.old.call(this),i.queue&&e.dequeue(this,i.queue)},i},e.easing={},e.offset={},e.offset.setOffset=function(t,n,r){var i=e.css(t,"position");"static"===i&&(t.style.position="relative");var s,a,o=e(t),l=o.offset(),u=e.css(t,"top"),c=e.css(t,"left"),f=("absolute"===i||"fixed"===i)&&e.inArray("auto",[u,c])>-1,h={},d={};f?(d=o.position(),s=d.top,a=d.left):(s=parseFloat(u)||0,a=parseFloat(c)||0),e.isFunction(n)&&(n=n.call(t,r,l)),null!=n.top&&(h.top=n.top-l.top+s),null!=n.left&&(h.left=n.left-l.left+a),"using"in n?n.using.call(t,h):o.css(h)},e._data=function(e,t){return e.hasAttribute?i.data(e,t):{}};var t=e.fn.text;e.fn.text=function(e){var n=t.apply(this,arguments);return void 0===n&&(n=""),n},e.fn.pos=e.fn.position}(f),f.parseHTML=function(e){return r.createFragment(e)},f.uniqueSort=f.unique=t.uniq,f.skylark=e,window.jQuery=window.$=f}),define("skylark-langx-emitter/emitter",["skylark-langx-events"],function(e){return e.Emitter}),define("skylark-langx-emitter/evented",["./emitter"],function(e){return e}),define("skylark-net-http/http",["skylark-langx-ns/ns"],function(e){return e.attach("net.http",{})}),define("skylark-net-http/xhr",["skylark-langx-ns/ns","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-funcs","skylark-langx-async/deferred","skylark-langx-emitter/evented","skylark-langx-urls/is-cross-origin","./http"],function(skylark,types,objects,arrays,funcs,Deferred,Evented,isCrossOrigin,http){var each=objects.each,mixin=objects.mixin,noop=funcs.noop,isArray=types.isArray,isFunction=types.isFunction,isPlainObject=types.isPlainObject,type=types.type,getAbsoluteUrl=function(e){return a||(a=document.createElement("a")),a.href=e,a.href},a,Xhr=function(){var jsonpID=0,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/,XhrDefaultOptions={async:!0,type:"GET",beforeSend:noop,success:noop,error:noop,complete:noop,context:null,global:!0,accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0,processData:!1,cache:!0,traditional:!1,xhrFields:{}};function mimeToDataType(e){if(e&&(e=e.split(";",2)[0]),e){if(e==htmlType)return"html";if(e==jsonType)return"json";if(scriptTypeRE.test(e))return"script";if(xmlTypeRE.test(e))return"xml"}return"text"}function appendQuery(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){e.data=e.data||e.query,e.processData&&e.data&&"string"!=type(e.data)&&(e.data=param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||("string"!=type(e.data)&&(e.data=param(e.data,e.traditional)),e.url=appendQuery(e.url,e.data),e.data=void 0)}function serialize(e,t,n,r){var i,s=isArray(t),a=isPlainObject(t);each(t,function(t,o){i=type(o),r&&(t=n?r:r+"["+(a||"object"==i||"array"==i?t:"")+"]"),!r&&s?e.add(o.name,o.value):"array"==i||!n&&"object"==i?serialize(e,o,n,t):e.add(t,o)})}var param=function(e,t){var n=[];return n.add=function(e,t){isFunction(t)&&(t=t()),null==t&&(t=""),this.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},serialize(n,e,t),n.join("&").replace(/%20/g,"+")},Xhr=Evented.inherit({klassName:"Xhr",_request:function(args){var _=this._,self=this,options=mixin({},XhrDefaultOptions,_.options,args),xhr=_.xhr=new XMLHttpRequest;serializeData(options),options.beforeSend&&options.beforeSend.call(this,xhr,options);var dataType=options.dataType||options.handleAs,mime=options.mimeType||options.accepts[dataType],headers=options.headers,xhrFields=options.xhrFields,isFormData=options.data&&options.data instanceof FormData,basicAuthorizationToken=options.basicAuthorizationToken,type=options.type,url=options.url,async=options.async,user=options.user,password=options.password,deferred=new Deferred,contentType=options.contentType||!isFormData&&"application/x-www-form-urlencoded";if(xhrFields)for(name in xhrFields)xhr[name]=xhrFields[name];mime&&mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),mime&&xhr.overrideMimeType&&xhr.overrideMimeType(mime),"blob"!=dataType&&"arraybuffer"!=dataType||(xhr.responseType=dataType);var finish=function(){xhr.onloadend=noop,xhr.onabort=noop,xhr.onprogress=noop,xhr.ontimeout=noop,xhr=null},onloadend=function(){var result,error=!1;if(xhr.status>=200&&xhr.status<300||304==xhr.status||0==xhr.status&&getAbsoluteUrl(url).startsWith("file:")){dataType=dataType||mimeToDataType(options.mimeType||xhr.getResponseHeader("content-type"));try{"script"==dataType?eval(xhr.responseText):result="xml"==dataType?xhr.responseXML:"json"==dataType?blankRE.test(xhr.responseText)?null:JSON.parse(xhr.responseText):"blob"==dataType?xhr.response:"arraybuffer"==dataType?xhr.response:xhr.responseText}catch(e){error=e}error?deferred.reject(error,xhr.status,xhr):deferred.resolve(result,xhr.status,xhr)}else deferred.reject(new Error(xhr.statusText),xhr.status,xhr);finish()},onabort=function(){deferred&&deferred.reject(new Error("abort"),xhr.status,xhr),finish()},ontimeout=function(){deferred&&deferred.reject(new Error("timeout"),xhr.status,xhr),finish()},onprogress=function(e){deferred&&deferred.notify(e,xhr.status,xhr)};if(xhr.onloadend=onloadend,xhr.onabort=onabort,xhr.ontimeout=ontimeout,xhr.onprogress=onprogress,xhr.open(type,url,async,user,password),headers)for(var key in headers){var value=headers[key];"content-type"===key.toLowerCase()?contentType=value:xhr.setRequestHeader(key,value)}return contentType&&!1!==contentType&&xhr.setRequestHeader("Content-Type",contentType),headers&&"X-Requested-With"in headers||isCrossOrigin(url)||xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),basicAuthorizationToken&&xhr.setRequestHeader("Authorization",basicAuthorizationToken),xhr.send(options.data?options.data:null),deferred.promise},abort:function(){var e=this._,t=e.xhr;t&&t.abort()},request:function(e){return this._request(e)},get:function(e){return(e=e||{}).type="GET",this._request(e)},post:function(e){return(e=e||{}).type="POST",this._request(e)},patch:function(e){return(e=e||{}).type="PATCH",this._request(e)},put:function(e){return(e=e||{}).type="PUT",this._request(e)},del:function(e){return(e=e||{}).type="DELETE",this._request(e)},init:function(e){this._={options:e||{}}}});return["request","get","post","put","del","patch"].forEach(function(e){Xhr[e]=function(t,n){var r=new Xhr({url:t});return r[e](n)}}),Xhr.defaultOptions=XhrDefaultOptions,Xhr.param=param,Xhr}();return http.Xhr=Xhr}),define("skylark-jquery/ajax",["skylark-langx/langx","skylark-net-http/xhr","./core"],function(e,t,n){var r=0;function i(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function s(e,t,r,i){return n.isFunction(e)?(i=t,r=e,t=void 0,e=void 0):n.isFunction(t)&&(i=r,r=t,t=void 0),n.isFunction(r)||(i=r,r=void 0),{url:e,data:t,success:r,dataType:i}}n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){n.fn[t]=function(e){return this.on(t,e)}}),n.ajaxJSONP=function(t){var s,a,o=new e.Deferred,l=t.jsonpCallback,u=(n.isFunction(l)?l():l)||"jsonp"+ ++r,c=document.createElement("script"),f=window[u],h=function(e){n(c).triggerHandler("error",e||"abort")},d={abort:h};for(var p in t.data)t.url=i(t.url,p+"="+t.data[p]);return n(c).on("load error",function(e,t){clearTimeout(a),n(c).off().remove(),"error"!=e.type&&s?o.resolve(s[0],200,d):o.reject(e),window[u]=f,s&&n.isFunction(f)&&f(s[0]),f=s=void 0}),window[u]=function(){s=arguments},c.src=t.url.replace(/\?(.+)=\?/,"?$1="+u),document.head.appendChild(c),t.timeout>0&&(a=setTimeout(function(){h("timeout")},t.timeout)),o},n.ajaxSettings={processData:!0},n.ajax=function(r,s){if(r?s?s.url=r:s=e.isString(r)?{url:r}:r:s={url:"./"},"jsonp"==(s=e.mixin({},n.ajaxSettings,s)).dataType){var a=/\?.+=\?/.test(s.url);return a||(s.url=i(s.url,s.jsonp?s.jsonp+"=?":!1===s.jsonp?"":"callback=?")),n.ajaxJSONP(s)}var o=t.request(s.url,s);return(o=o.then(function(e,t,r){n(document).trigger("ajaxSucess"),s.success&&s.success.apply(this,arguments);s.complete&&s.complete.apply(this,arguments);return e},function(){n(document).trigger("ajaxError"),s.error&&s.error.apply(this,arguments)})).success=o.done,o.error=o.fail,o.complete=o.always,o},n.get=function(){return n.ajax(s.apply(null,arguments))},n.post=function(){var e=s.apply(null,arguments);return e.type="POST",n.ajax(e)},n.getJSON=function(){var e=s.apply(null,arguments);return e.dataType="json",n.ajax(e)};var a=n.fn.load;function o(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(l)||[];if(jQuery.isFunction(n))for(;r=s[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}n.fn.load=function(e,t,r){if("string"!=typeof e&&a)return a.apply(this,arguments);if(!this.length)return this;var i,o=this,l=s(e,t,r),u=l.url&&l.url.split(/\s/),c=l.success;return u&&u.length>1&&(l.url=u[0],i=u[1]),l.data&&"object"==typeof l.data&&(l.type="POST"),l.success=function(e){o.html(i?n("<div>").html(e.replace(rscript,"")).find(i):e),c&&c.apply(o,arguments)},n.ajax(l),this},n.param=t.param;var l=/\S+/g;return n.ajaxPrefilter=o({}),n.ajaxTransport=o({}),n.ajaxSetup=function(n,r){e.mixin(t.defaultOptions,n,r)},n.getScript=function(e,t){return n.get(e,void 0,t,"script")},n}),define("skylark-jquery/callbacks",["./core"],function(e){return e.Callbacks=function(t){var n,r,i,s,a,o,l=[],u=!(t=e.extend({},t)).once&&[],c=function(e){for(n=t.memory&&e,r=!0,o=s||0,s=0,a=l.length,i=!0;l&&o<a;++o)if(!1===l[o].apply(e[0],e[1])&&t.stopOnFalse){n=!1;break}i=!1,l&&(u?u.length&&c(u.shift()):n?l.length=0:f.disable())},f={add:function(){if(l){var r=l.length,o=function(n){e.each(n,function(e,n){"function"==typeof n?t.unique&&f.has(n)||l.push(n):n&&n.length&&"string"!=typeof n&&o(n)})};o(arguments),i?a=l.length:n&&(s=r,c(n))}return this},remove:function(){return l&&e.each(arguments,function(t,n){for(var r;(r=e.inArray(n,l,r))>-1;)l.splice(r,1),i&&(r<=a&&--a,r<=o&&--o)}),this},has:function(t){return!(!l||!(t?e.inArray(t,l)>-1:l.length))},empty:function(){return a=l.length=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||f.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||r&&!u||(t=[e,(t=t||[]).slice?t.slice():t],i?u.push(t):c(t)),this},fire:function(){return f.fireWith(this,arguments)},fired:function(){return!!r}};return f},e}),define("skylark-jquery/deferred",["./core","skylark-langx/langx"],function(e,t){return e.Deferred=function(){var e=new t.Deferred,n={promise:function(){return e.promise}};return["resolve","resolveWith","reject","rejectWith","notify","then","done","fail","progress","always","state"].forEach(function(t){n[t]=function(){var r=e[t].apply(e,arguments);return r==e&&(r=n),r}}),n},e.when=function(){var e=t.Deferred.all(t.makeArray(arguments)),n=e.then;return e.then=function(t,r){return n.call(e,function(e){return t&&t.apply(null,e)},r)},e},e}),define("skylark-jquery/queue",["skylark-langx/langx","./core","./callbacks"],function(e,t){var n="Sky"+("1.0"+Math.random()).replace(/\D/g,""),r=/\S+/g,i=[].push;function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n+Math.random()}s.uid=1,s.accepts=function(e){return!e.nodeType||(1===e.nodeType||9===e.nodeType)},s.prototype={key:function(e){if(!s.accepts(e))return 0;var n={},r=e[this.expando];if(!r){r=s.uid++;try{n[this.expando]={value:r},Object.defineProperties(e,n)}catch(i){n[this.expando]=r,t.extend(e,n)}}return this.cache[r]||(this.cache[r]={}),r},set:function(e,n,r){var i,s=this.key(e),a=this.cache[s];if("string"==typeof n)a[n]=r;else if(t.isEmptyObject(a))t.extend(this.cache[s],n);else for(i in n)a[i]=n[i];return a},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,n,r){var i;return void 0===n||n&&"string"==typeof n&&void 0===r?void 0!==(i=this.get(e,n))?i:this.get(e,t.camelCase(n)):(this.set(e,n,r),void 0!==r?r:n)},remove:function(e,n){var i,s,a,o=this.key(e),l=this.cache[o];if(void 0===n)this.cache[o]={};else{t.isArray(n)?s=n.concat(n.map(t.camelCase)):(a=t.camelCase(n),s=n in l?[n,a]:(s=a)in l?[s]:s.match(r)||[]),i=s.length;for(;i--;)delete l[s[i]]}},hasData:function(e){return!t.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var a=new s;return t.extend(t,{queue:function(e,n,r){var i;if(e)return n=(n||"fx")+"queue",i=a.get(e,n),r&&(!i||t.isArray(r)?i=a.access(e,n,t.makeArray(r)):i.push(r)),i||[]},dequeue:function(e,n){n=n||"fx";var r=t.queue(e,n),i=r.length,s=r.shift(),a=t._queueHooks(e,n);"inprogress"===s&&(s=r.shift(),i--),s&&("fx"===n&&r.unshift("inprogress"),delete a.stop,s.call(e,function(){t.dequeue(e,n)},a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,n){var r=n+"queueHooks";return a.get(e,r)||a.access(e,r,{empty:t.Callbacks("once memory").add(function(){a.remove(e,[n+"queue",r])})})},makeArray:function(e,n){var r=n||[];return null!=e&&(!function(e){var n=e.length,r=t.type(e);if(t.isWindow(e))return!1;if(1===e.nodeType&&n)return!0;return"array"===r||"function"!==r&&(0===n||"number"==typeof n&&n>0&&n-1 in e)}(Object(e))?i.call(r,e):t.merge(r,"string"==typeof e?[e]:e)),r},merge:function(e,t){var n=t.length,r=e.length,i=0;if("number"==typeof n)for(;i<n;i++)e[r++]=t[i];else for(;void 0!==t[i];)e[r++]=t[i++];return e.length=r,e}}),t.extend(t.fn,{queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),arguments.length<r?t.queue(this[0],e):void 0===n?this:this.each(function(){var r=t.queue(this,e,n);t._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&t.dequeue(this,e)})},dequeue:function(e){return this.each(function(){t.dequeue(this,e)})},delay:function(e,n){return e=t.fx&&t.fx.speeds[e]||e,n=n||"fx",this.queue(n,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=t.Deferred(),o=this,l=this.length,u=function(){--i||s.resolveWith(o,[o])};for("string"!=typeof e&&(n=e,e=void 0),e=e||"fx";l--;)(r=a.get(o[l],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(u));return u(),s.promise(n)}}),t}),define("skylark-domx-plugins-base/plugins",["skylark-langx-ns"],function(e){"use strict";return e.attach("domx.plugins",{pluginKlasses:{},shortcuts:{}})}),define("skylark-langx-events/Emitter",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-klass","./events","./event","./listener"],function(e,t,n,r,i,s,a){var o=Array.prototype.slice,l=n.compact,u=e.isDefined,c=e.isPlainObject,f=e.isFunction,h=e.isString,d=(e.isEmptyObject,t.mixin);t.safeMixin;function p(e){var t=(""+e).split(".");return{name:t[0],ns:t.slice(1).join(" ")}}var m=new Map,y=a.inherit({_prepareArgs:function(e,t){return t=u(t)?[e].concat(t):[e]},on:function(e,t,n,r,i,s){var a=this,o=this._hub||(this._hub={});if(c(e))return i=r,each(e,function(e,r){a.on(e,t,n,r,i,s)}),this;if(h(t)||f(r)||(i=r,r=n,n=t,t=void 0),f(n)&&(i=r,r=n,n=null),!r)throw new Error("No callback function");if(!f(r))throw new Error("The callback  is not afunction");return h(e)&&(e=e.split(/\s/)),e.forEach(function(e){var a=p(e),l=a.name,u=a.ns;(o[l]||(o[l]=[])).push({fn:r,selector:t,data:n,ctx:i,ns:u,one:s})}),this},one:function(e,t,n,r,i){return this.on(e,t,n,r,i,1)},emit:function(e){if(!this._hub)return this;var t=this;h(e)&&(e=new s(e)),Object.defineProperty(e,"target",{value:this});var n=o.call(arguments,1);return n=this._prepareArgs(e,n),[e.type||e.name,"all"].forEach(function(r){var i=p(r),s=i.name,a=i.ns,o=t._hub[s];if(o){for(var u=o.length,f=!1,h=0;h<u;h++){if(e.isImmediatePropagationStopped&&e.isImmediatePropagationStopped())return this;var m=o[h];(!a||m.ns&&m.ns.startsWith(a))&&(m.data&&(e.data=d({},m.data,e.data)),2==n.length&&c(n[1])&&(e.data=e.data||{},d(e.data,n[1])),m.fn.apply(m.ctx,n),m.one&&(o[h]=null,f=!0))}f&&(t._hub[r]=l(o))}}),this},queueEmit:function(e){const t=e.type||e;let n=m.get(this);n||(n=new Map,m.set(this,n));const r=n.get(t);n.delete(t),window.clearTimeout(r);const i=window.setTimeout(()=>{0===n.size&&(n=null,m.delete(this)),this.trigger(e)},0);n.set(t,i)},listened:function(e){var t=(this._hub||(this._events={}))[e]||[];return t.length>0},off:function(e,t){if(e){var n=this._hub||(this._hub={});return h(e)&&(e=e.split(/\s/)),e.forEach(function(e){var r=p(e),i=r.name,s=r.ns,a=n[i];if(a){var o=[];if(t||s)for(var l=0,u=a.length;l<u;l++)t&&a[l].fn!==t&&a[l].fn._!==t?o.push(a[l]):!s||a[l].ns&&0==a[l].ns.indexOf(s)||o.push(a[l]);o.length?n[i]=o:delete n[i]}}),this}this._hub=null},trigger:function(){return this.emit.apply(this,arguments)},queueTrigger:function(e){return this.queueEmit.apply(this,arguments)}});return i.Emitter=y}),define("skylark-domx-animates/animate",["skylark-langx/langx","skylark-domx-styler","skylark-domx-eventer","./animates"],function(e,t,n,r){return r.animate=function(i,s,a){if(e.isString(s)){let e=s;return r.animateBaseClass&&(e=r.animateBaseClass+" "+e),t.addClass(i,e),n.one(i,r.animationEnd,function(){t.removeClass(i,e)}),this}return i.animate(s,a)}}),define("skylark-domx-animates/main",["./animates","skylark-domx-velm","skylark-domx-query","./animation","./animate"],function(e,t,n){return t.delegate(["animate"],e),n.fn.animate=n.wraps.wrapper_every_act(e.animate,e),e}),define("skylark-domx-animates",["skylark-domx-animates/main"],function(e){return e}),define("skylark-domx/animates",["skylark-domx-animates"],function(e){return e}),define("skylark-domx/browser",["skylark-domx-browser"],function(e){"use strict";return e}),define("skylark-domx-css/css",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-noder"],function(e,t,n){"use strict";var r,i=document.getElementsByTagName("head")[0],s=0,a={},o={},l=d(),u=o[l],c="cssRules"in u?"cssRules":"rules",f=u.deleteRule||u.removeRule;if(u.insertRule){var h=u.insertRule;r=function(e,t,n){h.call(this,e+"{"+t+"}",n)}}else r=u.addRule;function d(e,r){var a,l={type:"text/css"},u=s++;return(r=r||{}).media&&(l.media=r.media),a=e?n.create("link",t.mixin(l,{rel:"stylesheet",async:!1})):n.createElement("style",l),n.append(i,a),o[u]={id:u,node:a},u}function p(e,n){var r=o[e];return t.isNumber(n)?f.call(r,n):t.each(r[c],function(e,t){if(n===t)return f.call(r,e),!1}),this}function m(e,r){var i,s=o[e];return i=t.isString(r)?r:g(r),n.append(s.node,n.createTextNode(i)),this}function y(e){return e.startsWith("@")}function g(e){var n=function(e,t,n){return e&&(y(e)?n+=1:t=e+" "+t),{name:t,depth:n}},r=function(e,i,s){var a="",o=y(e);if(y(e))t.isString(i)?a=v.SPACE.repeat(s)+e.trim()+' "'+i.trim()+' ";\n':(a+=v.SPACE.repeat(s)+e.trim()+" {\n",a+=r("",i,s+1),a+=v.SPACE.repeat(s)+" }\n");else if(t.isString(i))a=v.SPACE.repeat(s)+e.trim(),a=o?a+' "'+i.trim()+' ";\n':a+": "+i.trim()+";\n";else if(t.isArray(i))for(var l=0;l<i.length;l++)a+=r(e,i[l],s);else{if(e){for(var l in a+=v.SPACE.repeat(s)+e.trim()+" {\n",i){var u=i[l];t.isString(u)&&(a+=r(l,u,s+1))}a+=v.SPACE.repeat(s)+"}\n"}for(var l in i){var u=i[l];if(!t.isString(u)){var c=n(e,l,s);a+=r(c.name,u,c.depth)}}}return a};return r("",e,0)}function v(){return v}return t.mixin(v,{SPACE:"\t",addRules:function(e){return this.addRules(l,e)},addSheetRules:m,createStyleSheet:function(e,t){t||(t={});var n=d(!1,t);e&&m(n,e);return n},deleteSheetRule:p,deleteRule:function(e){return p(l,e),this},insertRule:function(e,t,n){return this.insertSheetRule(l,e,t,n)},insertSheetRule:function(e,t,n,i){if(!t||!n)return-1;var s=o[e];return i=i||s[c].length,r.call(s,t,n,i)},loadStyleSheet:function(e,n,r,i){t.isFunction(n)&&(i=r,r=n,n={});var s=a[e];if(!s){var l=d(!0,n);s=a[e]=o[l],t.mixin(s,{state:0,url:e,deferred:new t.Deferred});var u=s.node;startTime=(new Date).getTime(),u.onload=function(){s.state=1,s.deferred.resolve(s.id)},u.onerror=function(e){s.state=-1,s.deferred.reject(e)},u.href=s.url}(r||i)&&s.deferred.promise.then(r,i);return s.id},removeStyleSheet:function(e){if(e===l)throw new Error("The default stylesheet can not be deleted");var t=o[e];return delete o[e],n.remove(t.node),this},toString:g}),e.attach("domx.css",v)}),define("skylark-domx-css/main",["./css"],function(e){return e}),define("skylark-domx-css",["skylark-domx-css/main"],function(e){return e}),define("skylark-domx/css",["skylark-domx-css"],function(e){"use strict";return e}),define("skylark-domx/data",["skylark-domx-data"],function(e){return e}),define("skylark-domx/eventer",["skylark-domx-eventer"],function(e){return e}),define("skylark-domx/finder",["skylark-domx-finder"],function(e){return e}),define("skylark-domx/fx",["skylark-domx-fx"],function(e){return e}),define("skylark-domx/geom",["skylark-domx-geom"],function(e){return e}),define("skylark-domx-iframes/iframes",["skylark-langx-ns"],function(e){return e.attach("domx.iframes")}),define("skylark-domx-iframes/create",["skylark-domx-noder","./iframes"],function(e,t){"use strict";return t.create=function(t,n){let r={},i={};(t=t||{}).id&&(r.id=t.id);t.url&&(r.src=t.url);t.style&&(r.style=t.style);t.onload&&(r.onload=t.onload);t.onerror&&(r.onload=t.onerror);t.className&&(r.className=t.className);t.sandbox&&(i.sandbox=t.sandbox);t.frameBorder&&(i.frameBorder=t.frameBorder);t.name&&(i.name=t.name);let s=e.create("iframe",r,i,n);t.contentWindowName&&(s.contentWindow.name=t.contentWindowName);return s}}),define("skylark-domx-iframes/hook-sizing",["skylark-domx-eventer","./iframes"],function(e,t){"use strict";return t.hookSizing=function(t){e.on(window,"message",function(e){e||(e=window.event);t.style.height=1*e.data.height+2+"px"})}}),define("skylark-domx-iframes/load-real",["skylark-domx-noder","skylark-domx-data","./iframes","./hook-sizing"],function(e,t,n,r){return n.loadReal=function(n,r){r=r||{};var i=e.clone(n),s=r.url;s||(s=t.attr(i,r.urlAttrName||"data-url"));s=s.split("&")[0],t.prop(i,"src",s),t.prop(i,"_src",s),e.replace(i,ifame)}}),define("skylark-domx-iframes/lazy-load",["skylark-domx-eventer","skylark-domx-data","skylark-domx-geom","./iframes","./load-real"],function(e,t,n,r,i){var s;function a(){s||(s=[],e.on(window,"scroll",function(){!function(){var e=0,t=[];for(e=0;e<s.length;e++)n.inview(s[e],400)&&t.unshift({iframe:s[e],i:e});for(e=t.length-1;e>=0;e--)s.splice(t[e].i,1),i(t[e].iframe)}()}))}return r.lazyLoad=function(e,n){a(),(n=n||{}).url&&t.attr(e,n.urlAttrName||"data-url",n.url);n.holdingUrl&&t.prop(e,"src",n.holdingUrl);s.push(e)}}),define("skylark-domx-iframes/replace",["skylark-langx-urls/get-query","skylark-domx-noder","skylark-domx-geom","skylark-domx-styler","./iframes","./create","./load-real","./lazy-load"],function(e,t,n,r,i,s,a,o){"use strict";return i.replace=function(i,l){l=l||{};s({className:i.className,id:i.id,style:{border:"1px solid #aaa"}});var u=l.url||i.href,c=l.size||e(i.search),f=l.holdingUrl;r.css(iframe,"width",c.width||"100%"),r.css(iframe,"minHeight",c.height||"300px"),c.height&&r.css(iframe,"maxHeight",c.height);n.inview(i,100)?a(iframe,{url:u}):o(iframe,{url:u,holdingUrl:f});t.replace(iframe,i)}}),define("skylark-domx-iframes/main",["./iframes","./create","./lazy-load","./load-real","./replace"],function(){}),define("skylark-domx-iframes",["skylark-domx-iframes/main"],function(e){return e}),define("skylark-domx/iframes",["skylark-domx-iframes"],function(e){return e}),define("skylark-domx-lists/lists",["skylark-langx-ns","skylark-domx-query","skylark-domx-data","skylark-domx-geom","skylark-domx-finder","skylark-domx-noder","skylark-domx-styler"],function(e){return e.attach("domx.lists")}),define("skylark-domx-lists/multitier",["skylark-langx","skylark-domx-query","./lists"],function(e,t,n){"use strict";return n.multitier=function(n,r){var i=(r=e.mixin({classes:{active:"active",collapse:"collapse",in:"in"},selectors:{item:"li",sublist:"ul",hasSublist:":has(ul)",handler:" > a"},mode:"",levels:2,togglable:!1,multiExpand:!1},r,!0)).selectors.item,s=t(i,n),a=r.classes.active,o="."+a,l=(r.mode,r.selectors.sublist),u=r.togglable,c=r.multiExpand,f=r.selectors.handler,h=r.classes.collapse,d=r.classes.in,p=r.show||function(e){e.addClass(d)},m=r.hide||function(e){e.addClass(h).removeClass(d)};r.toggle;s.find(f).on("click.multitier",function(e){e.preventDefault();let n,s=t(this).closest(i);c||(n=s.siblings().removeClass(a).children(l))&&m(n);let o=s.hasClass(a);o&&!u||(n=s.children(r.selectors.sublist),o?(s.removeClass(a),m(n)):(s.addClass(a),p(n)))}),m(s.has(l).children(l)),p(s.filter(o).has(l).children(l))}}),define("skylark-domx-lists/main",["./lists","./multitier"],function(e){return e}),define("skylark-domx-lists",["skylark-domx-lists/main"],function(e){return e}),define("skylark-domx/lists",["skylark-domx-lists"],function(e){return e}),define("skylark-domx/noder",["skylark-domx-noder"],function(e){return e}),define("skylark-domx/styler",["skylark-domx-styler"],function(e){return e}),define("skylark-domx/query",["skylark-domx-query","./data","./eventer","./fx","./geom","./styler"],function(e){return e}),define("skylark-domx-transforms/transforms",["skylark-langx/skylark","skylark-langx/langx","skylark-domx-browser","skylark-domx-data","skylark-domx-styler"],function(e,t,n,r,i){var s=n.normalizeCssProperty("transform");function a(e,t){return e>0&&e>-t?t:e<0&&e<t?-t:0}function o(e,t){var n,r,a,o,l,u=(n=t.radian,r=t.y,a=t.x,o=Math.cos(n),l=Math.sin(n),{M11:o*r,M12:-l*a,M21:l*r,M22:o*a});i.css(e,s,"matrix("+u.M11.toFixed(16)+","+u.M21.toFixed(16)+","+u.M12.toFixed(16)+","+u.M22.toFixed(16)+", 0, 0)")}function l(e,t){if(!t)return(t=r.data(e,"transform")||{}).radian=t.radian||0,t.x=t.x||1,t.y=t.y||1,t.zoom=t.zoom||1,t;r.data(e,"transform",t)}var u={vertical:function(e){e.radian=Math.PI-e.radian,e.y*=-1},horizontal:function(e){e.radian=Math.PI-e.radian,e.x*=-1},rotate:function(e,t){e.radian=t*Math.PI/180},left:function(e){e.radian-=Math.PI/2},right:function(e){e.radian+=Math.PI/2},scale:function(e,t){var n=a(e.y,t),r=a(e.x,t);n&&r&&(e.y+=n,e.x+=r)},zoomin:function(e){u.scale(e,.1)},zoomout:function(e){u.scale(e,-.1)}};function c(){return c}return["vertical","horizontal","rotate","left","right","scale","zoom","zoomin","zoomout"].forEach(function(e){var n;c[e]=(n=u[e],function(){var e=t.makeArray(arguments),r=e.shift(),i=l(r);e.unshift(i),n.apply(this,e),o(r,i),l(r,i)})}),t.mixin(c,{reset:function(e){var t={x:1,y:1,radian:0};o(e,t),l(e,t)},matrix:function(e){var t="";do{var n=i.css(e,"transform");n&&"none"!==n&&(t=n+" "+t)}while(e=e.parentElement);if(window.DOMMatrix)return new DOMMatrix(t);if(window.WebKitCSSMatrix)return new WebKitCSSMatrix(t);if(window.CSSMatrix)return new CSSMatrix(t)}}),e.attach("domx.transforms",c)}),define("skylark-domx-transforms/main",["./transforms"],function(e){return e}),define("skylark-domx-transforms",["skylark-domx-transforms/main"],function(e){return e}),define("skylark-domx/transforms",["skylark-domx-transforms"],function(e){return e}),define("skylark-domx/transits",["skylark-domx-transits"],function(e){return e}),define("skylark-domx/velm",["skylark-domx-velm","./data","./eventer","./fx","./geom","./styler"],function(e){return e}),define("skylark-domx/main",["./animates","./browser","./css","./data","./eventer","./finder","./fx","./geom","./iframes","./lists","./noder","./query","./styler","./transforms","./transits","./velm"],function(e,t,n,r,i,s,a,o,l,u,c,f,h,d,p,m){return{animates:e,browser:t,css:n,data:r,eventer:i,finder:s,geom:o,lists:u,noder:c,iframes:l,query:f,styler:h,transforms:d,transits:p,velm:m}}),define("skylark-domx",["skylark-domx/main"],function(e){return e}),define("skylark-domx-plugins-base/plugin",["skylark-langx-ns","skylark-langx-types","skylark-langx-objects","skylark-langx-funcs","skylark-langx-events/Emitter","skylark-domx-noder","skylark-domx-data","skylark-domx-eventer","skylark-domx-finder","skylark-domx-geom","skylark-domx-styler","skylark-domx-fx","skylark-domx-query","skylark-domx-velm","skylark-domx","./plugins"],function(e,t,n,r,i,s,a,o,l,u,c,f,h,d,p,m){"use strict";Array.prototype.slice,Array.prototype.concat;function y(e){return e.hasOwnProperty("superclass")?e.superclass:Object.getPrototypeOf(e)}var g=i.inherit({klassName:"Plugin",_domx:p,_construct:function(e,t){this._elm=e,this._initOptions(t)},_initOptions:function(e){var t=this.constructor,r=t.cache=t.hasOwnProperty("cache")?t.cache:{},i=r.defaults;if(!i){var s=[];do{if(s.unshift(t),t===g)break;t=y(t)}while(t);i=r.defaults={};for(var a=0;a<s.length;a++)(t=s[a]).prototype.hasOwnProperty("options")&&n.mixin(i,t.prototype.options,!0),t.hasOwnProperty("options")&&n.mixin(i,t.options,!0)}return Object.defineProperty(this,"options",{value:n.mixin({},i,e,!0)}),this.options},destroy:function(){this._destroy(),this.unlistenTo(),a.removeData(this._elm,this.pluginName)},_destroy:r.noop,_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},elmx:function(e){return e?d(e):(this._velm||(this._velm=d(this._elm)),this._velm)},$:function(e){return e?h(e,this._elm):(this._$elm||(this._$elm=h(this._elm)),this._$elm)},option:function(e,t){var r,i,s,a=e;if(0===arguments.length)return n.mixin({},this.options);if("string"==typeof e)if(a={},r=e.split("."),e=r.shift(),r.length){for(i=a[e]=n.mixin({},this.options[e]),s=0;s<r.length-1;s++)i[r[s]]=i[r[s]]||{},i=i[r[s]];if(e=r.pop(),1===arguments.length)return void 0===i[e]?null:i[e];i[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=t}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,this},getUID:function(e){e=e||"plugin";do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},elm:function(){return this._elm},ensureListenedEmitter:function(e){return e.on?e:h(e)},listenTo:function(e,n,r,s,a){return(t.isString(e)||t.isArray(e)||t.isPlainObject(e))&&(a=s,s=r,r=n,n=e,e=this._elm),i.prototype.listenTo.call(this,e,n,r,s,a)},unlistenTo:function(e,n,r){return(t.isString(e)||t.isArray(e)||t.isPlainObject(e))&&(r=n,n=e,e=this._elm),i.prototype.unlistenTo.call(this,e,n,r)}});return m.Plugin=g}),define("skylark-domx-plugins-base/instantiate",["skylark-domx-data","./plugins","./plugin"],function(e,t,n){"use strict";var r=t.pluginKlasses;function i(t,n,i,s,a,o,l,u){var c=n.split(":"),f=c[1];n=c[0],f||(f=n);var h=e.data(t,f);if("instance"===i)return h;if("destroy"===i){if(!h)throw new Error("The plugin instance is not existed");h.destroy(),h=void 0}else if(h)i&&h.reset(i);else{if(void 0!==i&&"object"!=typeof i)throw new Error("The options must be a plain object");var d=r[n];h=new d(t,i,s,a,o,l,u),e.data(t,f,h)}return h}return n.instantiate=function(e,t){return i(e,this.prototype.pluginName,t)},t.instantiate=i}),define("skylark-domx-plugins-base/shortcutter",["skylark-langx-types","./plugins","./instantiate"],function(e,t,n){"use strict";var r=Array.prototype.slice;return t.shortcutter=function(i,s){return function(a,o){var l=n(a,i,"instance");if("instance"===o)return l||null;if(!l){let e=r.call(arguments,2);if(e.unshift(a,i,"object"==typeof o&&o||{}),l=n.apply(t,e),"string"!=typeof o)return this}if(o){let t=r.call(arguments,1);if(s)return s.apply(l,t);if("string"==typeof o){var u=o;if(!l)throw new Error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+u+"'");if(!e.isFunction(l[u])||"_"===u.charAt(0))throw new Error("no such method '"+u+"' for "+i+" plugin instance");t=r.call(t,1);var c=l[u].apply(l,t);return c==l&&(c=void 0),c}}}}}),define("skylark-domx-plugins-base/register",["skylark-langx-types","skylark-domx-query","skylark-domx-velm","./plugins","./shortcutter"],function(e,t,n,r,i){"use strict";var s=Array.prototype.slice,a=r.pluginKlasses,o=r.shortcuts;return r.register=function(r,l,u,c){var f=r.prototype.pluginName;if(a[f]=r,l){u&&e.isFunction(u)&&(c=u,u=null),u&&(f=f+":"+u);var h=o[l]=i(f,c);t.fn[l]=function(e){var t=this;if(this.length||"instance"!==e){var n=s.call(arguments);this.each(function(){var e=s.call(n);e.unshift(this);var r=h.apply(void 0,e);void 0!==r&&(t=r)})}else t=void 0;return t},n.partial(l,function(e){var t=h(this._elm,e);return void 0===t&&(t=this),t})}}}),define("skylark-domx-plugins-base/main",["skylark-domx-query","skylark-domx-velm","./plugins","./instantiate","./plugin","./register","./shortcutter"],function(e,t,n,r,i,s,a){"use strict";var o=Array.prototype.slice;return e.fn.plugin=function(e,t){var n,i=o.call(arguments,1),s=this;return this.each(function(){n=r.apply(s,[this,e].concat(i))}),n},t.partial("plugin",function(e,t){var n=o.call(arguments,1);return r.apply(this,[this._elm,e].concat(n))}),n}),define("skylark-domx-plugins-base",["skylark-domx-plugins-base/main"],function(e){return e}),define("skylark-jquery/jquery-plugin",["skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx/langx","skylark-domx-data","skylark-domx-eventer","skylark-domx-plugins-base","skylark-domx-query"],function(e,t,n,r,i,s,a,o){var l=0,u=a.Plugin.inherit({klassName:"JqPlugin",pluginEventPrefix:"",options:{create:null},destroy:function(){this.overrided(),this.element.off(this.eventNamespace),this.bindings.off(this.eventNamespace)},_construct:function(e,t){e=o(e||this.defaultElement||this)[0],this.element=o(e),this.uuid=l++,this.eventNamespace="."+this.pluginName+this.uuid,this.bindings=o(),this.classesElementLookup={},this.hoverable=o(),this.focusable=o(),e!==this&&(i.data(e,this.pluginName,this),this._on(!0,this.element,{remove:function(t){t.target===e&&this.destroy()}}),this.document=o(e.style?e.ownerDocument:e.document||e),this.window=o(this.document[0].defaultView||this.document[0].parentWindow)),a.Plugin.prototype._construct.call(this,e,t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_initOptions:function(e){e=r.mixin(this._getCreateOptions(),e),this.overrided(e)},_getCreateOptions:function(){return{}},_getCreateEventData:r.noop,_super:function(){if(this.overrided)return this.overrided.apply(this,arguments)},_superApply:function(e){if(this.overrided)return this.overrided.apply(this,e)},_create:r.noop,_init:r.noop,_classes:function(e){var n=[],i=this;function s(t,s){var a,l;for(l=0;l<t.length;l++)a=i.classesElementLookup[t[l]]||o(),e.add?(e.element.each(function(e,t){var n=r.map(i.classesElementLookup,function(e){return e}).some(function(e){return o(e).is(t)});n||i._on(o(t),{remove:"_untrackClassesElement"})}),a=o(r.uniq(a.get().concat(e.element.get())))):a=o(a.not(e.element).get()),i.classesElementLookup[t[l]]=a,n.push(t[l]),s&&e.classes[t[l]]&&n.push(e.classes[t[l]])}return(e=t.mixin({element:this.element,classes:this.options.classes||{}},e)).keys&&s(e.keys.match(/\S+/g)||[],!0),e.extra&&s(e.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(e){var t=this;r.each(t.classesElementLookup,function(r,i){-1!==n.inArray(e.target,i)&&(t.classesElementLookup[r]=o(i.not(e.target).get()))}),this._off(o(e.target))},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,r){r="boolean"==typeof r?r:n;var i="string"==typeof e||null===e,s={extra:i?t:n,keys:i?e:t,element:i?this.element:e,add:r};return s.element.toggleClass(this._classes(s),r),this},_on:function(e,n,r){var i,s=this;"boolean"!=typeof e&&(r=n,n=e,e=!1),r?(n=i=o(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),t.each(r,function(t,r){function a(){if(e||!0!==s.options.disabled&&!o(this).hasClass("ui-state-disabled"))return("string"==typeof r?s[r]:r).apply(s,arguments)}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||o.guid++);var l=t.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+s.eventNamespace,c=l[2];c?i.on(u,c,a):n.on(u,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(t),this.bindings=o(this.bindings.not(e).get()),this.focusable=o(this.focusable.not(e).get()),this.hoverable=o(this.hoverable.not(e).get())},_trigger:function(t,n,r){var i,a,o=this.options[t];if(r=r||{},(n=s.proxy(n)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],a=n.originalEvent)for(i in a)i in n||(n[i]=a[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&!1===o.apply(this.element[0],[n].concat(r))||n.isDefaultPrevented())},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(o(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(o(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(o(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(o(e.currentTarget),null,"ui-state-focus")}})},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})}});return u}),define("skylark-jquery/widget",["skylark-langx/langx","skylark-domx-plugins-base","./core","./jquery-plugin"],function(e,t,n,r){var i,s=Array.prototype.hasOwnProperty,a=Array.prototype.slice;return n.cleanData=(i=n.cleanData,function(e){var t,r,s;for(s=0;null!=(r=e[s]);s++)(t=n._data(r,"events"))&&t.remove&&n(r).triggerHandler("remove");i(e)}),n.widget=function(e,r,i){var s,a,o=e.split(".")[0];e=e.split(".")[1];var l=o+"-"+e;i||(i=r,r=n.Widget),n.isArray(i)&&(i=n.extend.apply(null,[{}].concat(i))),n.expr.pseudos[l.toLowerCase()]=function(e){return!!n.data(e,l)},n[o]=n[o]||{},s=n[o][e];var u=r.prototype,c={};for(var f in i){var h=i[f];n.isPlainObject(h)?c[f]=n.isPlainObject(u[f])?n.widget.extend({},u[f],h):n.widget.extend({},h):c[f]=h}var d=n.widget.extend({widgetEventPrefix:s&&r.prototype.widgetEventPrefix||e},{options:r.prototype.options},c,{name:l,namespace:o,widgetName:e,pluginName:"jqueryui."+(o?o+".":"")+e,widgetFullName:l});return a=n[o][e]=r.inherit(d),n.extend(a,s,{version:i.version,_proto:d,_childConstructors:[]}),s?(n.each(s._childConstructors,function(e,t){var r=t.prototype;n.widget(r.namespace+"."+r.widgetName,a,t._proto)}),delete s._childConstructors):r._childConstructors&&r._childConstructors.push(a),t.register(a,e,l),a},n.widget.extend=function(e){for(var t,r,i=a.call(arguments,1),o=0,l=i.length;o<l;o++)for(t in i[o])r=i[o][t],s.call(i[o],t)&&void 0!==r&&(n.isPlainObject(r)?e[t]=n.isPlainObject(e[t])?n.widget.extend({},e[t],r):n.widget.extend({},r):e[t]=r);return e},n.Widget=r.inherit({widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},widget:function(){return this.element},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(e){var t,r,i;for(t in e)i=this.classesElementLookup[t],e[t]!==this.options.classes[t]&&i&&i.length&&(r=n(i.get()),this._removeClass(i,t),r.addClass(this._classes({element:r,keys:t,classes:e,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_delay:function(e,t){var n=this;return setTimeout(function(){return("string"==typeof e?n[e]:e).apply(n,arguments)},t||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(n(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(n(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(n(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(n(e.currentTarget),null,"ui-state-focus")}})}}),n.Widget._childConstructors=[],n.each({show:"fadeIn",hide:"fadeOut"},function(e,t){n.Widget.prototype["_"+e]=function(r,i,s){var a;"string"==typeof i&&(i={effect:i});var o=i?!0===i||"number"==typeof i?t:i.effect||t:e;"number"==typeof(i=i||{})&&(i={duration:i}),a=!n.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),a&&n.effects&&n.effects.effect[o]?r[e](i):o!==e&&r[o]?r[o](i.duration,i.easing,s):r.queue(function(t){n(this)[e](),s&&s.call(r[0]),t()})}}),n.widget}),define("skylark-jquery/main",["./core","./ajax","./callbacks","./deferred","./queue","./jquery-plugin","./widget"],function(e){return e}),define("skylark-jquery",["skylark-jquery/main"],function(e){return e}),define("skylark-jsonform/jsonform",["skylark-langx-ns","skylark-jquery"],function(e,t){return e.attach("intg.jsonform",{util:{}})}),define("skylark-jsonform/util",["skylark-langx","./jsonform"],function(e,t){var n=/\[([0-9]*)\](?=\[|\.|$)/g,r=function(t){return!(e.isUndefined(t)||e.isNull(t))};return t.util={fieldTemplateSettings:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g},valueTemplateSettings:{evaluate:/\{\[([\s\S]+?)\]\}/g,interpolate:/\{\{([\s\S]+?)\}\}/g},each:function(t,n){return e.each(t,n,!0)},hasOwnProperty:function(e,t){return"object"==typeof e&&e.hasOwnProperty(t)},escapeSelector:function(e){return e.replace(/([ \!\"\#\$\%\&\'\(\)\*\+\,\.\/\:\;<\=\>\?\@\[\\\]\^\`\{\|\}\~])/g,"\\$1")},slugify:function(e){return e.replace(/\ /g,"_")},isSet:r,applyArrayPath:function(e,t){var i=0;return e?t&&0!==t.length?e.replace(n,function(e,n){var s=e;return r(t[i])&&(s="["+t[i]+"]"),i+=1,s}):e:null},getObjKey:function(t,r,i){for(var s=t,a=r.split("."),o=null,l=null,u=null,c=0;c<a.length;c++){if(null===s||"object"!=typeof s)return null;if(o=a[c],u=o.replace(n,""),n.lastIndex=0,l=n.exec(o))for(;;){if(u&&!e.isArray(s[u]))return null;if(s=u?s[u][parseInt(l[1])]:s[parseInt(l[1])],!(l=n.exec(o)))break;u=null}else s=i&&!s[u]&&e.isArray(s)&&s[0]?s[0][u]:s[u]}return i&&e.isArray(s)&&s[0]?s[0]:s},setObjKey:function(t,r,i){for(var s=t,a=r.split("."),o=null,l=null,u=null,c=0;c<a.length-1;c++)if(o=a[c],u=o.replace(n,""),n.lastIndex=0,l=n.exec(o)){for(;e.isArray(s[u])||(s[u]=[]),s=s[u],u=parseInt(l[1],10),l=n.exec(o););"object"==typeof s[u]&&null!==s[u]||(s[u]={}),s=s[u]}else"object"==typeof s[u]&&null!==s[u]||(s[u]={}),s=s[u];if(o=a[a.length-1],u=o.replace(n,""),n.lastIndex=0,l=n.exec(o)){for(;e.isArray(s[u])||(s[u]=[]),s=s[u],u=parseInt(l[1],10),l=n.exec(o););s[u]=i}else s[u]=i},getSchemaKey:function(e,n){var r=n.replace(/\./g,".properties.").replace(/\[[0-9]*\]/g,".items"),i=t.util.getObjKey(e,r,!0);if(i&&i.$ref)throw new Error("JSONForm does not yet support schemas that use the $ref keyword. See: https://github.com/joshfire/jsonform/issues/54");return i},max:function(e){return e.reduce(function(e,t){return Math.max(e,t)})}}}),define("skylark-jsonform/element-types",["skylark-langx","skylark-jquery","./jsonform","./util"],function(e,t,n,r){var i='<div class="_jsonform-preview"><% if (value.type=="image") { %><img class="jsonform-preview" id="jsonformpreview-<%= id %>" src="<%= value.url %>" /><% } else { %><a href="<%= value.url %>"><%= value.name %></a> (<%= Math.ceil(value.size/1024) %>kB)<% } %></div><a href="#" class="btn btn-default _jsonform-delete"><i class="glyphicon glyphicon-remove" title="Remove"></i></a> ',s=function(e){return{template:'<input type="'+e+'" class=\'form-control<%= (fieldHtmlClass ? " " + fieldHtmlClass : "") %>\'name="<%= node.name %>" value="<%= escape(value) %>" id="<%= id %>" aria-label="<%= node.title ? escape(node.title) : node.name %>"<%= (node.disabled? " disabled" : "")%><%= (node.readOnly ? " readonly=\'readonly\'" : "") %><%= (node.schemaElement && (node.schemaElement.step > 0 || node.schemaElement.step == "any") ? " step=\'" + node.schemaElement.step + "\'" : "") %><%= (node.schemaElement && node.schemaElement.minLength ? " minlength=\'" + node.schemaElement.minLength + "\'" : "") %><%= (node.schemaElement && node.schemaElement.maxLength ? " maxlength=\'" + node.schemaElement.maxLength + "\'" : "") %><%= (node.schemaElement && node.schemaElement.required && (node.schemaElement.type !== "boolean") ? " required=\'required\'" : "") %><%= (node.placeholder? " placeholder=" + \'"\' + escape(node.placeholder) + \'"\' : "")%> />',fieldtemplate:!0,inputfield:!0}};return n.elementTypes={none:{template:""},root:{template:"<div><%= children %></div>"},text:s("text"),password:s("password"),date:s("date"),datetime:s("datetime"),"datetime-local":s("datetime-local"),email:s("email"),month:s("month"),number:s("number"),search:s("search"),tel:s("tel"),time:s("time"),url:s("url"),week:s("week"),range:{template:'<div class="range"><input type="range" <%= (fieldHtmlClass ? "class=\'" + fieldHtmlClass + "\' " : "") %>name="<%= node.name %>" value="<%= escape(value) %>" id="<%= id %>" aria-label="<%= node.title ? escape(node.title) : node.name %>"<%= (node.disabled? " disabled" : "")%> min=<%= range.min %> max=<%= range.max %> step=<%= range.step %><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %> /><% if (range.indicator) { %><span class="range-value" rel="<%= id %>"><%= escape(value) %></span><% } %></div>',fieldtemplate:!0,inputfield:!0,onInput:function(e,t){const n=document.querySelector('span.range-value[rel="'+t.id+'"]');n&&(n.innerText=e.target.value)},onBeforeRender:function(e,t){e.range={min:1,max:100,step:1,indicator:!1},t&&t.schemaElement&&(t.formElement&&t.formElement.step&&(e.range.step=t.formElement.step),t.formElement&&t.formElement.indicator&&(e.range.indicator=t.formElement.indicator),void 0!==t.schemaElement.minimum&&(t.schemaElement.exclusiveMinimum?e.range.min=t.schemaElement.minimum+e.range.step:e.range.min=t.schemaElement.minimum),void 0!==t.schemaElement.maximum&&(t.schemaElement.exclusiveMaximum?e.range.max=t.schemaElement.maximum-e.range.step:e.range.max=t.schemaElement.maximum))}},color:{template:'<input type="text" <%= (fieldHtmlClass ? "class=\'" + fieldHtmlClass + "\' " : "") %>name="<%= node.name %>" value="<%= escape(value) %>" id="<%= id %>" aria-label="<%= node.title ? escape(node.title) : node.name %>"<%= (node.disabled? " disabled" : "")%><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %> />',fieldtemplate:!0,inputfield:!0,onInsert:function(e,n){t(n.el).find("#"+r.escapeSelector(n.id)).spectrum({preferredFormat:"hex",showInput:!0})}},textarea:{template:'<textarea id="<%= id %>" name="<%= node.name %>" <%= (fieldHtmlClass ? "class=\'" + fieldHtmlClass + "\' " : "") %>style="height:<%= elt.height || "150px" %>;width:<%= elt.width || "100%" %>;" aria-label="<%= node.title ? escape(node.title) : node.name %>"<%= (node.disabled? " disabled" : "")%><%= (node.readOnly ? " readonly=\'readonly\'" : "") %><%= (node.schemaElement && node.schemaElement.minLength ? " minlength=\'" + node.schemaElement.minLength + "\'" : "") %><%= (node.schemaElement && node.schemaElement.maxLength ? " maxlength=\'" + node.schemaElement.maxLength + "\'" : "") %><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %><%= (node.placeholder? " placeholder=" + \'"\' + escape(node.placeholder) + \'"\' : "")%>><%= value %></textarea>',fieldtemplate:!0,inputfield:!0},wysihtml5:{template:'<textarea id="<%= id %>" name="<%= node.name %>" style="height:<%= elt.height || "300px" %>;width:<%= elt.width || "100%" %>;" aria-label="<%= node.title ? escape(node.title) : node.name %>"<%= (fieldHtmlClass ? "class=\'" + fieldHtmlClass + "\' " : "") %><%= (node.disabled? " disabled" : "")%><%= (node.readOnly ? " readonly=\'readonly\'" : "") %><%= (node.schemaElement && node.schemaElement.minLength ? " minlength=\'" + node.schemaElement.minLength + "\'" : "") %><%= (node.schemaElement && node.schemaElement.maxLength ? " maxlength=\'" + node.schemaElement.maxLength + "\'" : "") %><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %><%= (node.placeholder? " placeholder=" + \'"\' + escape(node.placeholder) + \'"\' : "")%>><%= value %></textarea>',fieldtemplate:!0,inputfield:!0,onInsert:function(e,n){var i=function(){t(n.el).data("wysihtml5")||(t(n.el).data("wysihtml5_loaded",!0),t(n.el).find("#"+r.escapeSelector(n.id)).wysihtml5({html:!0,link:!0,"font-styles":!0,image:!1,events:{load:function(){t(this.textareaElement).removeAttr("required")}}}))};if(window.jsonform_wysihtml5_setup)window.jsonform_wysihtml5_setup(i);else var s=window.setInterval(function(){window.wysihtml5&&(window.clearInterval(s),i())},1e3)}},ace:{template:'<div id="<%= id %>" style="position:relative;height:<%= elt.height || "300px" %>;"><div id="<%= id %>__ace" style="width:<%= elt.width || "100%" %>;height:<%= elt.height || "300px" %>;"></div><input type="hidden" name="<%= node.name %>" id="<%= id %>__hidden" value="<%= escape(value) %>"/></div>',fieldtemplate:!0,inputfield:!0,onInsert:function(n,i){var s=function(){var n=i.formElement||{},s=window.ace,a=s.edit(t(i.el).find("#"+r.escapeSelector(i.id)+"__ace").get(0)),o="#"+r.escapeSelector(i.id)+"__hidden";a.getSession().setNewLineMode("unix"),a.renderer.setShowPrintMargin(!1),a.setTheme("ace/theme/"+(n.aceTheme||"twilight")),n.aceMode&&a.getSession().setMode("ace/mode/"+n.aceMode),a.getSession().setTabSize(2),a.getSession().setValue(i.value||"");var l=e.debounce(function(){t(i.el).find(o).val(a.getSession().getValue()),t(i.el).find(o).change()},600);a.getSession().on("change",l),a.on("blur",function(){t(i.el).find(o).change(),t(i.el).find(o).trigger("blur")}),a.on("focus",function(){t(i.el).find(o).trigger("focus")})};if(window.jsonform_ace_setup)window.jsonform_ace_setup(s);else var a=window.setInterval(function(){window.ace&&(window.clearInterval(a),s())},1e3)}},checkbox:{template:'<div class="checkbox"><label><input type="checkbox" id="<%= id %>" <%= (fieldHtmlClass ? " class=\'" + fieldHtmlClass + "\'": "") %>name="<%= node.name %>" value="1" <% if (value) {%>checked<% } %><%= (node.disabled? " disabled" : "")%><%= (node.schemaElement && node.schemaElement.required && (node.schemaElement.type !== "boolean") ? " required=\'required\'" : "") %> /><%= node.inlinetitle || "" %></label></div>',fieldtemplate:!0,inputfield:!0,getElement:function(e){return t(e).parent().get(0)}},file:{template:'<input class="input-file" id="<%= id %>" name="<%= node.name %>" type="file" <%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %><%= (node.formElement && node.formElement.accept ? (" accept=\'" + node.formElement.accept + "\'") : "") %>/>',fieldtemplate:!0,inputfield:!0},"file-hosted-public":{template:"<span><% if (value && (value.type||value.url)) { %>"+i+'<% } %><input class="input-file" id="_transloadit_<%= id %>" type="file" name="<%= transloaditname %>" /><input data-transloadit-name="_transloadit_<%= transloaditname %>" type="hidden" id="<%= id %>" name="<%= node.name %>" value=\'<%= escape(JSON.stringify(node.value)) %>\' /></span>',fieldtemplate:!0,inputfield:!0,getElement:function(e){return t(e).parent().get(0)},onBeforeRender:function(e,t){t.ownerTree._transloadit_generic_public_index?t.ownerTree._transloadit_generic_public_index++:t.ownerTree._transloadit_generic_public_index=1,e.transloaditname="_transloadit_jsonform_genericupload_public_"+t.ownerTree._transloadit_generic_public_index,t.ownerTree._transloadit_generic_elts||(t.ownerTree._transloadit_generic_elts={}),t.ownerTree._transloadit_generic_elts[e.transloaditname]=t},onChange:function(n,i){if(i.ownerTree._transloadit_bound)return!1;i.ownerTree._transloadit_bound=!0;var s=t(i.ownerTree.domRoot);s.transloadit({autoSubmit:!1,wait:!0,onSuccess:function(t){var n=e.values(t.results);n=e.flatten(n),r.each(n,function(t){var n=i.ownerTree._transloadit_generic_elts[t.field].id,a=s.find("#"+r.escapeSelector(n)),o=e.filter(e.keys(t.meta),function(e){return!!r.isSet(t.meta[e])});t.meta=e.pick(t.meta,o),a.val(JSON.stringify(t))}),i.ownerTree._transloadit_bound=!1,s.unbind("submit.transloadit"),e.defer(function(){i.ownerTree.submit()},10)},onError:function(e){console.log("assembly error",e)}})},onInsert:function(e,n){t(n.el).find("a._jsonform-delete").on("click",function(e){return t(n.el).find("._jsonform-preview").remove(),t(n.el).find("a._jsonform-delete").remove(),t(n.el).find("#"+r.escapeSelector(n.id)).val(""),e.preventDefault(),!1})},onSubmit:function(e,t){return!t.ownerTree._transloadit_bound}},"file-transloadit":{template:"<span><% if (value && (value.type||value.url)) { %>"+i+'<% } %><input class="input-file" id="_transloadit_<%= id %>" type="file" name="_transloadit_<%= node.name %>" /><input type="hidden" id="<%= id %>" name="<%= node.name %>" value=\'<%= escape(JSON.stringify(node.value)) %>\' /></span>',fieldtemplate:!0,inputfield:!0,getElement:function(e){return t(e).parent().get(0)},onChange:function(n,i){if(i.ownerTree._transloadit_bound)return!1;i.ownerTree._transloadit_bound=!0;var s=t(i.ownerTree.domRoot);s.transloadit({autoSubmit:!1,wait:!0,onSuccess:function(t){var n=e.values(t.results);n=e.flatten(n),r.each(n,function(t){var n=s.find('input[name="'+t.field.replace(/^_transloadit_/,"")+'"]'),i=e.filter(e.keys(t.meta),function(e){return!!r.isSet(t.meta[e])});t.meta=e.pick(t.meta,i),n.val(JSON.stringify(t))}),i.ownerTree._transloadit_bound=!1,s.unbind("submit.transloadit"),e.defer(function(){i.ownerTree.submit()},10)},onError:function(e){console.log("assembly error",e)}})},onInsert:function(e,n){t(n.el).find("a._jsonform-delete").on("click",function(e){return t(n.el).find("._jsonform-preview").remove(),t(n.el).find("a._jsonform-delete").remove(),t(n.el).find("#"+r.escapeSelector(n.id)).val(""),e.preventDefault(),!1})},onSubmit:function(e,t){return!t.ownerTree._transloadit_bound}},select:{template:'<select name="<%= node.name %>" id="<%= id %>"class=\'form-control<%= (fieldHtmlClass ? " " + fieldHtmlClass : "") %>\'<%= (node.schemaElement && node.schemaElement.disabled? " disabled" : "")%><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %>> <% _.forEach(node.options, function(key, val) { if(key instanceof Object) { if (value === key.value) { %> <option selected value="<%= key.value %>"><%= key.title %></option> <% } else { %> <option value="<%= key.value %>"><%= key.title %></option> <% }} else { if (value === key) { %> <option selected value="<%= key %>"><%= key %></option> <% } else { %><option value="<%= key %>"><%= key %></option> <% }}}); %> </select>',fieldtemplate:!0,inputfield:!0},imageselect:{template:'<div><input type="hidden" name="<%= node.name %>" id="<%= node.id %>" value="<%= value %>" /><div class="dropdown"><a class="btn<% if (buttonClass && node.value) { %> <%= buttonClass %><% } else { %> btn-default<% } %>" data-toggle="dropdown" href="#"<% if (node.value) { %> style="max-width:<%= width %>px;max-height:<%= height %>px"<% } %>><% if (node.value) { %><img src="<% if (!node.value.match(/^https?:/)) { %><%= prefix %><% } %><%= node.value %><%= suffix %>" alt="" /><% } else { %><%= buttonTitle %><% } %></a><div class="dropdown-menu navbar" id="<%= node.id %>_dropdown"><div><% _.forEach(node.options, function(key, idx) { if ((idx > 0) && ((idx % columns) === 0)) { %></div><div><% } %><a class="btn<% if (buttonClass) { %> <%= buttonClass %><% } else { %> btn-default<% } %>" style="max-width:<%= width %>px;max-height:<%= height %>px"><% if (key instanceof Object) { %><img src="<% if (!key.value.match(/^https?:/)) { %><%= prefix %><% } %><%= key.value %><%= suffix %>" alt="<%= key.title %>" /></a><% } else { %><img src="<% if (!key.match(/^https?:/)) { %><%= prefix %><% } %><%= key %><%= suffix %>" alt="" /><% } %></a> <% }); %></div><div class="pagination-right"><a class="btn btn-default">Reset</a></div></div></div></div>',fieldtemplate:!0,inputfield:!0,onBeforeRender:function(e,t){var n=t.formElement||{},r=null,i=n.imageSelectorColumns||5;e.buttonTitle=n.imageSelectorTitle||"Select...",e.prefix=n.imagePrefix||"",e.suffix=n.imageSuffix||"",e.width=n.imageWidth||32,e.height=n.imageHeight||32,e.buttonClass=n.imageButtonClass||!1,t.options.length>i?(r=Math.ceil(t.options.length/i),e.columns=Math.ceil(t.options.length/r)):e.columns=i},getElement:function(e){return t(e).parent().get(0)},onInsert:function(e,n){t(n.el).on("click",".dropdown-menu a",function(e){e.preventDefault(),e.stopPropagation();var r="img"===e.target.nodeName.toLowerCase()?t(e.target):t(e.target).find("img"),i=r.attr("src"),s=n.formElement||{},a=s.imagePrefix||"",o=s.imageSuffix||"",l=s.imageWidth||32,u=s.imageHeight||32;i?(0===i.indexOf(a)&&(i=i.substring(a.length)),i=i.substring(0,i.length-o.length),t(n.el).find("input").attr("value",i),t(n.el).find('a[data-toggle="dropdown"]').addClass(s.imageButtonClass).attr("style","max-width:"+l+"px;max-height:"+u+"px").html('<img src="'+(i.match(/^https?:/)?"":a)+i+o+'" alt="" />')):(t(n.el).find("input").attr("value",""),t(n.el).find('a[data-toggle="dropdown"]').removeClass(s.imageButtonClass).removeAttr("style").html(s.imageSelectorTitle||"Select..."))})}},iconselect:{template:'<div><input type="hidden" name="<%= node.name %>" id="<%= node.id %>" value="<%= value %>" /><div class="dropdown"><a class="btn<% if (buttonClass && node.value) { %> <%= buttonClass %><% } %>" data-toggle="dropdown" href="#"<% if (node.value) { %> style="max-width:<%= width %>px;max-height:<%= height %>px"<% } %>><% if (node.value) { %><i class="icon-<%= node.value %>" /><% } else { %><%= buttonTitle %><% } %></a><div class="dropdown-menu navbar" id="<%= node.id %>_dropdown"><div><% _.forEach(node.options, function(key, idx) { if ((idx > 0) && ((idx % columns) === 0)) { %></div><div><% } %><a class="btn<% if (buttonClass) { %> <%= buttonClass %><% } %>" ><% if (key instanceof Object) { %><i class="icon-<%= key.value %>" alt="<%= key.title %>" /></a><% } else { %><i class="icon-<%= key %>" alt="" /><% } %></a> <% }); %></div><div class="pagination-right"><a class="btn">Reset</a></div></div></div></div>',fieldtemplate:!0,inputfield:!0,onBeforeRender:function(e,t){var n=t.formElement||{},r=null,i=n.imageSelectorColumns||5;e.buttonTitle=n.imageSelectorTitle||"Select...",e.buttonClass=n.imageButtonClass||!1,t.options.length>i?(r=Math.ceil(t.options.length/i),e.columns=Math.ceil(t.options.length/r)):e.columns=i},getElement:function(e){return t(e).parent().get(0)},onInsert:function(e,n){t(n.el).on("click",".dropdown-menu a",function(e){e.preventDefault(),e.stopPropagation();var r="i"===e.target.nodeName.toLowerCase()?t(e.target):t(e.target).find("i"),i=r.attr("class"),s=n.formElement||{};i?(i=i,t(n.el).find("input").attr("value",i),t(n.el).find('a[data-toggle="dropdown"]').addClass(s.imageButtonClass).html('<i class="'+i+'" alt="" />')):(t(n.el).find("input").attr("value",""),t(n.el).find('a[data-toggle="dropdown"]').removeClass(s.imageButtonClass).html(s.imageSelectorTitle||"Select..."))})}},radios:{template:'<div id="<%= node.id %>"><% _.forEach(node.options, function(key, val) { %><div class="radio"><label><input<%= (fieldHtmlClass ? " class=\'" + fieldHtmlClass + "\'": "") %> type="radio" <% if (((key instanceof Object) && (value === key.value)) || (value === key)) { %> checked="checked" <% } %> name="<%= node.name %>" value="<%= (key instanceof Object ? key.value : key) %>"<%= (node.disabled? " disabled" : "")%><%= (node.schemaElement && node.schemaElement.required ? " required=\'required\'" : "") %>/><%= (key instanceof Object ? key.title : key) %></label></div> <% }); %></div>',fieldtemplate:!0,inputfield:!0},radiobuttons:{template:'<div id="<%= node.id %>"><% _.forEach(node.options, function(key, val) { %><label class="btn btn-default <% if (((key instanceof Object) && (value === key.value)) || (value === key)) { %>active btn-success<% } %>"><input<%= (fieldHtmlClass ? " class=\'" + fieldHtmlClass + "\'": "") %> type="radio" style="position:absolute;left:-9999px;" <% if (((key instanceof Object) && (value === key.value)) || (value === key)) { %> checked="checked" <% } %> name="<%= node.name %>" value="<%= (key instanceof Object ? key.value : key) %>" /><span><%= (key instanceof Object ? key.title : key) %></span></label> <% }); %></div>',fieldtemplate:!0,inputfield:!0,onInsert:function(e,n){var r="active",i=n.formElement||{};i.activeClass&&(r+=" "+i.activeClass),t(n.el).find("label").on("click",function(){t(this).parent().find("label").removeClass(r),t(this).addClass(r)})}},checkboxes:{template:"<div><%= choiceshtml %></div>",fieldtemplate:!0,inputfield:!0,onBeforeRender:function(t,n){var i=null,s=null;n&&n.schemaElement&&(i=n.schemaElement.items?n.schemaElement.items.enum||n.schemaElement.items[0].enum:n.schemaElement.enum)&&(s="",r.each(i,function(t,i){s+=e.template('<div class="checkbox"><label><input type="checkbox" <% if (value) { %> checked="checked" <% } %> name="<%= name %>" value="1"<%= (node.disabled? " disabled" : "")%>/><%= title %></label></div>',r.fieldTemplateSettings)({name:n.key+"["+i+"]",value:e.contains(n.value,t),title:r.hasOwnProperty(n.formElement.titleMap,t)?n.formElement.titleMap[t]:t,node:n})}),t.choiceshtml=s)}},array:{template:'<div id="<%= id %>"><ul class="_jsonform-array-ul" style="list-style-type:none;"><%= children %></ul><span class="_jsonform-array-buttons"><a href="#" class="btn btn-default _jsonform-array-addmore"><i class="glyphicon glyphicon-plus-sign" title="Add new"></i></a> <a href="#" class="btn btn-default _jsonform-array-deletelast"><i class="glyphicon glyphicon-minus-sign" title="Delete last"></i></a></span></div>',fieldtemplate:!0,array:!0,childTemplate:function(e,n){return t("").sortable?'<li data-idx="<%= node.childPos %>">'+(n?'<span class="draggable line"><i class="glyphicon glyphicon-list" title="Move item"></i></span>':"")+e+"</li>":'<li data-idx="<%= node.childPos %>">'+e+"</li>"},onInsert:function(e,n){var i=t(n.el).find("#"+r.escapeSelector(n.id)),s=n.getArrayBoundaries();t("> span > a._jsonform-array-addmore",i).click(function(e){e.preventDefault(),e.stopPropagation();var r=n.children.length;if(s.maxItems>=0&&(n.children.length>s.maxItems-2&&i.find("> span > a._jsonform-array-addmore").addClass("disabled"),n.children.length>s.maxItems-1))return!1;n.insertArrayItem(r,t("> ul",i).get(0)),(s.minItems<=0||s.minItems>0&&n.children.length>s.minItems-1)&&i.find("> span > a._jsonform-array-deletelast").removeClass("disabled")});var a=t("> ul > li",i).length;if(s.minItems>0&&a<s.minItems)for(var o=0;o<s.minItems-1&&i.find("> ul > li").length<s.minItems;o++)n.insertArrayItem(a,i.find("> ul").get(0));s.minItems>0&&n.children.length<=s.minItems&&i.find("> span > a._jsonform-array-deletelast").addClass("disabled"),t("> span > a._jsonform-array-deletelast",i).click(function(e){var t=n.children.length-1;if(e.preventDefault(),e.stopPropagation(),s.minItems>0){if(n.children.length<s.minItems+2&&i.find("> span > a._jsonform-array-deletelast").addClass("disabled"),n.children.length<=s.minItems)return!1}else 1===n.children.length&&i.find("> span > a._jsonform-array-deletelast").addClass("disabled");n.deleteArrayItem(t),s.maxItems>=0&&t<=s.maxItems-1&&i.find("> span > a._jsonform-array-addmore").removeClass("disabled")}),r.isSet(n.formElement.draggable)&&!n.formElement.draggable||t(n.el).sortable&&(t("> ul",i).sortable(),t("> ul",i).bind("sortstop",function(e,r){var s=t(r.item).data("idx"),a=t(r.item).index();!function(e,r){if(e===r)return;var s=e<r?1:-1,a=0,o=t("> ul",i);for(a=e;a!==r;a+=s)n.children[a].switchValuesWith(n.children[a+s]),n.children[a].render(o.get(0)),n.children[a+s].render(o.get(0));var l=t(n.children[e].el),u=t(n.children[r].el);l.detach(),u.detach(),e<r?(0===e?o.prepend(l):t(n.children[e-1].el).after(l),t(n.children[r-1].el).after(u)):(0===r?o.prepend(u):t(n.children[r-1].el).after(u),t(n.children[e-1].el).after(l))}(s,a)}))}},tabarray:{template:'<div id="<%= id %>"><div class="tabbable tabs-left"><ul class="nav nav-tabs"><%= tabs %></ul><div class="tab-content"><%= children %></div></div><a href="#" class="btn btn-default _jsonform-array-addmore"><i class="glyphicon glyphicon-plus-sign" title="Add new"></i></a> <a href="#" class="btn btn-default _jsonform-array-deleteitem"><i class="glyphicon glyphicon-minus-sign" title="Delete item"></i></a></div>',fieldtemplate:!0,array:!0,childTemplate:function(e){return'<div data-idx="<%= node.childPos %>" class="tab-pane">'+e+"</div>"},onBeforeRender:function(t,n){var i="";r.each(n.children,function(t,n){var r=t.legend||t.title||"Item "+(n+1);i+='<li data-idx="'+n+'"'+(0===n?' class="active"':"")+'><a class="draggable tab" data-toggle="tab" rel="'+escape(r)+'">'+e.escapeHTML(r)+"</a></li>"}),t.tabs=i},onInsert:function(n,i){var s=t(i.el).find("#"+r.escapeSelector(i.id)),a=i.getArrayBoundaries(),o=function(n){var a="",o=!1;void 0===n&&((n=t("> .tabbable > .nav-tabs .active",s).data("idx"))?n=parseInt(n,10):(o=!0,n=0)),n>=i.children.length&&(n=i.children.length-1),r.each(i.children,function(n,r){t('> .tabbable > .tab-content > [data-idx="'+r+'"] > fieldset > legend',s).html(n.legend);var i=n.legend||n.title||"Item "+(r+1);a+='<li data-idx="'+r+'"><a class="draggable tab" data-toggle="tab" rel="'+escape(i)+'">'+e.escapeHTML(i)+"</a></li>"}),t("> .tabbable > .nav-tabs",s).html(a),o&&t('> .tabbable > .nav-tabs [data-idx="0"]',s).addClass("active"),t('> .tabbable > .nav-tabs [data-toggle="tab"]',s).eq(n).click()};if(t("> a._jsonform-array-deleteitem",s).click(function(e){var n=Number(t("> .tabbable > .nav-tabs .active",s).data("idx"));if(e.preventDefault(),e.stopPropagation(),a.minItems>0&&(i.children.length<a.minItems+1&&s.find("> a._jsonform-array-deleteitem").addClass("disabled"),i.children.length<=a.minItems))return!1;i.deleteArrayItem(n),o(),(i.children.length<a.minItems+1||0===i.children.length)&&s.find("> a._jsonform-array-deleteitem").addClass("disabled"),a.maxItems>=0&&i.children.length<=a.maxItems&&s.find("> a._jsonform-array-addmore").removeClass("disabled")}),t("> a._jsonform-array-addmore",s).click(function(e){var n=i.children.length;if(a.maxItems>=0&&(i.children.length>a.maxItems-2&&t("> a._jsonform-array-addmore",s).addClass("disabled"),i.children.length>a.maxItems-1))return!1;e.preventDefault(),e.stopPropagation(),i.insertArrayItem(n,s.find("> .tabbable > .tab-content").get(0)),o(n),(a.minItems<=0||a.minItems>0&&n>a.minItems-1)&&s.find("> a._jsonform-array-deleteitem").removeClass("disabled")}),t(i.el).on("legendUpdated",function(e){o(),e.preventDefault(),e.stopPropagation()}),r.isSet(i.formElement.draggable)&&!i.formElement.draggable||t(i.el).sortable&&(t("> .tabbable > .nav-tabs",s).sortable({containment:i.el,tolerance:"pointer"}),t("> .tabbable > .nav-tabs",s).bind("sortstop",function(e,n){var r=t(n.item).data("idx"),a=t(n.item).index();!function(e,n){if(e===n)return;var r=e<n?1:-1,a=0,o=t("> .tabbable > .tab-content",s).get(0);for(a=e;a!==n;a+=r)i.children[a].switchValuesWith(i.children[a+r]),i.children[a].render(o),i.children[a+r].render(o)}(r,a),o(a)})),a.minItems>=0&&i.children.length<=a.minItems){for(var l=0;l<a.minItems-1;l++)s.find("> a._jsonform-array-addmore").click();s.find("> a._jsonform-array-deleteitem").addClass("disabled"),o()}a.maxItems>=0&&i.children.length>=a.maxItems&&s.find("> a._jsonform-array-addmore").addClass("disabled"),a.minItems>=0&&i.children.length<=a.minItems&&s.find("> a._jsonform-array-deleteitem").addClass("disabled")}},help:{template:'<span class="help-block" style="padding-top:5px"><%= elt.helpvalue %></span>',fieldtemplate:!0},msg:{template:"<%= elt.msg %>"},fieldset:{template:'<fieldset class="form-group jsonform-error-<%= keydash %> <% if (elt.expandable) { %>expandable<% } %> <%= elt.htmlClass?elt.htmlClass:"" %>" <% if (id) { %> id="<%= id %>"<% } %>><% if (node.title || node.legend) { %><legend role="treeitem" aria-expanded="false"><%= node.title || node.legend %></legend><% } %><% if (elt.expandable) { %><div class="form-group"><% } %><%= children %><% if (elt.expandable) { %></div><% } %></fieldset>',onInsert:function(e,n){null!==n.el&&(t(".expandable > div, .expandable > fieldset",n.el).hide(),t(".expandable",n.el).removeClass("expanded"))}},advancedfieldset:{template:'<fieldset<% if (id) { %> id="<%= id %>"<% } %> class="expandable <%= elt.htmlClass?elt.htmlClass:"" %>"><legend role="treeitem" aria-expanded="false"><%= (node.title || node.legend) ? (node.title || node.legend) : "Advanced options" %></legend><div class="form-group"><%= children %></div></fieldset>',onInsert:function(e,n){null!==n.el&&(t(".expandable > div, .expandable > fieldset",n.el).hide(),t(".expandable",n.el).removeClass("expanded"))}},authfieldset:{template:'<fieldset<% if (id) { %> id="<%= id %>"<% } %> class="expandable <%= elt.htmlClass?elt.htmlClass:"" %>"><legend role="treeitem" aria-expanded="false"><%= (node.title || node.legend) ? (node.title || node.legend) : "Authentication settings" %></legend><div class="form-group"><%= children %></div></fieldset>',onInsert:function(e,n){null!==n.el&&(t(".expandable > div, .expandable > fieldset",n.el).hide(),t(".expandable",n.el).removeClass("expanded"))}},submit:{template:'<input type="submit" <% if (id) { %> id="<%= id %>" <% } %> class="btn btn-primary <%= elt.htmlClass?elt.htmlClass:"" %>" value="<%= value || node.title %>"<%= (node.disabled? " disabled" : "")%>/>'},button:{template:' <button type="button" <% if (id) { %> id="<%= id %>" <% } %> class="btn btn-default <%= elt.htmlClass?elt.htmlClass:"" %>"><%= node.title %></button> '},actions:{template:'<div class="<%= elt.htmlClass?elt.htmlClass:"" %>"><%= children %></div>'},hidden:{template:'<input type="hidden" id="<%= id %>" name="<%= node.name %>" value="<%= escape(value) %>" />',inputfield:!0},tabs:{template:'<ul class="nav nav-tabs <%= elt.htmlClass?elt.htmlClass:"" %>"<% if (elt.id) { %> id="<%= elt.id %>"<% } %>><%=tab_list%></ul><div class="tab-content" <% if (elt.id) { %> data-tabset="<%= elt.id %>"<% } %>><%=children%></div>',getElement:function(e){return t(e).parent().get(0)},onBeforeRender:function(t,n){var i=e.escapeHTML(n.id?n.id+"-":""),s="";return r.each(n.children,function(t,n){var r=e.escapeHTML(t.title||"Item "+(n+1)),a=r.replace(" ","_");s+='<li class="nav-item'+(0===n?" active":"")+'"><a href="#'+i+a+'" class="nav-link" data-tab="'+i+a+'" data-toggle="tab">'+r+"</a></li>"}),t.tab_list=s,t},onInsert:function(e,n){t("#"+n.id+">li.nav-item").on("click",function(e){e.preventDefault(),t(n.el).find("div[data-tabset='"+n.id+"']>div.tab-pane.active").each(function(){t(this).removeClass("active")});var r=t(this).find("a").attr("data-tab");t("#"+r).addClass("active")})}},tab:{template:'<div class="tab-pane<% if (elt.htmlClass) { %> <%= elt.htmlClass %> <% } %><% if (node.childPos === 0) { %> active<% } %>"<% if (node.title) { %> id="<%= node.parentNode.id %>-<%= node.title.replace(" ","_") %>"<% } %>><%= children %></div>'},selectfieldset:{template:'<fieldset class="tab-container <%= elt.htmlClass?elt.htmlClass:"" %>"><% if (node.legend) { %><legend role="treeitem" aria-expanded="false"><%= node.legend %></legend><% } %><% if (node.formElement.key) { %><input type="hidden" id="<%= node.id %>" name="<%= node.name %>" value="<%= escape(value) %>" /><% } else { %><a id="<%= node.id %>"></a><% } %><div class="tabbable"><div class="form-group<%= node.formElement.hideMenu ? " hide" : "" %>"><% if (!elt.notitle) { %><label for="<%= node.id %>"><%= node.title ? node.title : node.name %></label><% } %><div class="controls"><%= tabs %></div></div><div class="tab-content"><%= children %></div></div></fieldset>',inputfield:!0,getElement:function(e){return t(e).parent().get(0)},childTemplate:function(e){return'<div data-idx="<%= node.childPos %>" class="tab-pane<% if (node.active) { %> active<% } %>">'+e+"</div>"},onBeforeRender:function(t,n){var i=null,s=[];n.schemaElement&&(s=n.schemaElement.enum||[]),i=n.options?e.map(n.options,function(t,i){var a=n.children[i];return a.childPos=i,t instanceof Object?((t=e.extend({node:a},t)).title=t.title||a.legend||a.title||"Option "+(a.childPos+1),t.value=r.isSet(t.value)?t.value:r.isSet(s[i])?s[i]:i,t):{title:t,value:r.isSet(s[a.childPos])?s[a.childPos]:a.childPos,node:a}}):e.map(n.children,function(e,t){return e.childPos=t,{title:e.legend||e.title||"Option "+(e.childPos+1),value:s[e.childPos]||e.childPos,node:e}}),r.each(i,function(e,t){e.node.active=!1});var a=null;t.value&&(a=e.find(i,function(e){return e.value===n.value})),a||(a=e.find(i,function(e){return e.node.hasNonDefaultValue()})),a||(a=i[0]),a.node.active=!0,t.value=a.value;n.formElement;var o='<select class="nav form-control"'+(n.disabled?" disabled":"")+">";return r.each(i,function(t,n){o+='<option data-idx="'+n+'" value="'+t.value+'"'+(t.node.active?' selected="selected" class="active"':"")+">"+e.escapeHTML(t.title)+"</option>"}),o+="</select>",t.tabs=o,t},onInsert:function(e,n){t(n.el).find("select.nav").first().on("change",function(e){var r=t(this).find("option:selected");t(n.el).find('input[type="hidden"]').first().val(r.attr("value"))})}},optionfieldset:{template:'<div<% if (node.id) { %> id="<%= node.id %>"<% } %>><%= children %></div>'},section:{template:'<div<% if (elt.htmlClass) { %> class="<%= elt.htmlClass %>"<% } %><% if (node.id) { %> id="<%= node.id %>"<% } %>><%= children %></div>'},questions:{template:'<div><input type="hidden" id="<%= node.id %>" name="<%= node.name %>" value="<%= escape(value) %>" /><%= children %></div>',fieldtemplate:!0,inputfield:!0,getElement:function(e){return t(e).parent().get(0)},onInsert:function(e,n){n.children&&0!==n.children.length&&(r.each(n.children,function(e){t(e.el).hide()}),t(n.children[0].el).show())}},question:{template:'<div id="<%= node.id %>"><% _.forEach(node.options, function(key, val) { %><label class="<%= (node.formElement.optionsType === "radiobuttons") ? "btn btn-default" : "" %><%= ((key instanceof Object && key.htmlClass) ? " " + key.htmlClass : "") %>"><input type="radio" <% if (node.formElement.optionsType === "radiobuttons") { %> style="position:absolute;left:-9999px;" <% } %>name="<%= node.id %>" value="<%= val %>"<%= (node.disabled? " disabled" : "")%>/><span><%= (key instanceof Object ? key.title : key) %></span></label> <% }); %></div>',fieldtemplate:!0,onInsert:function(n,r){var i="active",s=r.formElement||{};s.activeClass&&(i+=" "+s.activeClass),t(r.el).find('input[type="radio"]').on("change",function(n){var s=null,a=r.options[t(this).val()];r.parentNode&&r.parentNode.el&&(t(this).parent().parent().find("label").removeClass(i),t(this).parent().addClass(i),t(r.el).nextAll().hide(),t(r.el).nextAll().find('input[type="radio"]').prop("checked",!1),a.value&&t(r.parentNode.el).find('input[type="hidden"]').val(a.value),a.next&&(s=e.find(r.parentNode.children,function(e){return e.formElement&&e.formElement.qid===a.next}),t(s.el).show(),t(s.el).nextAll().hide(),t(s.el).nextAll().find('input[type="radio"]').prop("checked",!1)),a.href&&(a.target?window.open(a.href,a.target):window.location=a.href),a.submit&&setTimeout(function(){r.ownerTree.submit()},0))})}}},n.elementTypes}),define("skylark-jsonform/field-template",["./jsonform"],function(e){return e.fieldTemplate=function(e){return'<div <% for(var key in elt.htmlMetaData) {%><%= key %>="<%= elt.htmlMetaData[key] %>" <% }%>class="form-group jsonform-error-<%= keydash %><%= elt.htmlClass ? " " + elt.htmlClass : "" %><%= (node.schemaElement && node.schemaElement.required && (node.schemaElement.type !== "boolean") ? " jsonform-required" : "") %><%= (node.readOnly ? " jsonform-readonly" : "") %><%= (node.disabled ? " jsonform-disabled" : "") %>"><% if (!elt.notitle) { %><label for="<%= node.id %>"><%= node.title ? node.title : node.name %></label><% } %><div class="controls"><% if (node.prepend || node.append) { %><div class="<% if (node.prepend) { %>input-group<% } %><% if (node.append) { %> input-group<% } %>"><% if (node.prepend) { %><span class="input-group-addon"><%= node.prepend %></span><% } %><% } %>'+e+'<% if (node.append) { %><span class="input-group-addon"><%= node.append %></span><% } %><% if (node.prepend || node.append) { %></div><% } %><% if (node.description) { %><span class="help-block"><%= node.description %></span><% } %><span class="help-block jsonform-errortext" style="display:none;"></span></div></div>'}}),define("skylark-jsonform/form-node",["skylark-langx-types","skylark-langx-objects","skylark-langx-funcs","skylark-langx-arrays","skylark-langx-strings","skylark-langx","skylark-jquery","./jsonform","./util"],function(e,t,n,r,i,s,a,o,l){var u=function(){this.id=null,this.key=null,this.el=null,this.formElement=null,this.schemaElement=null,this.view=null,this.children=[],this.ownerTree=null,this.parentNode=null,this.childTemplate=null,this.legendChild=null,this.arrayPath=[],this.childPos=0};return u.prototype.clone=function(e){var n=new u;return n.arrayPath=t.clone(this.arrayPath),n.ownerTree=this.ownerTree,n.parentNode=e||this.parentNode,n.formElement=this.formElement,n.schemaElement=this.schemaElement,n.view=this.view,n.children=r.map(this.children,function(e){return e.clone(n)}),this.childTemplate&&(n.childTemplate=this.childTemplate.clone(n)),n},u.prototype.hasNonDefaultValue=function(){if(this.formElement&&"hidden"==this.formElement.type)return!1;if(this.value&&!this.defaultValue)return!0;var e=this.children.find(function(e){return e.hasNonDefaultValue()});return!!e},u.prototype.appendChild=function(e){return e.parentNode=this,e.childPos=this.children.length,this.children.push(e),e},u.prototype.removeChild=function(){var e=this.children[this.children.length-1];if(e)return a(e.el).remove(),this.children.pop()},u.prototype.moveValuesTo=function(e){var t=this.getFormValues(e.arrayPath);e.resetValues(),e.computeInitialValues(t,!0)},u.prototype.switchValuesWith=function(e){var t=this.getFormValues(e.arrayPath),n=e.getFormValues(this.arrayPath);e.resetValues(),e.computeInitialValues(t,!0),this.resetValues(),this.computeInitialValues(n,!0)},u.prototype.resetValues=function(){var e=null;if(this.value=null,this.parentNode?(this.arrayPath=t.clone(this.parentNode.arrayPath),this.parentNode.view&&this.parentNode.view.array&&this.arrayPath.push(this.childPos)):this.arrayPath=[],this.view&&this.view.inputfield)e=a(":input",this.el).serializeArray(),l.each(e,function(e){a('[name="'+l.escapeSelector(e.name)+'"]',a(this.el)).val("")},this);else if(this.view&&this.view.array)for(;this.children.length>0;)this.removeChild();l.each(this.children,function(e){e.resetValues()})},u.prototype.setChildTemplate=function(e){this.childTemplate=e,e.parentNode=this},u.prototype.computeInitialValues=function(n,a){var o=this,u=null,c=1,f=0,h=this.ownerTree.formDesc.tpldata||{};if(this.parentNode?(this.arrayPath=t.clone(this.parentNode.arrayPath),this.parentNode.view&&this.parentNode.view.array&&this.arrayPath.push(this.childPos)):this.arrayPath=[],h.idx=this.arrayPath.length>0?this.arrayPath[this.arrayPath.length-1]+1:this.childPos+1,h.value="",h.getValue=function(e){if(!n)return"";var t,r=n,i=e.split("[].");for(t=0;t<i.length-1;t++)r=r[i[t]][o.arrayPath[t]];return r[i[t]]},this.formElement&&(this.formElement.id?this.id=l.applyArrayPath(this.formElement.id,this.arrayPath):this.view&&this.view.array?this.id=l.escapeSelector(this.ownerTree.formDesc.prefix)+"-elt-counter-"+i.uniqueId():this.parentNode&&this.parentNode.view&&this.parentNode.view.array?this.id=l.escapeSelector(this.ownerTree.formDesc.prefix)+"-elt-counter-"+i.uniqueId():"button"!==this.formElement.type&&"selectfieldset"!==this.formElement.type&&"question"!==this.formElement.type&&"buttonquestion"!==this.formElement.type||(this.id=l.escapeSelector(this.ownerTree.formDesc.prefix)+"-elt-counter-"+i.uniqueId()),this.formElement.key&&(this.key=l.applyArrayPath(this.formElement.key,this.arrayPath),this.keydash=l.slugify(this.key.replace(/\./g,"---"))),this.name=l.applyArrayPath(this.formElement.name,this.arrayPath),l.each(["title","legend","description","append","prepend","inlinetitle","helpvalue","value","disabled","placeholder","readOnly"],t=>{e.isString(this.formElement[t])?(-1!==this.formElement[t].indexOf("{{values.")?this[t]=this.formElement[t].replace(/\{\{values\.([^\}]+)\}\}/g,'{{getValue("$1")}}'):this[t]=l.applyArrayPath(this.formElement[t],this.arrayPath),this[t]&&(this[t]=s.template(this[t],l.valueTemplateSettings)(h))):this[t]=this.formElement[t]}),this.formElement.options&&(this.options=r.map(this.formElement.options,function(n){var r=null;return e.isObject(n)&&n.title?(r=-1!==n.title.indexOf("{{values.")?n.title.replace(/\{\{values\.([^\}]+)\}\}/g,'{{getValue("$1")}}'):l.applyArrayPath(n.title,o.arrayPath),t.extend({},n,{value:l.isSet(n.value)?n.value:"",title:s.template(r,l.valueTemplateSettings)(h)})):n}))),this.view&&this.view.inputfield&&this.schemaElement)n?l.isSet(l.getObjKey(n,this.key))?this.value=l.getObjKey(n,this.key):l.isSet(this.schemaElement.default)&&(this.value=this.schemaElement.default,"string"==typeof this.value&&(this.value=s.template(this.value,l.valueTemplateSettings)(h))):a||!l.isSet(this.value)&&l.isSet(this.schemaElement.default)&&(this.value=this.schemaElement.default,e.isString(this.value)&&(-1!==this.value.indexOf("{{values.")?this.value=this.value.replace(/\{\{values\.([^\}]+)\}\}/g,'{{getValue("$1")}}'):this.value=l.applyArrayPath(this.value,this.arrayPath),this.value&&(this.value=s.template(this.value,l.valueTemplateSettings)(h))),this.defaultValue=!0);else if(this.view&&this.view.array)for(c=0,n?c=this.getPreviousNumberOfItems(n,this.arrayPath):0===c&&(c=1),f=0;f<c;f++)this.appendChild(this.childTemplate.clone());if(l.each(this.children,function(e){e.computeInitialValues(n,a)}),this.formElement&&this.formElement.valueInLegend)for(u=this;u;){if(u.parentNode&&u.parentNode.view&&u.parentNode.view.array&&(u.legendChild=this,u.formElement&&u.formElement.legend)){u.legend=l.applyArrayPath(u.formElement.legend,u.arrayPath),h.idx=u.arrayPath.length>0?u.arrayPath[u.arrayPath.length-1]+1:u.childPos+1,h.value=l.isSet(this.value)?this.value:"",u.legend=s.template(u.legend,l.valueTemplateSettings)(h);break}u=u.parentNode}},u.prototype.getPreviousNumberOfItems=function(e,t){var n=null,i=null,s=null;return e?this.view.inputfield&&this.schemaElement?(n=function(e,t){var n=0,r=0;if(!e)return null;if(t>0)for(;n<t;){if(-1===(r=e.indexOf("[]",r)))return e;r+=2,n+=1}return-1===(r=e.indexOf("[]",r))?e:e.substring(0,r)}(this.formElement.key,t.length),n=l.applyArrayPath(n,t),(i=o.util.getObjKey(e,n))?(s=r.map(this.children,function(n){return n.getPreviousNumberOfItems(e,t)}),l.max([l.max(s)||0,i.length])):0):this.view.array?this.childTemplate.getPreviousNumberOfItems(e,t):(s=r.map(this.children,function(n){return n.getPreviousNumberOfItems(e,t)}),l.max(s)||0):0},u.prototype.getFormValues=function(t){var n={};if(!this.el)throw new Error("formNode.getFormValues can only be called on nodes that are associated with a DOM element in the tree");var r=a(":input",this.el).serializeArray();r=r.concat(a(":input[type=checkbox]:not(:disabled):not(:checked)",this.el).map(function(){return{name:this.name,value:this.checked}}).get()),t&&l.each(r,function(e){e.name=l.applyArrayPath(e.name,t)});for(var i=this.ownerTree.formDesc.schema,s=0;s<r.length;s++){var u=r[s].name,c=l.getSchemaKey(i.properties,u),f=null,h=null;if(c)if(c._jsonform_checkboxes_as_array&&(f=u.match(/\[([0-9]*)\]$/)))u=u.replace(/\[([0-9]*)\]$/,""),h=o.util.getObjKey(n,u)||[],"1"===r[s].value&&h.push(c.enum[parseInt(f[1],10)]),o.util.setObjKey(n,u,h);else{if("boolean"===c.type&&("0"===r[s].value?r[s].value=!1:r[s].value=!!r[s].value),"number"!==c.type&&"integer"!==c.type||e.isString(r[s].value)&&(r[s].value.length?isNaN(Number(r[s].value))||(r[s].value=Number(r[s].value)):r[s].value=null),"string"!==c.type||""!==r[s].value||c._jsonform_allowEmpty||(r[s].value=null),"object"===c.type&&e.isString(r[s].value)&&"{"===r[s].value.substring(0,1))try{r[s].value=JSON.parse(r[s].value)}catch(e){r[s].value={}}"object"!==c.type||"null"!==r[s].value&&""!==r[s].value||(r[s].value=null),r[s].name&&null!==r[s].value&&o.util.setObjKey(n,r[s].name,r[s].value)}}return n},u.prototype.render=function(e){var t=this.generate();this.setContent(t,e),this.enhance()},u.prototype.setContent=function(e,t){var n=a(e),r=t||(this.parentNode?this.parentNode.el:this.ownerTree.domRoot),i=null;this.el?a(this.el).replaceWith(n):(i=a(r).children().get(this.childPos))?a(i).before(n):a(r).append(n),this.el=n,this.updateElement(this.el)},u.prototype.updateElement=function(e){this.id&&(this.el=a("#"+l.escapeSelector(this.id),e).get(0),this.view&&this.view.getElement&&(this.el=this.view.getElement(this.el)),!1!==this.fieldtemplate&&this.view&&this.view.fieldtemplate&&(this.el=a(this.el).parent().parent(),(this.prepend||this.prepend)&&(this.el=this.el.parent()),this.el=this.el.get(0)),this.parentNode&&this.parentNode.view&&this.parentNode.view.childTemplate&&(this.el=a(this.el).parent().get(0)));for(const t in this.children)0!=this.children.hasOwnProperty(t)&&this.children[t].updateElement(this.el||e)},u.prototype.generate=function(){var e={id:this.id,keydash:this.keydash,elt:this.formElement,schema:this.schemaElement,node:this,value:l.isSet(this.value)?this.value:"",escape:i.escapeHTML},t=null;this.ownerTree.formDesc.onBeforeRender&&this.ownerTree.formDesc.onBeforeRender(e,this),this.view.onBeforeRender&&this.view.onBeforeRender(e,this),t=this.template?this.template:this.formElement&&this.formElement.template?this.formElement.template:this.view.template,!1!==this.fieldtemplate&&(this.fieldtemplate||this.view.fieldtemplate)&&(t=o.fieldTemplate(t)),this.parentNode&&this.parentNode.view&&this.parentNode.view.childTemplate&&(t=this.parentNode.view.childTemplate(t,!l.isSet(this.parentNode.formElement.draggable)||this.parentNode.formElement.draggable));var n="";return l.each(this.children,function(e){n+=e.generate()}),e.children=n,e.fieldHtmlClass="",this.ownerTree&&this.ownerTree.formDesc&&this.ownerTree.formDesc.params&&this.ownerTree.formDesc.params.fieldHtmlClass&&(e.fieldHtmlClass=this.ownerTree.formDesc.params.fieldHtmlClass),this.formElement&&void 0!==this.formElement.fieldHtmlClass&&(e.fieldHtmlClass=this.formElement.fieldHtmlClass),s.template(t,l.fieldTemplateSettings)(e)},u.prototype.enhance=function(){var e=this,n=null,r=null,i=t.clone(this.ownerTree.formDesc.tpldata)||{};if(this.formElement&&(this.view.onInsert&&this.view.onInsert({target:a(this.el)},this),n=this.handlers||this.formElement.handlers,(r=this.onInsert||this.formElement.onInsert)&&r({target:a(this.el)},this),n&&l.each(n,function(e,t){"insert"===t&&e({target:a(this.el)},this)},this),this.el&&(this.onChange&&a(this.el).bind("change",function(t){e.onChange(t,e)}),this.view.onChange&&a(this.el).bind("change",function(t){e.view.onChange(t,e)}),this.formElement.onChange&&a(this.el).bind("change",function(t){e.formElement.onChange(t,e)}),this.onInput&&a(this.el).bind("input",function(t){e.onInput(t,e)}),this.view.onInput&&a(this.el).bind("input",function(t){e.view.onInput(t,e)}),this.formElement.onInput&&a(this.el).bind("input",function(t){e.formElement.onInput(t,e)}),this.onClick&&a(this.el).bind("click",function(t){e.onClick(t,e)}),this.view.onClick&&a(this.el).bind("click",function(t){e.view.onClick(t,e)}),this.formElement.onClick&&a(this.el).bind("click",function(t){e.formElement.onClick(t,e)}),this.onKeyUp&&a(this.el).bind("keyup",function(t){e.onKeyUp(t,e)}),this.view.onKeyUp&&a(this.el).bind("keyup",function(t){e.view.onKeyUp(t,e)}),this.formElement.onKeyUp&&a(this.el).bind("keyup",function(t){e.formElement.onKeyUp(t,e)}),n&&l.each(n,function(t,n){"insert"!==n&&a(this.el).bind(n,function(n){t(n,e)})},this)),this.legendChild&&this.legendChild.formElement)){var o=function(t){e.formElement&&e.formElement.legend&&e.parentNode&&(e.legend=l.applyArrayPath(e.formElement.legend,e.arrayPath),i.idx=e.arrayPath.length>0?e.arrayPath[e.arrayPath.length-1]+1:e.childPos+1,i.value=a(t.target).val(),e.legend=s.template(e.legend,l.valueTemplateSettings)(i),a(e.parentNode.el).trigger("legendUpdated"))};a(this.legendChild.el).bind("change",o),a(this.legendChild.el).bind("keyup",o)}l.each(this.children,function(e){e.enhance()})},u.prototype.insertArrayItem=function(e,t){var n=0;void 0===e&&(e=this.children.length);var r=this.childTemplate.clone();for(this.appendChild(r),r.resetValues(),n=this.children.length-2;n>=e;n--)this.children[n].moveValuesTo(this.children[n+1]);for(this.children[e].resetValues(),this.children[e].computeInitialValues(),n=e;n<this.children.length;n++)this.children[n].render(t)},u.prototype.deleteArrayItem=function(e){var t=0;for(void 0===e&&(e=this.children.length-1),t=e;t<this.children.length-1;t++)this.children[t+1].moveValuesTo(this.children[t]),this.children[t].render();this.removeChild()},u.prototype.getArrayBoundaries=function(){if(!this.view||!this.view.array)return{minItems:-1,maxItems:-1};var e=function(t,n){var r=null,i=null,s={minItems:-1,maxItems:-1};return n=n||t,t.view&&t.view.array&&t!==n?s:t.key?(i=t.key.replace(/\[[0-9]+\]/g,"[]"),t!==n&&(i=i.replace(/\[\][^\[\]]*$/,"")),(r=l.getSchemaKey(t.ownerTree.formDesc.schema.properties,i))?{minItems:r.minItems||r.minLength||-1,maxItems:r.maxItems||r.maxLength||-1}:s):(l.each(t.children,function(t){var r=e(t,n);-1!==r.minItems&&(-1!==s.minItems?s.minItems=Math.max(s.minItems,r.minItems):s.minItems=r.minItems),-1!==r.maxItems&&(-1!==s.maxItems?s.maxItems=Math.min(s.maxItems,r.maxItems):s.maxItems=r.maxItems)}),s)};return e(this)},o.formNode=u}),define("skylark-jsonform/form-tree",["skylark-langx-globals","skylark-langx-types","skylark-langx-objects","skylark-langx-arrays","skylark-langx-strings","skylark-jquery","./jsonform","./util","./element-types","./form-node"],function(e,t,n,r,i,s,a,o,l,u){var c=function(){this.eventhandlers=[],this.root=null,this.formDesc=null};return c.prototype.initialize=function(e){e=e||{},this.formDesc=n.clone(e),this.formDesc.prefix=this.formDesc.prefix||"jsonform-"+i.uniqueId(),this.formDesc.schema&&!this.formDesc.schema.properties&&(this.formDesc.schema={properties:this.formDesc.schema}),this.formDesc.form=this.formDesc.form||["*",{type:"actions",items:[{type:"submit",value:"Submit"}]}],this.formDesc.form=t.isArray(this.formDesc.form)?this.formDesc.form:[this.formDesc.form],this.formDesc.params=this.formDesc.params||{},this.root=new u,this.root.ownerTree=this,this.root.view=l.root,this.buildTree(),this.computeInitialValues()},c.prototype.buildTree=function(){o.each(this.formDesc.form,e=>{"*"===e?o.each(this.formDesc.schema.properties,(e,t)=>{this.root.appendChild(this.buildFromLayout({key:t}))}):(t.isString(e)&&(e={key:e}),this.root.appendChild(this.buildFromLayout(e)))},this)},c.prototype.buildFromLayout=function(e,i){var s=null,a=new u,c=null,f=null;if((e=n.clone(e)).items&&(t.isArray(e.items)?e.items=r.map(e.items,n.clone):e.items=[n.clone(e.items)]),e.key){if(!(s=o.getSchemaKey(this.formDesc.schema.properties,e.key)))throw new Error('The JSONForm object references the schema key "'+e.key+'" but that key does not exist in the JSON schema');if(this.formDesc.onElementSchema&&this.formDesc.onElementSchema(e,s),e.name=e.name||e.key,e.title=e.title||s.title,e.description=e.description||s.description,e.readOnly=e.readOnly||s.readOnly||e.readonly||s.readonly,e.id||(e.id=o.escapeSelector(this.formDesc.prefix)+"-elt-"+o.slugify(e.key)),e.allowEmpty&&(s._jsonform_allowEmpty=!0),!e.type){if(t.isArray(s.type)){if(r.contains(s.type,"null")&&(s.type=r.without(s.type,"null"),s.required=!1),s.type.length>1)throw new Error("Cannot process schema element with multiple types.");s.type=r.first(s.type)}"string"===s.type&&"color"===s.format?e.type="color":"number"!==s.type&&"integer"!==s.type||s.enum?"string"!==s.type&&"any"!==s.type||s.enum?"boolean"===s.type?e.type="checkbox":"object"===s.type?s.properties?e.type="fieldset":e.type="textarea":t.isUndefined(s.enum)?e.type=s.type:e.type="select":e.type="text":(e.type="number","number"===s.type&&(s.step="any"))}if(!e.options&&s.enum&&(e.titleMap?e.options=r.map(s.enum,function(t){return{value:t,title:o.hasOwnProperty(e.titleMap,t)?e.titleMap[t]:t}}):e.options=s.enum),"checkboxes"===e.type&&s.items){var h=s.items.enum;h&&(s.items._jsonform_checkboxes_as_array=!0),!h&&s.items[0]&&(h=s.items[0].enum)&&(s.items[0]._jsonform_checkboxes_as_array=!0)}"object"===s.type&&o.each(s.properties,(t,n)=>{a.appendChild(this.buildFromLayout({key:e.key+"."+n}))})}if(e.type||(e.type="none"),!(c=l[e.type]))throw new Error('The JSONForm contains an element whose type is unknown: "'+e.type+'"');if(s){if(!c.inputfield&&!c.array&&"selectfieldset"!==e.type&&"object"!==s.type)throw new Error('The JSONForm contains an element that links to an element in the JSON schema (key: "'+e.key+'") and that should not based on its type ("'+e.type+'")')}else if(c.inputfield&&"selectfieldset"!==e.type)throw new Error('The JSONForm defines an element of type "'+e.type+'" but no "key" property to link the input field to the JSON schema');return e.iddot=o.escapeSelector(e.id||""),a.formElement=e,a.schemaElement=s,a.view=c,a.ownerTree=this,e.handlers||(e.handlers={}),a.view.array?(f=e.items?e.items[0]||e.items:e.key+"[]",t.isString(f)&&(f={key:f}),a.setChildTemplate(this.buildFromLayout(f))):e.items&&o.each(e.items,e=>{t.isString(e)&&(e={key:e}),a.appendChild(this.buildFromLayout(e))}),a},c.prototype.computeInitialValues=function(){this.root.computeInitialValues(this.formDesc.value)},c.prototype.render=function(e){e&&(this.domRoot=e,this.root.render(),this.hasRequiredField()&&s(e).addClass("jsonform-hasrequired"))},c.prototype.forEachElement=function(e){var t=function(n){for(var r=0;r<n.children.length;r++)e(n.children[r]),t(n.children[r])};t(this.root)},c.prototype.validate=function(t){var n=a.getFormValue(this.domRoot),r=!1,i=this.formDesc;if(!1!==i.validate){var o=!1;if("object"!=typeof i.validate?e.JSONFormValidator&&(o=e.JSONFormValidator.createEnvironment("json-schema-draft-03")):o=i.validate,o){var l=o.validate(n,this.formDesc.schema);s(this.domRoot).jsonFormErrors(!1,i),l.errors.length&&(r||(r=[]),r=r.concat(l.errors))}}return r&&!t&&(i.displayErrors?i.displayErrors(r,this.domRoot):s(this.domRoot).jsonFormErrors(r,i)),{errors:r}},c.prototype.submit=function(e){var t=function(){return e&&(e.preventDefault(),e.stopPropagation()),!1},n=a.getFormValue(this.domRoot),r=this.formDesc,i=!1;if(this.forEachElement(function(t){i||t.view.onSubmit&&(i=!t.view.onSubmit(e,t))}),i)return t();var s=this.validate();return r.onSubmit&&!r.onSubmit(s.errors,n)?t():s.errors?t():!(!r.onSubmitValid||r.onSubmitValid(n))&&t()},c.prototype.hasRequiredField=function(){var e=function(n){if(!n)return null;if(n.required&&"boolean"!==n.type)return n;var i=r.find(n.properties,function(t){return e(t)});return i||(n.items&&(i=t.isArray(n.items)?r.find(n.items,function(t){return e(t)}):e(n.items))?i:void 0)};return e(this.formDesc.schema)},a.formTree=c}),define("skylark-jsonform/get-form-value",["skylark-jquery","./jsonform"],function(e,t){return t.getFormValue=function(t){var n=e(t).data("jsonform-tree");return n?n.root.getFormValues():null},t.getFormValue}),define("skylark-jsonform/fn",["skylark-langx","skylark-jquery","./form-tree","./get-form-value"],function(e,t,n,r){t.fn.jsonFormErrors=function(e,n){if(t(".error",this).removeClass("error"),t(".warning",this).removeClass("warning"),t(".jsonform-errortext",this).hide(),e){for(var r=[],i=0;i<e.length;i++){var s=e[i].uri.replace(/.*#\//,"").replace(/\//g,".").replace(/\.([0-9]+)(?=\.|$)/g,"[$1]"),a=".jsonform-error-"+util.escapeSelector(s.replace(/\./g,"---"));r.push(a);var o=e[i].type||"error";t(a,this).addClass(o),t(a+" .jsonform-errortext",this).html(e[i].message).show()}r=r.join(",");var l=t(r).get(0);l&&l.scrollIntoView&&l.scrollIntoView(!0,{behavior:"smooth"})}},t.fn.jsonForm=function(r){r=e.defaults({},r,{submitEvent:"submit"});var i,s,a,o,l=new n;return l.initialize(r),l.render(this.get(0)),r.transloadit&&this.append('<input type="hidden" name="params" value=\''+e.escapeHTML(JSON.stringify(r.transloadit.params))+"'>"),this.data("jsonform-tree",l),r.submitEvent&&(this.unbind(r.submitEvent+".jsonform"),this.bind(r.submitEvent+".jsonform",function(e){l.submit(e)})),i=function(e,t){t.find("> .active").removeClass("active"),e.addClass("active")},s=function(e,t){e.find("input, textarea, select").removeAttr("disabled"),e.parent().children(":not([data-idx="+t+"])").find("input, textarea, select").attr("disabled","disabled")},a=function(e){var n,r=t("option:selected",t(this)),a=t(this),o=r.get(0).getAttribute("data-idx")||r.attr("value");e.preventDefault(),r.hasClass("active")||(n=t(this).parents(".tabbable").eq(0).find("> .tab-content > [data-idx="+o+"]"),i(r,a),i(n,n.parent()),s(n,o))},o=function(e){t("a",t(this));var n=t(this).parents(".tabbable").first().find(".tab-content").first(),r=t(this).index(),a=n.find("> [data-idx="+r+"]");e.preventDefault(),i(t(this),t(this).parent()),i(a,a.parent()),t(this).parent().hasClass("jsonform-alternative")&&s(a,r)},this.each(function(){t(this).delegate("select.nav","change",a),t(this).find("select.nav").each(function(){t(this).val(t(this).find(".active").attr("value"));var e=t(this).find("option:selected").get(0).getAttribute("data-idx")||t(this).find("option:selected").attr("value"),n=t(this).parents(".tabbable").eq(0).find("> .tab-content > [data-idx="+e+"]");s(n,e)}),t(this).delegate("ul.nav li","click",o),t(this).find("ul.nav li.active").click()}),t(".expandable > div, .expandable > fieldset",this).hide(),this.on("click",".expandable > legend",function(){var e=t(this).parent();e.toggleClass("expanded"),e.find("legend").attr("aria-expanded",e.hasClass("expanded")),t("> div",e).slideToggle(100)}),l},t.fn.jsonFormValue=function(){return r(this)}}),define("skylark-jsonform/get-initial-value",["skylark-langx","./jsonform","./util"],function(e,t,n){var r=function(t,i,s,a,o){var l=null;(a=a||{}).idx=a.idx||(s?s[s.length-1]:1),a.value=n.isSet(a.value)?a.value:"",a.getValue=a.getValue||function(e){return r(t,e,s,a,o)};var u=function(t,r){var i=null;return t&&t.length?(n.each(t,function(t){i||(t!==r?e.isString(t)||(t.key===r?i=t:t.items&&(i=u(t.items,r))):i={key:t})}),i):null},c=u(t.form||[],i),f=n.getSchemaKey(t.schema.properties,i);return o&&t.value&&(l=n.getObjKey(t.value,n.applyArrayPath(i,s))),n.isSet(l)||(c&&void 0!==c.value?l=c.value:f&&n.isSet(f.default)&&(l=f.default),l&&-1!==l.indexOf("{{values.")&&(l=l.replace(/\{\{values\.([^\}]+)\}\}/g,'{{getValue("$1")}}')),l&&(l=e.template(l,valueTemplateSettings)(a))),isSet(l)&&c&&n.hasOwnProperty(c.titleMap,l)&&(l=e.template(c.titleMap[l],valueTemplateSettings)(a)),l&&_.isString(l)&&f&&f.maxLength&&l.length>f.maxLength&&(l=l.substr(0,f.maxLength-1)+""),n.isSet(l)?l:null};return t.getInitialValue=r}),define("skylark-jsonform/main",["./jsonform","./element-types","./field-template","./fn","./form-node","./form-tree","./get-form-value","./get-initial-value","."],function(e){return e}),define("skylark-jsonform",["skylark-jsonform/main"],function(e){return e})}(define,require),!isAmd){var skylarkjs=require("skylark-langx-ns");isCmd?module.exports=skylarkjs:globals.skylarkjs=skylarkjs}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-jsonform-all.js.map
